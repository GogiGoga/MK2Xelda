# XELDA 1
# Copyleft 2013 the Mojon Twins
# MK2
# written by Andy Dansby


##################################
# Variable settings
##################################

#pay attention to #define SCRIPT_PAGE 3 in config.h
#number of variables in definitions.h found in MAX_FLAGS

# define our flag names and assign them to values, these will be found in an array
DEFALIAS
	$ALREADY_PLAYING 0
	$WARPED_TO_HERE 1
	
	#conversations
	$TALK_ISLAND_KEEPER 2
	$TALK_GATE_KEEPER 3
	$TALK_DUNGEON_GATEMASTER 4
	$TALK_WOODSMAN 5
	$TALK_BLACKSMITH 6
	$TALK_ISLAND_KEEPER_DAUGHTER 7
	$TALK_MOTHER_DUNGEON_GATEMASTER 8
	$TALK_GATEKEEPER 9
	$TALK_HUNGRY_MAGICIAN 9
	$TALK_MAGICIAN_COUSIN 10
	$TALK_DESERT_GATEMASTER 11
	$TALK_BOOK_DEALER 12
	$TALK_WIZARD 13
	$TALK_BOOM_BETTY 14
	$LAST_BOSS_DEAD 15
	
	#objects
	$HAVE_CASTLE_KEY 17
	$HAVE_TEDDY_BEAR 18
	$HAVE_AXE 19
	$HAVE_FIRE_FLOWER 20
	$HAVE_FROG 21
	$HAVE_CRAB_CLAW 22
	$HAVE_GIANT_CLAM 23
	$HAVE_DESERT_KEY 24
	$HAVE_MAGIC_RING 25
	$HAVE_RED_KEY 26	
	$HAVE_GOLDEN_APPLE 27	
	$HAVE_RED_ORB 28
	$HAVE_BLUE_ORB 29
	$HAVE_CYAN_ORB 30
	$HAVE_MAGENTA_ORB 31	
	$HAVE_STAFF_ONE 32
	$HAVE_STAFF_TWO 33
	$NUMBER_STAFF_HALVES 34
	$HAVE_TORCH 35
	$HAVE_SCEPTRE 36
	$NEED_DYNAMITE 37
	
	$SEE_LANDSLIDE 38	
	$RAISE_LANDBRIDGE 39
	
	$DUNGEON_FLAG_1 40
	$DUNGEON_FLAG_2 41
	$DUNGEON_FLAG_3 42
	$DUNGEON_FLAG_4 43
	$DUNGEON_FLAG_5 44
	$DUNGEON_FLAG_6 45

	$CAN_COLLECT_ORBS 48
	$NUMBER_OF_ORBS 49
	
	#dungeons
	$DUNGEON_ONE_OPEN 50
	$DUNGEON_TWO_OPEN 51
	$DUNGEON_THREE_OPEN 52
	$DUNGEON_FOUR_OPEN 53
	
	$DUNGEON_ONE_CONQUERED 54
	$DUNGEON_TWO_CONQUERED 55
	$DUNGEON_THREE_CONQUERED 56
	$DUNGEON_FOUR_CONQUERED 57
	
	#gates
	$SWAMP_GATE 58
	$FOREST_GATE 59
	$FIREFLOWER_GATE 60
	$TEDDYBEAR_GATE 61
	$SWAMP_KEY_GATE 62
	$MAP4_GATE 63
	$FINISH_DUNGEON 64
	$DESERT_GATE 65
	$MOUNTAIN_GATE 101
	$PLAINS_GATE 102
	$STAFF_ONE_GATE 66
	$STAFF_TWO_GATE 67
	$ALL_GATES_OPEN 68
	$CASTLE_GATE 69	
	$CASTLE_LOCKED_ROOM2 70
	
	$SWITCH_1 71
	$SWITCH_2 72
	$SWITCH_3 73
	$SWITCH_4 74
	$SWITCH_5 75
	$SWITCH_6 76
	$SWITCH_7 77
	$SWITCH_8 78
	$SWITCH_9 79
	$SWITCH_10 80
	$SWITCH_11 81
	$SWITCH_12 82
	$SWITCH_13 83
	$SWITCH_14 84
	$SWITCH_15 85
	$SWITCH_16 86
	$SWITCH_17 87
	$SWITCH_18 88
	$SWITCH_19 89
	$SWITCH_20 90
	$SWITCH_21 91
	$SWITCH_22 92
	$SWITCH_23 93
	$SWITCH_24 94
	$SWITCH_25 95
	$SWITCH_26 96
	$SWITCH_27 97	
	
	$MOVED_TILE_FLAG 98
	$MOVED_X_FLAG 99
	$MOVED_Y_FLAG 100	
	
	$LIFE_01 103
	$LIFE_02 104
	$LIFE_03 105
	$LIFE_04 106
	$LIFE_05 107
	$LIFE_06 108
	$LIFE_07 109
	$LIFE_08 110
	$LIFE_09 111
	$LIFE_10 112
	$LIFE_11 113
	$LIFE_12 114	
	
	$SWITCH_SPIKES 115	
	
	$CAN_FIRE 116
	$ENEMS_KILLED 117
	
	$DYNOMITE_1 118
	$DYNOMITE_2 119
	$DYNOMITE_3 120
	$DYNOMITE_4 121
	$DYNOMITE_5 122
	$DYNOMITE_6 123
	$DYNOMITE_7 124
	
	$ROCK_SLIDE 125
END


	#assign inital values to the variables
	
		SET $ALREADY_PLAYING = 0			
		SET $WARPED_TO_HERE = 0
			
		SET $TALK_ISLAND_KEEPER = 0
		SET $TALK_GATE_KEEPER = 0
		SET $TALK_DUNGEON_GATEMASTER = 0
		SET $TALK_WOODSMAN = 0
		SET $TALK_BLACKSMITH = 0
		SET $TALK_ISLAND_KEEPER_DAUGHTER = 0
		SET $TALK_MOTHER_DUNGEON_GATEMASTER = 0
		SET $TALK_GATEKEEPER = 0
		SET $TALK_HUNGRY_MAGICIAN = 0
		SET $TALK_MAGICIAN_COUSIN = 0
		SET $TALK_DESERT_GATEMASTER = 0
		SET $TALK_BOOK_DEALER = 0
		SET $TALK_WIZARD = 0
		SET $TALK_BOOM_BETTY = 0
		
		SET $SEE_LANDSLIDE = 0
		
		SET $LAST_BOSS_DEAD = 0
			
		#OBJECTS
		SET $HAVE_CASTLE_KEY = 0
		SET $HAVE_TEDDY_BEAR = 0
		SET $HAVE_AXE = 0
		SET $HAVE_FIRE_FLOWER = 0
		SET $HAVE_FROG = 0
		SET $HAVE_CRAB_CLAW = 0
		SET $HAVE_GIANT_CLAM = 0
		SET $HAVE_DESERT_KEY = 0
		SET $HAVE_MAGIC_RING = 0
		
		SET $HAVE_STAFF_ONE = 0
		SET $HAVE_STAFF_TWO = 0
		SET $HAVE_TORCH = 0
		SET $HAVE_RED_KEY = 0
		SET $HAVE_SCEPTRE = 0
		SET $NEED_DYNAMITE = 0
		
		SET $HAVE_GOLDEN_APPLE = 0
				
		SET $NUMBER_OF_ORBS = 0
		SET $CAN_COLLECT_ORBS = 0
		SET $BOTH_STAFF_HALVES = 0
		
		#dungeons
		SET $DUNGEON_ONE_OPEN = 0
		SET $DUNGEON_TWO_OPEN = 0
		SET $DUNGEON_THREE_OPEN = 0
		SET $DUNGEON_FOUR_OPEN = 0
		SET $DUNGEON_ONE_CONQUERED = 0
		SET $DUNGEON_TWO_CONQUERED = 0
		SET $DUNGEON_THREE_CONQUERED = 0
		SET $DUNGEON_FOUR_CONQUERED = 0
		
		SET $RAISE_LANDBRIDGE = 0
		
		SET $DUNGEON_FLAG_1 = 0
		SET $DUNGEON_FLAG_2 = 0
		SET $DUNGEON_FLAG_3 = 0
		SET $DUNGEON_FLAG_4 = 0
		SET $DUNGEON_FLAG_5 = 0
		SET $DUNGEON_FLAG_6 = 0

		#gates
		SET $SWAMP_GATE = 0
		SET $FOREST_GATE = 0
		SET $FIREFLOWER_GATE = 0
		SET $TEDDYBEAR_GATE = 0
		SET $SWAMP_KEY_GATE = 0
		SET $MAP4_GATE = 0
		SET $FINISH_DUNGEON = 0
		SET $DESERT_GATE = 0
		SET $MOUNTAIN_GATE = 0
		SET $PLAINS_GATE = 0
		SET $STAFF_ONE_GATE = 0
		SET $STAFF_TWO_GATE = 0
		SET $CASTLE_GATE = 0
		SET $CASTLE_LOCKED_ROOM2 = 0
		SET $ALL_GATES_OPEN = 0
		
		#SWITCHES
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		SET $SWITCH_10 = 0
		SET $SWITCH_11 = 0
		SET $SWITCH_12 = 0
		SET $SWITCH_13 = 0
		SET $SWITCH_14 = 0
		SET $SWITCH_15 = 0
		SET $SWITCH_16 = 0
		SET $SWITCH_17 = 0
		SET $SWITCH_18 = 0
		SET $SWITCH_19 = 0
		SET $SWITCH_20 = 0
		SET $SWITCH_21 = 0
		SET $SWITCH_22 = 0
		SET $SWITCH_23 = 0
		SET $SWITCH_24 = 0
		SET $SWITCH_25 = 0
		SET $SWITCH_26 = 0
		SET $SWITCH_27 = 0
		SET $SWITCH_SPIKES = 0
			
		SET $HAVE_RED_ORB = 0
		SET $HAVE_BLUE_ORB = 0
		SET $HAVE_CYAN_ORB = 0
		SET $HAVE_MAGENTA_ORB = 0
		
		SET $LIFE_01 = 0
		SET $LIFE_02 = 0
		SET $LIFE_03 = 0
		SET $LIFE_04 = 0
		SET $LIFE_05 = 0
		SET $LIFE_06 = 0
		SET $LIFE_07 = 0
		SET $LIFE_08 = 0
		SET $LIFE_09 = 0
		SET $LIFE_10 = 0
		SET $LIFE_11 = 0
		SET $LIFE_12 = 0

		
		SET $ENEMS_KILLED = 0
		
		SET $DYNOMITE_1 = 0
		SET $DYNOMITE_2 = 0
		SET $DYNOMITE_3 = 0
		SET $DYNOMITE_4 = 0
		SET $DYNOMITE_5 = 0
		SET $DYNOMITE_6 = 0
		SET $DYNOMITE_7 = 0
		
		SET $ROCK_SLIDE = 0	

##################################
# END of Variable settings
##################################
##################################
# Level 0 ENTRY LEVEL
##################################

#GAME STARTS AT SCREEN 10 AS DEFINED IN BUILDLEVELS.BAT
		
INC_DECORATIONS decorations0.spt
#pulls in the extra tiles

ENTERING GAME	
	IF TRUE
		
		# if there are no defined WARPED_TO_HERE values set 
		# game will start at screen 10
		# the WARPED_TO_HERE variable is used for 
		# entry ways of doors and gates
		
		
		#GAME STARTS AT SCREEN 10 AS DEFINED IN BUILDLEVELS.BAT
		EXTERN 246 #TURN LIGHTS ON AT EVERY ENTRANCE
		
		#from level 1 TREE MAZE
		IF $WARPED_TO_HERE = 21
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 15, 13, 6
			BREAK
		END
		
		#from level 2 SWAMP
		IF $WARPED_TO_HERE = 4
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 0, 6, 1
			BREAK			
		END
		
		#from level 9 island keeper house
		IF $WARPED_TO_HERE = 76
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 10, 12, 7
			BREAK
		END
		
		#from level 9 child gatekeeper
		IF $WARPED_TO_HERE = 78
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 4, 6, 7
			BREAK
		END
		
		#from level 9 woodsman
		IF $WARPED_TO_HERE = 80
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 6, 7, 6
			BREAK
		END
		
		#from level 9 caveman
		IF $WARPED_TO_HERE = 82
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 1, 10, 1
			BREAK
		END
		
		#from level 9 blacksmith
		IF $WARPED_TO_HERE = 84
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 8, 7, 4
			BREAK
		END
		
		#from level 10 DUNGEON
		IF $WARPED_TO_HERE = 120
		THEN
			EXTERN 246 #LIGHTS ON
			
			#reset the switches found in the dungeon
			SET $SWITCH_1 = 0
			SET $SWITCH_2 = 0
			SET $SWITCH_3 = 0
			SET $SWITCH_4 = 0
			SET $SWITCH_5 = 0
			SET $SWITCH_6 = 0
			SET $SWITCH_7 = 0
			SET $SWITCH_8 = 0
			SET $SWITCH_9 = 0
			SET $SWITCH_10 = 0
			SET $SWITCH_11 = 0
			SET $SWITCH_13 = 0
		
			SET $WARPED_TO_HERE = 0
			WARP_TO 3, 9, 3
			BREAK
		END
	END
END

ENTERING ANY
	IF TRUE		
		
	END
END

# upper left gateway swamp
ENTERING SCREEN 0	
	IF TRUE
	THEN
		SET_FIRE_ZONE 81, 0, 111, 15
		#this fire zone is for a jump to level 3
		
		#cheater to keep gate open
		#TEMP/ COMMENT REMOVE FOR REAL PLAY
		#SET $SWAMP_GATE = 1
		
		#CLOSED GATE
		IF $SWAMP_GATE = 0
		THEN
			SET TILE (6, 1) = 20
			#tile 20 is a gate
		END
		
		#OPEN GATE
		IF $SWAMP_GATE = 1
		THEN
			SET TILE (6, 1) = 0
			#tile 0 is open grass
		END
		
	END
END

PRESS_FIRE AT SCREEN 0
	#gateway to level 3
	IF PLAYER_IN_X 81, 111
    IF PLAYER_IN_Y 0, 15
    THEN
		#if you enter the area defined by the 
		#PLAYER_IN_X and PLAYER_IN_Y
		#warp to level 3
		SET $WARPED_TO_HERE = 24
		WARP_TO_LEVEL 3, 16, 3, 3, 1
    END
END

# cave screen
#house door of swamp gatekeeper
ENTERING SCREEN 1	
	IF TRUE
	THEN
		SET_FIRE_ZONE 145, 0, 175, 15
		#this fire zone is for a jump to level 9 
		#in house level to swamp gatekeeper
	END
END

PRESS_FIRE AT SCREEN 1
	#sign
	IF PLAYER_TOUCHES 7, 1
	THEN
		EXTERN 1#gatekeeper
		REDRAW
	END	
	
	#Door to house swamp gatekeeper
	#jump to level 9
	IF PLAYER_IN_X 145, 175
    IF PLAYER_IN_Y 0, 15
    THEN
		SET $WARPED_TO_HERE = 81
		WARP_TO_LEVEL 9, 3, 7, 8, 1
    END
END


# dungeon entrance
ENTERING SCREEN 3	
	IF TRUE
	THEN
		#entrance to dungeon
		SET_FIRE_ZONE 137, 9, 151, 28
		EXTERN 246 #TURN LIGHTS ON AT EVERY ENTRANCE

		#cheater to let you in the dungeon
		#TEMP / COMMENT FOR REAL PLAY
		#SET $DUNGEON_ONE_OPEN = 1
		
		IF $DUNGEON_ONE_OPEN = 0
		THEN
			SET TILE (9,2) = 20
			#tile 20 is a gate
		END
		IF $DUNGEON_ONE_OPEN = 1
		THEN
			SET TILE (9,2) = 7
			#tile 7 is an entrance
		END		
	END
END

PRESS_FIRE AT SCREEN 3
	#to dungeon 1, MAP 10
	IF PLAYER_IN_X 137, 151
    IF PLAYER_IN_Y 9, 28
    THEN
		SET $WARPED_TO_HERE = 150
		WARP_TO_LEVEL 10, 1, 7, 7, 1
		#jump to the dungeon once you enter the fire zone
    END	
	
	IF PLAYER_TOUCHES 8, 3
	THEN
		EXTERN 59
		#SIGN CANNOT ENTER DUNGEON WITHOUT TORCH
		REDRAW
	END
END

# YARD of child gatekeeper, uses XYZZY to open gate, missing teddybear
ENTERING SCREEN 4	
	IF TRUE
	THEN
		#DOOR AT 6,6
		SET_FIRE_ZONE 89, 89, 103, 103
		#fire zone to enter the house of the dungeon gatemaster
	END
END

PRESS_FIRE AT SCREEN 4
	#Door to house child gatekeeper
	IF PLAYER_IN_X 89, 103
    IF PLAYER_IN_Y 89, 103
    THEN
		SET $WARPED_TO_HERE = 77
		WARP_TO_LEVEL 9, 1, 7, 7, 1
    END
	
	IF PLAYER_TOUCHES 8, 6
	THEN
		EXTERN 3
		#SIGN dungeon gatemaster
		REDRAW
	END	
END

#TEDDY bear
ENTERING SCREEN 5
	IF TRUE
	THEN
		
		#trees in the way for the teddybear
		IF $TEDDYBEAR_GATE = 0
		THEN
			SET TILE (5, 3) = 9
			SET TILE (6, 3) = 10
			SET TILE (5, 4) = 11
			SET TILE (6, 4) = 12
		END
		
		#trees out of the way to get the teddybear
		IF $TEDDYBEAR_GATE = 1
		THEN
			SET TILE (5, 3) = 0
			SET TILE (6, 3) = 0
			SET TILE (5, 4) = 0
			SET TILE (6, 4) = 0
		END
		
		#if you have not collected the teddybear will show the bear
		IF $HAVE_TEDDY_BEAR = 0
		THEN
			SET TILE (7,5) = 30
		END
		#if you have already collected the teddybear, shows nothing
		IF $HAVE_TEDDY_BEAR = 1
		THEN
			SET TILE (7,5) = 0
		END
	
	END
END

PRESS_FIRE AT SCREEN 5

	IF PLAYER_TOUCHES 7, 5
	IF $HAVE_TEDDY_BEAR = 0
	THEN
		EXTERN 34
		#text you now have the teddy
		SET TILE (7, 5) = 0
		SET $HAVE_TEDDY_BEAR = 1
		SET $TALK_DUNGEON_GATEMASTER = 1
		PRINT_TILE_AT (0, 22) = 30
		#shows TEDDY BEAR in bottom inventory
		REDRAW
	END	
END


# house of woodsman, needs axe to cut down trees
ENTERING SCREEN 6
	IF TRUE
	THEN
		SET_FIRE_ZONE 105, 73, 119, 87
		#DOOR AT 7 5
	END
END

PRESS_FIRE AT SCREEN 6
	#SIGN
	IF PLAYER_TOUCHES 5, 5
	THEN
		EXTERN 4
		#woodsman text
		REDRAW
	END
	
	#door TO WOODSMAN 7 5
	IF PLAYER_IN_X 105, 119
    IF PLAYER_IN_Y 73, 87
    THEN
		SET $WARPED_TO_HERE = 79
		WARP_TO_LEVEL 9, 2, 7, 7, 1
    END	
END


#BLACKSMITH
ENTERING SCREEN 8
	IF TRUE
	THEN
		SET_FIRE_ZONE 105, 41, 119, 55
	END
END

PRESS_FIRE AT SCREEN 8
	IF PLAYER_IN_X 105, 119
    IF PLAYER_IN_Y 41, 55
	THEN
		SET $WARPED_TO_HERE = 83
		WARP_TO_LEVEL 9, 4, 7, 8, 1
	END
	
	#sign
	IF PLAYER_TOUCHES 5, 3
	THEN
		EXTERN 6
		#TEXT blacksmith
		REDRAW
	END
END

# STATUE
ENTERING SCREEN 9
	IF TRUE
	THEN
		#NEED FLAG TO CHECK IF APPLE IS RETURNED TO 11    4
		#FIRE ZONE 169 57 183 71
		
		#TEMP TESTING
		#for a quick end to the game
		#SET $HAVE_GOLDEN_APPLE = 1
	END
END

PRESS_FIRE AT SCREEN 9
	#statue sign
	IF PLAYER_TOUCHES 8, 5
	THEN
		EXTERN 5
		#statue of protection text
		REDRAW
	END
	
	IF PLAYER_TOUCHES 11, 4
	IF $HAVE_GOLDEN_APPLE = 1
	THEN
		EXTERN 74
		REDRAW
		GAME_ENDING
		#ta da the game has been completed
	END	
END

#ISLAND KEEPER
ENTERING SCREEN 10
	IF TRUE
	THEN		
		SET_FIRE_ZONE 185, 89, 199, 103
		
		EXTERN 246 
		#TURN LIGHTS ON
		
		#TEMP TO GET OUT OF GATE
		#just in case you are feeling trapped
		#SET $TALK_ISLAND_KEEPER = 1
		
		# IF YOU HAVENT TALKED TO THE ISLAND KEEPER 
		# YOU CANNOT ESCAPE THE GATE
		IF $TALK_ISLAND_KEEPER = 0
		THEN
			SET TILE (6,8) = 3
		END
		
		# YOU HAVE TALKED TO THE ISLAND KEEPER 
		# NOW YOU CAN EXPLORE
		IF $TALK_ISLAND_KEEPER = 1
		THEN
			SET TILE (6,8) = 0
		END
		
	END
END

#ISLAND KEEPER
PRESS_FIRE AT SCREEN 10
	#door TO ISLAND KEEPER
	IF PLAYER_IN_X 185, 199
    IF PLAYER_IN_Y 89, 103
    THEN
		SET $WARPED_TO_HERE = 75
		WARP_TO_LEVEL 9, 1, 7, 8, 1
    END
	
	#sign
	IF PLAYER_TOUCHES 10, 6
	THEN
		EXTERN 7
		#TEXT island keeper
		REDRAW
	END
	
	#TEMP warping MUSHROOM used to jump to places
	IF PLAYER_TOUCHES 8, 5
	THEN
		#SET $HAVE_TORCH = 1
		SET $WARPED_TO_HERE = 98
		
		#	WARP_TO_LEVEL 1, 13, 7, 8, 1
		#	WARP_TO_LEVEL 2, 3, 6, 3, 1
		#	WARP_TO_LEVEL 2, 15, 1, 8, 1
		#	WARP_TO_LEVEL 3, 13, 7, 8, 1
		#	WARP_TO_LEVEL 4, 13, 7, 8, 1
		#	WARP_TO_LEVEL 5, 13, 7, 8, 1
		#	WARP_TO_LEVEL 6, 13, 7, 8, 1
		#	WARP_TO_LEVEL 7, 11, 7, 8, 1
		#	WARP_TO_LEVEL 8, 11, 6, 7, 1
		#	WARP_TO_LEVEL 9, 12, 7, 8, 1
		#temp
		#	SET $HAVE_TORCH = 1
		#	WARP_TO_LEVEL 10, 7, 11, 4, 1		
		
		#  WARP_TO_LEVEL 11, 3, 7, 8, 1		
		#	WARP_TO_LEVEL 12, 1, 2, 1, 1
		#	WARP_TO_LEVEL 12, 4, 2, 1, 1
	END
END

	
ENTERING SCREEN 12
	IF TRUE
	THEN
	
		#RECHARGE HAS NOT BEEN USED show heart
		IF $LIFE_01 = 0
		THEN
			SET TILE (2,7) = 16
		END
		#RECHARGE HAS BEEN USED heart disappears
		IF $LIFE_01 = 1
		THEN
			SET TILE (2,7) = 0
		END
		
	END	
END

PRESS_FIRE AT SCREEN 12
	IF PLAYER_TOUCHES 2, 7
	IF $LIFE_01 = 0
	THEN
		EXTERN 2 
		#TEXT YOU HAVE RECHARGED YOUR LIFE
		RECHARGE 
		#RECHARGE YOUR LIFE FULLY
		SET $LIFE_01 = 1 
		#SHOW THAT RECHARGE HAS ALREADY BEEN USED
		REDRAW 
		#CLEARS THE TEXT
		REHASH 
		#FORCE ENTERING SCREEN AND REPLACE SPIKES
	END	
END

#gate to another level (woods for Axeman)
#need to talk to axeman first
ENTERING SCREEN 15
	IF TRUE
	THEN		
		
		#GATE AT 14 6
		SET_FIRE_ZONE 209, 89, 231, 103
		
		#TEMP TO ACCESS LEVEL 1
		#cheater to open the gate
		#SET $FOREST_GATE = 1
		
		#GATE CLOSED
		IF $FOREST_GATE = 0
		THEN
			SET TILE (13, 6) = 20
		END
		#gate open
		IF $FOREST_GATE = 1
		THEN
			SET TILE (13, 6) = 1
		END		
	END
END

PRESS_FIRE AT SCREEN 15
	#entry to level 1	
	IF PLAYER_IN_X 209, 231
    IF PLAYER_IN_Y 89, 103
    THEN
		SET $WARPED_TO_HERE = 1
		WARP_TO_LEVEL 1, 12, 1, 6, 1
    END	
END


END_OF_LEVEL


##################################
# Level 1	TREE MAZE
##################################

INC_DECORATIONS decorations1.spt

ENTERING GAME
	IF TRUE
		#testing cheater warp
		IF $WARPED_TO_HERE = 98
		THEN
			SET $WARPED_TO_HERE = 0
			#WARP_TO 12, 1, 6
			#WARP_TO 0, 1, 6
			BREAK
		END
	
		#from level 0
		IF $WARPED_TO_HERE = 1
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 12, 1, 6
			BREAK
		END
		
		#from level 2
		IF $WARPED_TO_HERE = 22
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 15, 13, 7
			BREAK			
		END

	END
END

ENTERING SCREEN 0
	IF TRUE
	THEN
		#if you have not collected the torch before
		#tile 28 is the torch
		IF $HAVE_TORCH = 0
		THEN
			SET TILE (4, 8) = 28
		END
		#if you have already collected the torch shows grass
		IF $HAVE_TORCH = 1
		THEN
			SET TILE (4, 8) = 0
		END
		
		#LIFE RECHARGE HAS NOT BEEN USED
		IF $LIFE_02 = 0
		THEN
			SET TILE (13,1) = 16
		END
		
		#LIFE RECHARGE HAS BEEN USED
		IF $LIFE_02 = 1
		THEN
			SET TILE (13,1) = 0
		END	
		
	END
END

PRESS_FIRE AT SCREEN 0

	IF PLAYER_TOUCHES 4, 8
	IF $HAVE_TORCH = 0
	THEN
		EXTERN 60
		# found the TORCH
		SET TILE (4, 8) = 0
		SET $HAVE_TORCH = 1
		#now you have a TORCH
		PRINT_TILE_AT (29, 22) = 28
		#shows TORCH in bottom
		REDRAW
	END
	
	IF PLAYER_TOUCHES 13, 1
	IF $LIFE_02 = 0
	THEN
		EXTERN 2 
		#TEXT YOU HAVE RECHARGED YOUR LIFE
		RECHARGE 
		#RECHARGE YOUR LIFE
		SET $LIFE_02 = 1
		#SHOW THAT RECHARGE HAS ALREADY BEEN USED
		REDRAW 
		#CLEARS THE TEXT
		REHASH 
		#FORCE ENTERING SCREEN
	END	
	
END



ENTERING SCREEN 1
	IF TRUE
	THEN
		#if you have not collected the axe yet
		#tile 30 is the axe
		IF $HAVE_AXE = 0
		THEN
			SET TILE (11, 4) = 30
		END
		
		#if you have already collected the axe
		IF $HAVE_AXE = 1
		THEN
			SET TILE (11, 4) = 0
		END

	END
END

PRESS_FIRE AT SCREEN 1
	IF PLAYER_TOUCHES 11, 4
	IF $HAVE_AXE = 0
	THEN
		EXTERN 32
		# found the axe
		SET TILE (11, 4) = 0
		SET $HAVE_AXE = 1
		#now you have an axe
		SET $TALK_WOODSMAN = 2
		#now talk about rusty axe
		PRINT_TILE_AT (0, 22) = 30
		#shows axe in bottom
		REDRAW
	END	
END


ENTERING SCREEN 5
	IF TRUE
	THEN		
		#you havent been asked to collect orbs yet
		IF $CAN_COLLECT_ORBS = 0
		THEN
			SET TILE (13,5) = 13
			#CLOSED WALL
		END
		
		#OPEN WALL SO YOU CAN GET ORB
		IF $CAN_COLLECT_ORBS = 1
		THEN
			SET TILE (13,5) = 0
			#opened wall
		END
		
		IF $HAVE_BLUE_ORB = 0
		THEN
			SET TILE (11, 6) = 17
			#shows orb
		END
		
		IF $HAVE_BLUE_ORB = 1
		THEN
			SET TILE (11, 6) = 0
			#shows grass
		END
	END
END


PRESS_FIRE AT SCREEN 5
	#ORB
	IF PLAYER_TOUCHES 11,6
	IF $HAVE_BLUE_ORB = 0
	THEN
		EXTERN 46
		#YOU FOUND A ORB
		SET TILE (11, 6) = 0
		#remove from screen
		SET $HAVE_BLUE_ORB = 1
		#set flag showing you have orb
		INC $NUMBER_OF_ORBS , 1
		#increase the number of orbs
		PRINT_TILE_AT (12, 22) = 17
		#shows ORB in bottom
		REDRAW 
		# refresh the screen
	END
END


ENTERING SCREEN 6
	IF TRUE
	THEN
		#gate opens once you have talked to the blacksmith
		IF $FIREFLOWER_GATE = 0
		THEN
			SET TILE (6, 3) = 13
		END
		IF $FIREFLOWER_GATE = 1
		THEN
			SET TILE (6, 3) = 1
		END
		
		#if you have not collected the fireflower
		IF $HAVE_FIRE_FLOWER = 0
		THEN
			SET TILE (6,2) = 27
		END
		#already have collected the fireflower
		IF $HAVE_FIRE_FLOWER = 1
		THEN
			SET TILE (1,4) = 0
		END
		
		#HAVENT TALKED TO BOOM BETTY SO NO DYNOMITE SHOWN
		IF $TALK_BOOM_BETTY < 2
		THEN
			SET TILE (1, 4) = 0
		END
		
		#TALKED TO BOOM BETTY AND HAVE NOT COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_7 = 0
		THEN
			SET TILE (1, 4) = 38
		END
		
		#TALKED TO BOOM BETTY AND HAVE COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_7 = 1
		THEN
			SET TILE (1, 4) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 6
	IF PLAYER_TOUCHES 6, 2
	IF $HAVE_FIRE_FLOWER = 0
	THEN
		EXTERN 33
		#found fireflower
		SET TILE (6, 2) = 0
		SET $HAVE_FIRE_FLOWER = 1
		SET $TALK_BLACKSMITH = 2
		PRINT_TILE_AT (2, 22) = 27
		#shows FLOWER in bottom
		REDRAW
	END	
	
	IF $TALK_BOOM_BETTY = 2
	IF PLAYER_TOUCHES 1,4
	IF $DYNOMITE_7 = 0
	THEN
		EXTERN 70
		#text YOU FOUND DYNOMITE
		SET TILE (1, 4) = 0
		#remove DYNOMITE from screen
		SET $DYNOMITE_7 = 1
		#set flag showing you have DYNOMITE
		INC $NEED_DYNAMITE , 1
		#increase the number of orbs
		PRINT_TILE_AT (14, 22) = 38
		#shows DYNOMITE in bottom
		REDRAW 
		# refresh the screen
	END
	
END


ENTERING SCREEN 12
	IF TRUE
	THEN	
		SET_FIRE_ZONE 0, 81, 15, 111	
	END
END

PRESS_FIRE AT SCREEN 12
	#GATE AT 0,6
	IF PLAYER_IN_X 0, 15
    IF PLAYER_IN_Y 81, 111
    THEN
		SET $WARPED_TO_HERE = 21
		WARP_TO_LEVEL 0, 19, 13, 6, 1
    END
END


ENTERING SCREEN 15
	IF TRUE
	THEN
		SET_FIRE_ZONE 210, 97, 239, 127
		
		IF $DESERT_GATE = 0
		THEN
			SET TILE (13,7) = 20
			#GATE
		END
		
		IF $DESERT_GATE = 1
		THEN
			SET TILE (13,7) = 1
			#SAND
		END
	END
END

PRESS_FIRE AT SCREEN 15
	#gateway to level 2
	IF PLAYER_IN_X 210, 239
    IF PLAYER_IN_Y 97, 127
    THEN
		SET $WARPED_TO_HERE = 22
		WARP_TO_LEVEL 2, 12, 1, 7, 1
    END	
	
	IF PLAYER_TOUCHES 13, 5
	IF $HAVE_DESERT_KEY = 1
	THEN
		SET TILE (13, 7) = 1
		SET $HAVE_DESERT_KEY = 1
		SET $DESERT_GATE = 1
		EXTERN 28
		#the gate is now open
		PRINT_TILE_AT (27, 22) = 47
		REDRAW
	END	
END


END_OF_LEVEL


##################################
# Level 2	BEACH WITH SECRET AREA
##################################

INC_DECORATIONS decorations2.spt

ENTERING GAME
	IF TRUE	
	
		SET $SWITCH_8 = 0#FINAL BOSS GATE
		
		#from level 1
		IF $WARPED_TO_HERE = 22 
		THEN		
			#RESET FLAGS ON ENTERING LEVEL
			
			SET $SWITCH_1 = 0
			SET $SWITCH_2 = 0
			SET $SWITCH_3 = 0
			SET $SWITCH_4 = 0
			SET $SWITCH_5 = 0
			SET $SWITCH_6 = 0
			SET $SWITCH_7 = 0
		
			SET $WARPED_TO_HERE = 0
			WARP_TO 12, 1, 7
			BREAK
		END
		
		#from level 5
		IF $WARPED_TO_HERE = 12 
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 1, 13, 1
			BREAK
		END
		
		#from DESERT GATEMASTER
		IF $WARPED_TO_HERE = 90 
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 5, 9, 5
			BREAK
		END	
		
		#from dungeon 2
		IF $WARPED_TO_HERE = 165 
		THEN
			SET $SWITCH_6 = 1 
			#this ensures you can get out to screen 6
			
			#RESET FLAGS ON ENTERING LEVEL
			SET $SWITCH_1 = 0
			SET $SWITCH_2 = 0
			SET $SWITCH_3 = 0
			SET $SWITCH_4 = 0
			SET $SWITCH_5 = 0
			SET $SWITCH_7 = 0
			SET $SWITCH_8 = 0
		
			SET $WARPED_TO_HERE = 0
			WARP_TO 6, 9, 4
			BREAK
		END
		
		IF $WARPED_TO_HERE = 99 #warp from final boss screen
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 3,1,8
			BREAK
		END
		
		IF $WARPED_TO_HERE = 98 #TEMP WARP
		THEN
			SET $WARPED_TO_HERE = 0
			# WARP_TO 12, 6, 3
			# WARP_TO 2, 6, 6
			# WARP_TO 15, 1, 8			
			BREAK
		END
	END
END

ENTERING SCREEN 0
	IF TRUE
	THEN
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		
		IF $SWITCH_1 = 0
		THEN
			SET TILE (8,3) = 3
		END
		IF $SWITCH_1 = 1
		THEN
			SET TILE (8,3) = 0
		END
		
		IF $SWITCH_2 = 0
		THEN
			SET TILE (1,3) = 28
		END
		
		IF $SWITCH_2 = 1
		THEN
			SET TILE (1,3) = 27
		END
		
		IF $SWITCH_7 = 0
		THEN
			SET TILE (2,3) = 3
		END
		
		IF $SWITCH_7 = 1
		THEN
			SET TILE (2,3) = 0
		END
		
		#HAVENT TALKED TO BOOM BETTY SO NO DYNOMITE SHOWN
		IF $TALK_BOOM_BETTY < 2
		THEN
			SET TILE (13, 1) = 0
		END
		
		#TALKED TO BOOM BETTY AND HAVE NOT COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_6 = 0
		THEN
			SET TILE (13, 1) = 30
		END
		
		#TALKED TO BOOM BETTY AND HAVE COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_6 = 1
		THEN
			SET TILE (13, 1) = 0
		END
	
	END
END

PRESS_FIRE AT SCREEN 0

	IF PLAYER_TOUCHES 1,3
	IF $SWITCH_2 = 0
	THEN
		SET TILE (1,3) = 27
		#UP
		SET $SWITCH_2 = 1
		REENTER
	END
	
	#if a pushable tile is in 1,1 unlock gate
	IF $MOVED_X_FLAG = 1
	IF $MOVED_Y_FLAG = 1
	THEN
		SET $SWITCH_7 = 1
		REENTER
	END
	
	#DYNOMITE  NOT OK NEED TO CHECK
	IF $TALK_BOOM_BETTY = 2
	IF PLAYER_TOUCHES 13,1
	IF $DYNOMITE_6 = 0
	THEN
		EXTERN 70
		#text YOU FOUND DYNOMITE
		SET TILE (13, 1) = 0
		#remove DYNOMITE from screen
		SET $DYNOMITE_6 = 1
		#set flag showing you have DYNOMITE
		INC $NEED_DYNAMITE , 1
		#increase the number of DYNOMITE
		PRINT_TILE_AT (12, 22) = 30
		#shows DYNOMITE in bottom
		REDRAW 
		# refresh the screen
	END
	
END

ENTERING SCREEN 1
	IF TRUE
	THEN
	
		SET_FIRE_ZONE 193, 0, 223, 15
		
		# TEMP, comment for real play
		# SET $DESERT_GATE = 1
		
		IF $PLAINS_GATE = 0
		THEN
			SET TILE (13,1) = 20
		END
		
		IF $PLAINS_GATE = 1
		THEN
			SET TILE (13,1) = 0
		END
		
		
	END
END

PRESS_FIRE AT SCREEN 1
	#gateway to level 5
	IF PLAYER_IN_X 193, 223
    IF PLAYER_IN_Y 0, 15
    THEN
		SET $WARPED_TO_HERE = 11
		WARP_TO_LEVEL 5, 13, 13, 8, 1
    END	
END

ENTERING SCREEN 2
	IF TRUE
	THEN
		SET_FIRE_ZONE 0, 25, 15, 39
	END
END

PRESS_FIRE AT SCREEN 2
	
	IF PLAYER_IN_X 0, 15
    IF PLAYER_IN_Y 25, 39
    THEN
		SET $WARPED_TO_HERE = 99
		WARP_TO_LEVEL 9, 12, 13, 8, 1
    END	
END

ENTERING SCREEN 3
	IF TRUE
	THEN
	
		#LIFE RECHARGE HAS NOT BEEN USED
		IF $LIFE_10 = 0
		THEN
			SET TILE (1,1) = 16
		END
		#LIFE RECHARGE HAS BEEN USED
		IF $LIFE_10 = 1
		THEN
			SET TILE (1,1) = 0
		END
		
		IF $HAVE_GOLDEN_APPLE = 1
		THEN
			SET TILE (0,8) = 6
		END
		
	END	
END

PRESS_FIRE AT SCREEN 3
	IF PLAYER_TOUCHES 1, 1
	IF $LIFE_10 = 0
	THEN
		EXTERN 2 
		#TEXT YOU HAVE RECHARGED YOUR LIFE
		RECHARGE 
		#RECHARGE YOUR LIFE
		SET $LIFE_10 = 1
		#SHOW THAT RECHARGE HAS ALREADY BEEN USED
		REDRAW 
		#CLEARS THE TEXT
		REHASH 
		#FORCE ENTERING SCREEN AND REPLACE SPIKES
	END	
END


ENTERING SCREEN 4
	IF TRUE
	THEN
		
		# we use these flags to prevent 
		# you from blocking yourself in
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0		
		
		IF $SWITCH_3 = 0
		THEN
			SET TILE (13,1) = 3
		END
		IF $SWITCH_3 = 1
		THEN
			SET TILE (13,1) = 0
		END
		
		IF $SWITCH_4 = 0
		THEN
			SET TILE (1,5) = 28
		END
		
		IF $SWITCH_4 = 1
		THEN
			SET TILE (1,5) = 27
		END
		
	
		IF $HAVE_CRAB_CLAW = 0
		THEN
			SET TILE (11, 4) = 38
		END
		IF $HAVE_CRAB_CLAW = 1
		THEN
			SET TILE (11, 4) = 0			
		END
		
	END
END

PRESS_FIRE AT SCREEN 4

	IF PLAYER_TOUCHES 11, 4
	IF $HAVE_CRAB_CLAW = 0
	THEN
		EXTERN 36
		# YOU FOUND THE GIANT CRABCLAW
		SET TILE (11, 4) = 0
		SET $HAVE_CRAB_CLAW = 1
		#now you have an CRABCLAW
		PRINT_TILE_AT (2, 22) = 38
		#shows CRABCLAW in bottom
		SET $TALK_HUNGRY_MAGICIAN = 1
		REDRAW
	END
	
	IF PLAYER_TOUCHES 1,5
	THEN
		SET TILE (1,5) = 27
		SET $SWITCH_4 = 1
		EXTERN 71
		#YOU FEEL AN EARTHQUAKE TO THE SOUTH
		REDRAW
	END	
	
	#if a pushable tile is in 4,9 reenter screen
	#to prevent you from blocking yourself in
	IF $MOVED_X_FLAG = 13
	IF $MOVED_Y_FLAG = 1
	THEN
		REENTER
	END
END

#DESERT GATEMASTER HOUSE
ENTERING SCREEN 5
	IF TRUE
	THEN
		SET_FIRE_ZONE 129, 49, 159, 79
		
		#LIFE RECHARGE HAS NOT BEEN USED
		IF $LIFE_03 = 0
		THEN
			SET TILE (13,7) = 16
		END
		#LIFE RECHARGE HAS BEEN USED
		IF $LIFE_03 = 1
		THEN
			SET TILE (13,7) = 0
		END	
		
	END
END

PRESS_FIRE AT SCREEN 5

	IF PLAYER_IN_X 129, 159
    IF PLAYER_IN_Y 49, 79
    THEN
		SET $WARPED_TO_HERE = 89
		WARP_TO_LEVEL 9, 7, 7, 8, 1
    END
	
	IF PLAYER_TOUCHES 7, 4
	THEN
		EXTERN 40
		#DESERT GATEMASTER
		REDRAW
	END
	
	IF PLAYER_TOUCHES 13, 7
	IF $LIFE_03 = 0
	THEN
		EXTERN 2 
		# TEXT YOU HAVE RECHARGED YOUR LIFE
		RECHARGE 
		# RECHARGE YOUR LIFE
		SET $LIFE_03 = 1 
		# SHOW THAT RECHARGE HAS ALREADY BEEN USED
		REDRAW 
		#CLEARS THE TEXT
		REHASH 
		#FORCE ENTERING SCREEN AND REPLACE SPIKES
	END	
	
END

#ENTRANCE TO DUNGEON
ENTERING SCREEN 6
	IF TRUE
	THEN
		SET_FIRE_ZONE 129, 17, 159, 47
		#ENTRANCE TO DUNGEON
		
		EXTERN 246
		#turn lights on
		
		# TEMP TO OPEN DUNGEON comment for real play
		# SET $DUNGEON_TWO_OPEN = 1
		
		# we use these flags to prevent 
		# you from blocking yourself in
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		
		IF $SWITCH_1 = 0
		THEN
			SET TILE (1,1) = 28
		END
		
		IF $SWITCH_1 = 1
		THEN
			SET TILE (1,1) = 27
		END
		
		IF $DUNGEON_TWO_CONQUERED = 1
		THEN
			SET $DUNGEON_TWO_OPEN = 0
			SET $SWITCH_6 = 1 #MAKE SURE GATE IS OPEN
		END
		
		IF $DUNGEON_TWO_OPEN = 0
		THEN
			SET TILE (9,3) = 20
		END
		
		IF $DUNGEON_TWO_OPEN = 1
		THEN
			SET TILE (9,3) = 0
		END		
	END
END

PRESS_FIRE AT SCREEN 6
	#WARP TO DUNGEON
	IF PLAYER_IN_X 129, 159
    IF PLAYER_IN_Y 17, 47
    THEN
		SET $WARPED_TO_HERE = 160
		WARP_TO_LEVEL 11, 15, 7, 8, 1
    END	
	
	IF PLAYER_TOUCHES 1,1
	#IF $SWITCH_1 = 0
	THEN
		SET TILE (1,1) = 27
		#UP
		SET $SWITCH_1 = 1
	END	
	
	#if a pushable tile is in 4,9 reenter screen
	#we use this to prevent you from blocking yourself in
	IF $MOVED_X_FLAG = 4
	IF $MOVED_Y_FLAG = 9
	THEN
		REENTER
	END
END


ENTERING SCREEN 8
	IF TRUE
	THEN
		# we use these flags to prevent 
		# you from blocking yourself in
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0		
		
		IF $SWITCH_2 = 0
		THEN
			SET TILE (8,1) = 3
		END
		IF $SWITCH_2 = 1
		THEN
			SET TILE (8,1) = 0
		END
		
		IF $SWITCH_3 = 0
		THEN
			SET TILE (1,5) = 28
		END
		
		IF $SWITCH_3 = 1
		THEN
			SET TILE (1,5) = 27
		END		
	END
END

PRESS_FIRE AT SCREEN 8
	IF PLAYER_TOUCHES 1,5
	IF $SWITCH_3 = 0
	THEN
		SET TILE (1,5) = 27#UP
		SET $SWITCH_3 = 1
	END
		
	#if a pushable tile is in 4,9 reenter screen
	#we use this to prevent you from blocking yourself in
	IF $MOVED_X_FLAG = 8
	IF $MOVED_Y_FLAG = 1
	THEN
		REENTER
	END
END


ENTERING SCREEN 10
	IF TRUE
	THEN		
		
		#DOWN
		#toggle switches
		IF $SWITCH_6 = 0
		THEN
			SET TILE (1,1) = 28
			SET TILE (4,0) = 13
		END
		
		#toggle switches
		#UP
		IF $SWITCH_6 = 1
		THEN
			SET TILE (1,1) = 27
			SET TILE (4,0) = 0			
		END
		
	END
END

PRESS_FIRE AT SCREEN 10
	
	#toggle switches
	IF PLAYER_TOUCHES 1,1
	THEN
		FLIPFLOP $SWITCH_6
	END
	
	###########
	#DRAW SWITCH POSITION
	###########
	IF PLAYER_TOUCHES 1,1
	IF $SWITCH_6 = 0
	THEN
		#MOVE SWITCH
		SET TILE (1, 1) = 28
		SET TILE (4,0) = 13
	END	
	
	IF PLAYER_TOUCHES 1,1
	IF $SWITCH_6 = 1
	THEN
		#MOVE SWITCH
		SET TILE (1, 1) = 27
		SET TILE (4,0) = 0
	END	
	
END


#entryway to level
ENTERING SCREEN 12
	IF TRUE
	THEN
		#warp to level 1
		SET_FIRE_ZONE 0, 97, 15, 127
	END
END

PRESS_FIRE AT SCREEN 12
	#to level 1
	IF PLAYER_IN_X 0, 15
    IF PLAYER_IN_Y 97, 127
    THEN
		SET $WARPED_TO_HERE = 22
		WARP_TO_LEVEL 1, 19, 13, 6, 1
    END
	
END


ENTERING SCREEN 14
	IF TRUE
	THEN
		# TEMP VARIABLE, COMMENT FOR REAL PLAY
		# SET $RAISE_LANDBRIDGE = 1		
		
		IF $HAVE_GIANT_CLAM = 0
		THEN
			SET TILE (11, 7) = 31
		END
		IF $HAVE_GIANT_CLAM = 1
		THEN
			SET TILE (11, 7) = 0			
		END
		
		IF $SWITCH_4 = 1
		THEN
			SET TILE (12,7) = 0
		END
		
		IF $RAISE_LANDBRIDGE = 0
		THEN
			#WATER
			SET TILE (14, 8) = 6
		END	
		
		IF $RAISE_LANDBRIDGE = 1
		THEN
			#ADD SOME MORE LAND
			SET TILE (14, 8) = 1
		END
	END
END

PRESS_FIRE AT SCREEN 14

	IF PLAYER_TOUCHES 11, 7
	IF $HAVE_GIANT_CLAM = 0
	THEN
		EXTERN 37
		# YOU FOUND THE GIANT CLAM
		SET TILE (11, 7) = 0
		SET $HAVE_GIANT_CLAM = 1
		#now you have an CLAM
		PRINT_TILE_AT (4, 22) = 31
		#shows CLAM in bottom
		SET $TALK_HUNGRY_MAGICIAN = 1
		REDRAW
	END
END

ENTERING SCREEN 15
	IF TRUE
	THEN
		#1,8
		SET_FIRE_ZONE 9, 121, 23, 135
		
		IF $RAISE_LANDBRIDGE = 0
		THEN
			#WATER
			SET TILE (0, 8) = 6
		END	
		IF $RAISE_LANDBRIDGE = 1
		THEN
			#ADD SOME MORE LAND
			SET TILE (0, 8) = 1
		END		
	END
END

PRESS_FIRE AT SCREEN 15

	#once you have entered the screen you are
	#now commeted to get to the golden apple
	#by blocking you in
	
	IF PLAYER_TOUCHES 1, 8
	IF $HAVE_GOLDEN_APPLE = 0
	THEN
		SET $RAISE_LANDBRIDGE = 0
		SET TILE (0,8) = 6
	END	
	
	#now that you have the golden apple you can now exit the area
	IF PLAYER_TOUCHES 1, 8
	IF $HAVE_GOLDEN_APPLE = 1
	THEN
		SET $RAISE_LANDBRIDGE = 1
		#SET TILE (0,8) = 6
	END	
END

END_OF_LEVEL 
#end level 2

##################################
# Level 3 SWAMP
##################################

INC_DECORATIONS decorations3.spt

ENTERING GAME
	IF TRUE
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		
		# extern 244 turns off the ability 
		# of enemies walking through walls
		#from level 0
		IF $WARPED_TO_HERE = 24
		THEN
			EXTERN 244 
			#ENEMIES CANNOT WALK THRU WALLS
			SET $SWITCH_6 = 0
			SET $SWITCH_7 = 0
			SET $SWITCH_8 = 0
			SET $SWITCH_9 = 0
		
		
			SET $WARPED_TO_HERE = 0
			WARP_TO 12, 6, 8
			BREAK			
		END
		
		IF $WARPED_TO_HERE = 30
		THEN
			EXTERN 244
			#ENEMIES CANNOT WALK THRU WALLS
			SET $WARPED_TO_HERE = 0
			WARP_TO 3, 1, 1
			BREAK			
		END

		#from level 4
		IF $WARPED_TO_HERE = 8
		THEN
			EXTERN 244
			#ENEMIES CANNOT WALK THRU WALLS
			
			SET $WARPED_TO_HERE = 0
			WARP_TO 15, 13, 3
			BREAK			
		END
		#from level ?
		IF $WARPED_TO_HERE = 13
		THEN
			EXTERN 244
			#ENEMIES CANNOT WALK THRU WALLS
			
			SET $WARPED_TO_HERE = 0
			WARP_TO 2, 3, 1
			BREAK			
		END
		
		IF $WARPED_TO_HERE = 86
		THEN
			EXTERN 244
			#ENEMIES CANNOT WALK THRU WALLS
			
			SET $WARPED_TO_HERE = 0
			WARP_TO 11, 9, 7
			BREAK			
		END
		
		IF $WARPED_TO_HERE = 88
		THEN
			EXTERN 244
			#ENEMIES CANNOT WALK THRU WALLS
			
			SET $WARPED_TO_HERE = 0
			WARP_TO 1, 9, 5
			BREAK			
		END
		
		#temp mushroom warp
		IF $WARPED_TO_HERE = 98
		THEN
			SET $WARPED_TO_HERE = 0
			#WARP_TO 5, 3, 5
			#WARP_TO 12, 11, 3
			BREAK			
		END		
	END
END

ENTERING SCREEN 0	
	IF TRUE
	THEN
		#if you have not collected the frog
		IF $HAVE_FROG = 0
		THEN
			SET TILE (6,5) = 38
		END
		
		#if you have collected the frog
		IF $HAVE_FROG = 1
		THEN
			SET TILE (6,5) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 0
	
	#you can collect the frog
	#but you have to bring it to 
	#anthony to get the key
	IF PLAYER_TOUCHES 6, 5
	IF $HAVE_FROG = 0
	IF $TALK_MAGICIAN_COUSIN = 0
	THEN
		EXTERN 35
		# YOU FOUND THE FROG
		
		SET TILE (6, 5) = 0
		SET $HAVE_FROG = 1
		SET $TALK_HUNGRY_MAGICIAN = 1
		SET $TALK_MAGICIAN_COUSIN = 1
		
		PRINT_TILE_AT (0, 22) = 38
		#shows FROG in bottom		
		REDRAW
	END
	
	#if you do not have the magic ring
	#you will be transported and have the 
	#frog taken from you
	IF PLAYER_TOUCHES 6, 5
	IF $HAVE_MAGIC_RING = 0
	IF $HAVE_FROG = 0
	THEN
		EXTERN 26
		# THE FROG IS MINE! PISS OFF.
		SET TILE (6, 5) = 0
		SET $HAVE_FROG = 0		
		PRINT_TILE_AT (0, 22) = 47
		#REMOVES FROG in bottom
		REDRAW
		WARP_TO 12, 6, 8
		#TRANSPORTS TO START
	END
	
	#now you can grab frog
	#you will still be transported
	#but now you have the frog
	IF PLAYER_TOUCHES 6, 5
	IF $HAVE_MAGIC_RING = 1
	IF $HAVE_FROG = 0
	THEN
		EXTERN 30
		#HEY THAT IS MY FROG.
		SET TILE (6, 5) = 0
		SET $HAVE_FROG = 1		
		PRINT_TILE_AT (0, 22) = 38
		#PLACES FROG in bottom
		REDRAW
		WARP_TO 12, 6, 8
		#TRANSPORTS TO START
	END
	
END


ENTERING SCREEN 1	
	IF TRUE
	THEN	
		SET_FIRE_ZONE_TILES 7, 4, 7, 4
		#SIGN
		
		SET_FIRE_ZONE 129, 49, 159, 79
		#DOOR 9,4
	END
END

PRESS_FIRE AT SCREEN 1

#Anthony Hole home
	IF PLAYER_TOUCHES 7, 4
	THEN
		EXTERN 8
		#a hole
		REDRAW
	END

	IF PLAYER_IN_X 129, 159
    IF PLAYER_IN_Y 49, 79
    THEN
		SET $WARPED_TO_HERE = 87
		WARP_TO_LEVEL 9, 5, 7, 8, 1
    END	
END

ENTERING SCREEN 2
	IF TRUE
	THEN	

		SET_FIRE_ZONE 33, 0, 63, 15
		
		#ALL_GATES_OPEN flag will change once you bring back
		#both halves of the wizard staff
		IF $ALL_GATES_OPEN = 0
		THEN
			SET TILE (3,1) = 20
		END
		
		IF $ALL_GATES_OPEN = 1
		THEN
			SET TILE (3,1) = 0
		END
		
		#LIFE RECHARGE HAS NOT BEEN USED
		IF $LIFE_04 = 0
		THEN
			SET TILE (13,1) = 16
		END
		
		#LIFE RECHARGE HAS BEEN USED
		IF $LIFE_04 = 1
		THEN
			SET TILE (13,1) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 2

	#gateway
	IF PLAYER_IN_X 33, 63
    IF PLAYER_IN_Y 0, 15
    THEN
		SET $WARPED_TO_HERE = 5
		WARP_TO_LEVEL 6, 14, 3, 8, 1
    END
	
	IF PLAYER_TOUCHES 13, 1
	IF $LIFE_04 = 0
	THEN
		EXTERN 2 
		#TEXT YOU HAVE RECHARGED YOUR LIFE
		RECHARGE 
		#RECHARGE YOUR LIFE
		SET $LIFE_04 = 1
		#SHOW THAT RECHARGE HAS ALREADY BEEN USED
		REDRAW 
		#CLEARS THE TEXT
		REHASH 
		#FORCE ENTERING SCREEN AND REPLACE SPIKES
	END	
	
END

ENTERING SCREEN 3
	IF TRUE
	THEN
		
		#HAVENT TALKED TO BOOM BETTY SO NO DYNOMITE SHOWN
		IF $TALK_BOOM_BETTY < 2
		THEN
			SET TILE (13, 1) = 0
		END
		
		#TALKED TO BOOM BETTY AND HAVE NOT COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_5 = 0
		THEN
			SET TILE (13, 1) = 22
		END
		
		#TALKED TO BOOM BETTY AND HAVE COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_5 = 1
		THEN
			SET TILE (13, 1) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 3

	#DYNOMITE OK
	IF $TALK_BOOM_BETTY = 2
	IF PLAYER_TOUCHES 13,1
	IF $DYNOMITE_5 = 0
	THEN
		EXTERN 70
		#text YOU FOUND DYNOMITE
		
		SET TILE (13, 1) = 0
		#remove DYNOMITE from screen
		
		SET $DYNOMITE_5 = 1
		#set flag showing you have DYNOMITE
		
		INC $NEED_DYNAMITE , 1		
		#increase the number of orbs
		
		PRINT_TILE_AT (10, 22) = 22
		#shows DYNOMITE in bottom
		
		REDRAW 
		# refresh the screen
	END
	
END

ENTERING SCREEN 4
	IF TRUE
	THEN
		
		SET_FIRE_ZONE 185, 1, 207, 127
		
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		
		#these are used for the push block puzzle
		SET $MOVED_TILE_FLAG = 0
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		
		
		IF $CAN_COLLECT_ORBS = 0
		THEN
			#SET TILE (14,5) = 13#CLOSED WALL
			
			#TEMP FOR TESTING
			#SET TILE (14,5) = 0#CLOSED WALL
		END
		
		#OPEN WALL SO YOU CAN GET ORB
		IF $CAN_COLLECT_ORBS = 1
		THEN
			SET TILE (14,5) = 0
		END
		
		IF $HAVE_MAGENTA_ORB = 0
		THEN
			SET TILE (3, 4) = 17
			#ADD ORB
		END
		
		IF $HAVE_MAGENTA_ORB = 1
		THEN
			SET TILE (3, 4) = 0
			#REMOVE ORB
		END
		
	END
END

PRESS_FIRE AT SCREEN 4

	#RESET SWITCH 1
	#if you touch the reset button
	#everything goes back including the orb
	
	IF $SWITCH_6 = 1
	IF $HAVE_MAGENTA_ORB = 1
	IF PLAYER_IN_X 185, 207
    IF PLAYER_IN_Y 1, 28
    THEN
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		
		SET TILE (3, 4) = 17
		#PRINT ORB
		SET $HAVE_MAGENTA_ORB = 0
		
		PRINT_TILE_AT (16, 22) = 47
		DEC $NUMBER_OF_ORBS , 1
		REENTER
    END
	
	#RESET SWITCH 2
	#if you touch the reset button
	#everything goes back including the orb
	IF $SWITCH_6 = 1
	IF $HAVE_MAGENTA_ORB = 1
	IF PLAYER_IN_X 185, 207
    IF PLAYER_IN_Y 70, 87
    THEN
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		
		SET TILE (3, 4) = 17
		#PRINT ORB
		SET $HAVE_MAGENTA_ORB = 0
		
		PRINT_TILE_AT (16, 22) = 47
		DEC $NUMBER_OF_ORBS , 1
		REENTER
    END
	
	#RESET SWITCH 3
	#if you touch the reset button
	#everything goes back including the orb
	IF $SWITCH_6 = 1
	IF $HAVE_MAGENTA_ORB = 1
	IF PLAYER_IN_X 185, 207
    IF PLAYER_IN_Y 102, 119
    THEN
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		
		SET TILE (3, 4) = 17
		#PRINT ORB
		SET $HAVE_MAGENTA_ORB = 0
		
		PRINT_TILE_AT (16, 22) = 47
		DEC $NUMBER_OF_ORBS , 1
		REENTER
    END


	#ORB
	IF PLAYER_TOUCHES 3,4
	IF $HAVE_MAGENTA_ORB = 0
	THEN
		EXTERN 46
		#YOU FOUND A ORB
		
		SET TILE (3, 4) = 0
		#clears orb from screen	
		
		SET $HAVE_MAGENTA_ORB = 1
		INC $NUMBER_OF_ORBS , 1
		PRINT_TILE_AT (16, 22) = 17
		#shows ORB in bottom	
		
		SET TILE (14,5) = 13
		#CLOSED WALL
		
		SET $SWITCH_6 = 1		
		REDRAW
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 13
	IF $MOVED_Y_FLAG = 1
	THEN
		SET $SWITCH_7 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 13
	IF $MOVED_Y_FLAG = 8
	THEN
		SET $SWITCH_8 = 1
	END
	
	IF $SWITCH_7 = 1
	IF $SWITCH_8 = 1
	THEN
		SET TILE (13,6) = 0
		SET TILE (14,5) = 0
	END	
END


ENTERING SCREEN 5
	IF TRUE
	THEN
		
		#need to talk to doug bag first
		#if you have not talked to him
		#the gate will be closed
		
		IF $TALK_HUNGRY_MAGICIAN = 0
		THEN
			SET TILE (11,1) = 3
			SET TILE (12,1) = 3
		END
		
		#now the gate is opened
		IF $TALK_HUNGRY_MAGICIAN >= 1
		THEN
			SET TILE (11,1) = 0
			SET TILE (12,1) = 0
		END		
		
		#IS THE GATE OPEN
		#you cannot get the key until you have collected the frog
		IF $SWAMP_KEY_GATE = 0
		THEN
			SET TILE (11,6) = 4
		END
		
		IF $SWAMP_KEY_GATE = 1
		THEN
			SET TILE (11,6) = 0
		END
		
		#DO YOU HAVE THE KEY
		#used to display the key
		IF $HAVE_DESERT_KEY = 0
		THEN
			SET TILE (12, 6) = 18
		END
		IF $HAVE_DESERT_KEY = 1
		THEN
			SET TILE (12, 6) = 0
		END
		
		# TEMP FOR TESTING COMMENT FOR REAL PLAY
		# SET $CAN_COLLECT_ORBS = 1
		
		#if you have not talked to the librarian
		#you cannot collect the orb
		IF $CAN_COLLECT_ORBS = 0
		THEN
			SET TILE (0,5) = 13
			#CLOSED WALL
		END
		
		IF $CAN_COLLECT_ORBS = 1
		THEN
			SET TILE (0,5) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 5
	IF PLAYER_TOUCHES 12, 6
	IF $HAVE_DESERT_KEY = 0
	THEN
		SET TILE (12, 6) = 0
		SET $HAVE_DESERT_KEY = 1
		# now you have an KEY
		
		PRINT_TILE_AT (27, 22) = 18
		# shows KEY in bottom
		
		EXTERN 38
		# YOU FOUND THE KEY
		
		REDRAW
	END	
END


ENTERING SCREEN 10
	IF TRUE
	THEN
		IF $TALK_HUNGRY_MAGICIAN = 0
		THEN
			SET TILE (1,6) = 3
		END
		
		IF $TALK_HUNGRY_MAGICIAN >= 1
		THEN
			SET TILE (1,6) = 0
		END
	
	END
END


ENTERING SCREEN 11
	IF TRUE
	THEN
		SET_FIRE_ZONE_TILES 7, 6, 7, 6
		#SIGN
		
		#DOOR 9,6
		SET_FIRE_ZONE 137, 89, 151, 103
	END
END

PRESS_FIRE AT SCREEN 11

	IF PLAYER_TOUCHES 7, 6
	THEN
		EXTERN 9
		#D BAG
		REDRAW
	END
	
#TO HUNGRY MAGICIAN
	IF PLAYER_IN_X 137, 151
    IF PLAYER_IN_Y 89, 103
    THEN
		SET $WARPED_TO_HERE = 85
		WARP_TO_LEVEL 9, 5, 7, 8, 1
    END	
END

ENTERING SCREEN 12	
	IF TRUE
	THEN
		SET_FIRE_ZONE 81, 129, 111, 159
	END
END

PRESS_FIRE AT SCREEN 12
#to level 0	
	IF PLAYER_IN_X 81, 111
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 4
		WARP_TO_LEVEL 0, 0, 6, 1, 1
    END	
END

ENTERING SCREEN 15
	IF TRUE
	THEN
		SET_FIRE_ZONE 209, 33, 239, 63
		
		#TEMP TO OPEN UP LEVEL 3
		#COMMENT FOR REAL PLAY
		#SET $MAP4_GATE = 1
		
		#CLOSED GATE		
		IF $MAP4_GATE = 0
		THEN
			SET TILE (13, 3) = 20
		END
		
		#OPEN GATE
		IF $MAP4_GATE = 1
		THEN
			SET TILE (13, 3) = 0
		END	
		
	END
END

PRESS_FIRE AT SCREEN 15

	IF PLAYER_IN_X 209, 239
    IF PLAYER_IN_Y 33, 63
    THEN
		SET $WARPED_TO_HERE = 6
		WARP_TO_LEVEL 4, 12, 1, 3, 1
    END
	
END

END_OF_LEVEL 
##end level 3

##################################
# Level 4
# Designed by RUSS Glover
##################################
INC_DECORATIONS decorations4.spt

ENTERING GAME
	IF TRUE
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		SET $SWITCH_10 = 0
		SET $SWITCH_11 = 0
		SET $SWITCH_12 = 0
		SET $SWITCH_13 = 0
		
		SET $SWITCH_SPIKES = 0
		#START WITH SPIKES UP

		IF $WARPED_TO_HERE = 6 #from level 3
		THEN
			EXTERN 244 
			#NO WALKING THRU WALLS
			
			SET $WARPED_TO_HERE = 0
			
			#FOR SOME REASON, THESE ARE NOT RESETTING 
			# TO THEIR PROPER VALUES ABOVE PLACED THEM HERE
			
			SET $SWITCH_1 = 0
			SET $SWITCH_2 = 0
			SET $SWITCH_3 = 0
			SET $SWITCH_4 = 0
			SET $SWITCH_5 = 0
			SET $SWITCH_6 = 0
			SET $SWITCH_7 = 0
			SET $SWITCH_8 = 0
			SET $SWITCH_9 = 0
			SET $SWITCH_10 = 0
			SET $SWITCH_11 = 0
			SET $SWITCH_12 = 0
			SET $SWITCH_13 = 0
			
			EXTERN 244 
			#NO WALKING THRU WALLS
		
			WARP_TO 12, 1, 3
			BREAK
		END
		
		IF $WARPED_TO_HERE = 10 #from level 5
		THEN
			EXTERN 244 
			#NO WALKING THRU WALLS
			
			SET $WARPED_TO_HERE = 0
			
			SET $SWITCH_1 = 0
			SET $SWITCH_2 = 0
			SET $SWITCH_3 = 0
			SET $SWITCH_4 = 0
			SET $SWITCH_5 = 0
			SET $SWITCH_6 = 0
			SET $SWITCH_7 = 0
			SET $SWITCH_8 = 0
			SET $SWITCH_9 = 0
			SET $SWITCH_10 = 0
			SET $SWITCH_11 = 0
			SET $SWITCH_12 = 0
			SET $SWITCH_13 = 0
		
		
			WARP_TO 11, 13, 6
			BREAK
		END
		
		IF $WARPED_TO_HERE = 23 #from level 7
		THEN
			EXTERN 244
			
			SET $WARPED_TO_HERE = 0
			
			SET $SWITCH_1 = 0
			SET $SWITCH_2 = 0
			SET $SWITCH_3 = 0
			SET $SWITCH_4 = 0
			SET $SWITCH_5 = 0
			SET $SWITCH_6 = 0
			SET $SWITCH_7 = 0
			SET $SWITCH_8 = 0
			SET $SWITCH_9 = 0
			SET $SWITCH_10 = 0
			SET $SWITCH_11 = 0
			SET $SWITCH_12 = 0
			SET $SWITCH_13 = 0			
			WARP_TO 3, 5, 1
			BREAK
		END
		
		IF $WARPED_TO_HERE = 25 #from level 9
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 5, 13, 1
			BREAK
		END
		
		#TEMP
		IF $WARPED_TO_HERE = 98
		THEN
			SET $WARPED_TO_HERE = 0
			#WARP_TO 14, 1, 3
			#WARP_TO 12, 2, 3 #NORMAL ENTERANCE
			#WARP_TO 6, 8, 5
			#WARP_TO 9, 7, 9 #CLOSE TO WIZARD
			#WARP_TO 3, 5, 2			
			BREAK			
		END

	END
END


ENTERING SCREEN 0
	IF TRUE
	THEN	
		IF $SWITCH_1 = 0
		THEN
			SET TILE (12, 2) = 32
		END	
		
		IF $SWITCH_1 = 1
		THEN
			SET TILE (12, 2) = 33
		END
		
		IF $SWITCH_3 = 0
		THEN
			SET TILE (1, 6) = 7
		END
		
		IF $SWITCH_3 = 1
		THEN
			SET TILE (1, 6) = 1
		END
		
		#HAVENT TALKED TO BOOM BETTY SO NO DYNOMITE SHOWN
		IF $TALK_BOOM_BETTY < 2
		THEN
			SET TILE (1, 7) = 1
		END
		
		#TALKED TO BOOM BETTY AND HAVE NOT COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_4 = 0
		THEN
			SET TILE (1, 7) = 31
		END
		
		#TALKED TO BOOM BETTY AND HAVE COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_4 = 1
		THEN
			SET TILE (1, 7) = 1
		END
		
	END
END

PRESS_FIRE AT SCREEN 0

	IF PLAYER_TOUCHES 12,2
	THEN
		SET $SWITCH_1 = 1
		SET TILE (12, 2) = 33
	END
	
	#DYNOMITE OK
	IF $TALK_BOOM_BETTY = 2
	IF PLAYER_TOUCHES 1,7
	IF $DYNOMITE_4 = 0
	THEN
		EXTERN 70
		#text YOU FOUND DYNOMITE
		SET TILE (1, 7) = 1
		#remove DYNOMITE from screen
		SET $DYNOMITE_4 = 1
		#set flag showing you have DYNOMITE
		INC $NEED_DYNAMITE , 1
		#increase the number of orbs
		PRINT_TILE_AT (8, 22) = 31
		#shows DYNOMITE in bottom
		REDRAW 
		# refresh the screen
	END

END

ENTERING SCREEN 1
	IF TRUE
	THEN	
		IF $SWITCH_3 = 0
		THEN
			SET TILE (13, 4) = 36
		END	
		IF $SWITCH_3 = 1
		THEN
			SET TILE (13, 4) = 37
		END
				
	END
END

PRESS_FIRE AT SCREEN 1
	IF PLAYER_TOUCHES 13,4
	THEN
		SET $SWITCH_3 = 1
		SET TILE (13, 4) = 37
	END
	

END

ENTERING SCREEN 2
	IF TRUE
	THEN
	
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		SET $MOVED_TILE_FLAG = 0
		
		IF $SWITCH_13 = 0
		THEN
			SET TILE (7, 2) = 36
			SET TILE (1, 9) = 4
		END	
		IF $SWITCH_13 = 1
		THEN
			SET TILE (7, 2) = 37
			SET TILE (1, 9) = 0
		END
		
		IF $SWITCH_6 = 0
		THEN
			SET TILE (11, 9) = 6
		END	
		IF $SWITCH_6 = 1
		THEN
			SET TILE (11, 9) = 0
		END
	
	END
END

PRESS_FIRE AT SCREEN 2

	#BLOCK PUZZLE
	#if a pushable tile is in 13,6 unlock gate
	IF $MOVED_X_FLAG = 13
	IF $MOVED_Y_FLAG = 7
	THEN
		SET $SWITCH_12 = 1
		SET TILE (8,8) = 0
		SET $MOVED_TILE_FLAG = 1
	END
	
	#IF YOU BLOCK YOURSELF IN
	IF $MOVED_X_FLAG = 11
	IF $MOVED_Y_FLAG = 9
	THEN
		REENTER
	END
	
	IF PLAYER_TOUCHES 7,2
	THEN
		#FLIPFLOP $SWITCH_13
		SET $SWITCH_13 = 1
		SET TILE (7, 2) = 37
		SET TILE (1, 9) = 0
	END


END

ENTERING SCREEN 3
	IF TRUE
	THEN
		SET_FIRE_ZONE 73, 0, 119,151
		
		#TEMP COMMENT FOR REAL PLAY
		#SET $MOUNTAIN_GATE = 1

		IF $MOUNTAIN_GATE = 0
		THEN
			SET TILE (5, 1) = 20
		END
		
		IF $MOUNTAIN_GATE = 1
		THEN
			SET TILE (5, 1) = 1
		END
		
		#DO YOU HAVE THE KEY TO ENTER THE CASTLE
		IF $HAVE_CASTLE_KEY = 0
		THEN
			SET TILE (1, 8) = 30
		END
		IF $HAVE_CASTLE_KEY = 1
		THEN
			SET TILE (1, 8) = 1
		END
		IF $HAVE_CASTLE_KEY = 2
		THEN
			SET TILE (1, 8) = 1
		END
		
		IF $SWITCH_4 = 0
		THEN
			SET TILE (11, 5) = 36
		END	
		IF $SWITCH_4 = 1
		THEN
			SET TILE (11, 5) = 37
		END
		
		IF $MOUNTAIN_GATE = 0
		THEN
			SET TILE (5, 1) = 20
			#GATE
		END
		IF $MOUNTAIN_GATE = 1
		THEN
			SET TILE (5, 1) = 1
			#GRASS
		END
		
	END
END

PRESS_FIRE AT SCREEN 3

	IF PLAYER_IN_X 73, 87
    IF PLAYER_IN_Y 0, 7
    THEN
		SET $WARPED_TO_HERE = 15		
		WARP_TO_LEVEL 7, 15, 5, 8, 1
    END
	
	
	IF PLAYER_TOUCHES 1, 8
	IF $HAVE_CASTLE_KEY = 0
	THEN
		SET TILE (1, 8) = 1
		SET $HAVE_CASTLE_KEY = 1
		#now you have an KEY
		PRINT_TILE_AT (27, 22) = 30
		#shows KEY in bottom
		EXTERN 38
		# YOU FOUND THE KEY
		REDRAW
	END
	
	IF PLAYER_TOUCHES 3, 1
	IF $HAVE_RED_KEY = 1
	THEN
		SET TILE (5, 1) = 1
		SET $MOUNTAIN_GATE = 1
		
		EXTERN 28
		#the gate is now open
		
		PRINT_TILE_AT (25,22) = 47
		REDRAW
	END
	
	
	IF PLAYER_TOUCHES 7,9 #TURN OFF LIGHTS
	THEN
		EXTERN 247
	END	
	
	IF PLAYER_TOUCHES 11,5
	THEN
		#FLIPFLOP $SWITCH_4
		SET $SWITCH_4 = 1
		SET TILE (11, 5) = 37
	END
	

END

ENTERING SCREEN 4
	IF TRUE
	THEN	
		IF $SWITCH_5 = 0
		THEN
			SET TILE (13, 4) = 36
		END	
		IF $SWITCH_5 = 1
		THEN
			SET TILE (13, 4) = 37
		END
		
		#LIFE RECHARGE HAS NOT BEEN USED
		IF $LIFE_05 = 0
		THEN
			SET TILE (13,7) = 16
		END
		#LIFE RECHARGE HAS BEEN USED
		IF $LIFE_05 = 1
		THEN
			SET TILE (13,7) = 0
		END
				
	END
END

PRESS_FIRE AT SCREEN 4

	IF PLAYER_TOUCHES 13,4
	IF $SWITCH_5 = 0
	THEN
		#FLIPFLOP $SWITCH_5
		SET $SWITCH_5 = 1
		SET TILE (13, 4) = 37
	END
		
	IF PLAYER_TOUCHES 13, 7
	IF $LIFE_05 = 0
	THEN
		EXTERN 2 
		#TEXT YOU HAVE RECHARGED YOUR LIFE
		RECHARGE 
		#RECHARGE YOUR LIFE
		SET $LIFE_05 = 1
		#SHOW THAT RECHARGE HAS ALREADY BEEN USED
		REDRAW 
		#CLEARS THE TEXT
		REHASH 
		#FORCE ENTERING SCREEN AND REPLACE SPIKES
	END	
	
END

ENTERING SCREEN 5
	IF TRUE
	THEN
	
		SET_FIRE_ZONE 201, 0, 215, 7
		EXTERN 247
		#LIGHTS OFF
		
		IF $CASTLE_LOCKED_ROOM2 = 0
		THEN
			SET TILE (7, 1) = 4
		END
		
		IF $CASTLE_LOCKED_ROOM2 = 1
		THEN
			SET TILE (7, 1) = 0
		END
	
	END
END

PRESS_FIRE AT SCREEN 5

	IF PLAYER_IN_X 201, 215
    IF PLAYER_IN_Y 0, 7
    THEN
		SET $WARPED_TO_HERE = 93		
		WARP_TO_LEVEL 9, 9, 1, 6, 1
    END
END

ENTERING SCREEN 6
	IF TRUE
	THEN	
		IF $SWITCH_6 = 0
		THEN
			SET TILE (13, 1) = 36
			SET TILE (11, 0) = 6
		END	
		IF $SWITCH_6 = 1
		THEN
			SET TILE (13, 1) = 37
			SET TILE (11, 0) = 0
		END
		
		IF $SWITCH_13 = 0
		THEN
			SET TILE (1, 0) = 20
		END	
		IF $SWITCH_13 = 1
		THEN
			SET TILE (1, 0) = 3
		END
		
		
	END
END

PRESS_FIRE AT SCREEN 6
	IF PLAYER_TOUCHES 13,1
	THEN
		#FLIPFLOP $SWITCH_6
		SET $SWITCH_6 = 1
		SET TILE (13, 1) = 37
		SET TILE (11, 0) = 0
	END
	

END

ENTERING SCREEN 8
	IF TRUE
	THEN	
		IF $SWITCH_5 = 0
		THEN
			SET TILE (9, 4) = 7
		END	
		IF $SWITCH_5 = 1
		THEN
			SET TILE (9, 4) = 1
		END
				
	END
END

PRESS_FIRE AT SCREEN 8
END

ENTERING SCREEN 9
	IF TRUE
	THEN
	
		EXTERN 246
		#LIGHTS ON		
		
		SET_FIRE_ZONE 105, 121, 119, 135
		IF $SWITCH_7 = 0
		THEN
			SET TILE (4, 4) = 36
		END	
		IF $SWITCH_7 = 1
		THEN
			SET TILE (4, 4) = 37
		END

		IF $SWITCH_1 = 1
		THEN
			SET TILE (11, 3) = 3
			#EXTERN 246#LIGHTS ON
			#SO YOU CAN SEE THE COLOR OF THE RED KEY
		END
		
		IF $HAVE_RED_KEY = 0
		THEN
			SET TILE (10,3) = 28
		END
		
		IF $HAVE_RED_KEY = 1
		THEN
			SET TILE (10,3) = 0
		END
		
		
	END
END

PRESS_FIRE AT SCREEN 9
	IF PLAYER_TOUCHES 4,4
	THEN
		#FLIPFLOP $SWITCH_7
		SET $SWITCH_7 = 1
		SET TILE (4, 4) = 37
	END

	
	IF PLAYER_TOUCHES 7,8
	THEN
		EXTERN 247 
		#LIGHTS OFF
	END
		
	IF PLAYER_TOUCHES 10,3
	THEN
		SET $HAVE_RED_KEY = 1
		EXTERN 38
		
		PRINT_TILE_AT (25, 22) = 28
		#shows KEY in bottom
		
		SET TILE (10,3) = 0
		REDRAW
	END
END

ENTERING SCREEN 10
	IF TRUE
	THEN
		EXTERN 247 
		#LIGHTS OFF		
		
		IF $SWITCH_8 = 0
		THEN
			SET TILE (1, 6) = 36#DOWN
			SET TILE (14, 8) = 20
		END	
		IF $SWITCH_8 = 1
		THEN
			SET TILE (1, 6) = 37#UP
			SET TILE (14, 8) = 0
		END
		
		IF $SWITCH_9 = 0#INITAL STATE
		THEN
			SET TILE (12, 1) = 36
			SET TILE (11, 7) = 6
		END	
		IF $SWITCH_9 = 1
		THEN
			SET TILE (12, 1) = 37
			SET TILE (11, 7) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 10

	IF PLAYER_TOUCHES 1,6
	THEN
		#FLIPFLOP $SWITCH_8
		SET $SWITCH_8 = 1
		SET TILE (1, 6) = 37
		SET TILE (14, 8) = 0
	END
	
	IF PLAYER_TOUCHES 12,1
	THEN
		SET $SWITCH_9 = 1
		SET TILE (12, 1) = 37
		SET TILE (11, 7) = 0
	END	
END


ENTERING SCREEN 11
	IF TRUE
	THEN
		SET_FIRE_ZONE 41, 89, 239, 135

		#TEMP OPEN GATE  COMMENT FOR REAL PLAY
		#SET $ALL_GATES_OPEN = 1
		
		IF $ALL_GATES_OPEN = 0
		THEN
			SET TILE (13,6) = 20
		END
		
		IF $ALL_GATES_OPEN = 1
		THEN
			SET TILE (13,6) = 1
		END		
		
		IF $SWITCH_8 = 0
		THEN
			SET TILE (0, 8) = 20
		END	
		IF $SWITCH_8 = 1
		THEN
			SET TILE (0, 8) = 0
		END
		
	END	
END

PRESS_FIRE AT SCREEN 11
	IF PLAYER_IN_X 209, 239
    IF PLAYER_IN_Y 81, 111
    THEN
		SET $WARPED_TO_HERE = 9		
		WARP_TO_LEVEL 5, 4, 1, 6, 1
    END
	
	IF PLAYER_TOUCHES 3,8
	THEN
		SET TILE (1, 7) = 0
	END
	
	IF PLAYER_TOUCHES 7,6
	THEN
		SET TILE (3, 4) = 0
		SET TILE (7, 2) = 0
	END	
END


ENTERING SCREEN 12	
	IF TRUE
	THEN
		SET_FIRE_ZONE 0, 15, 33, 63
		
		IF $SWITCH_11 = 0
		THEN
			SET TILE (14,4) = 20
			SET TILE (14,5) = 20
		END	
		IF $SWITCH_11 = 1
		THEN
			SET TILE (14,4) = 0
			SET TILE (14,5) = 0
		END		
	END
END

PRESS_FIRE AT SCREEN 12
	#gateway
	IF PLAYER_IN_X 0, 15
    IF PLAYER_IN_Y 33, 63
    THEN
		SET $WARPED_TO_HERE = 8
		WARP_TO_LEVEL 3, 15, 12, 3, 1
    END	
END

ENTERING SCREEN 13
	IF TRUE
	THEN
		SET_FIRE_ZONE 161, 49, 191, 79
		
		#TEMP, COMMENT FOR REAL PLAY
		#SET $SWITCH_4 = 1
		
		
		EXTERN 246 
		#LIGHTS ON
		
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		SET $MOVED_TILE_FLAG = 0
		
		#TEMP OPEN GATE FOR TESTING , COMMENT FOR REAL PLAY
		#SET $CASTLE_GATE = 1
		
		IF $CASTLE_GATE = 0
		THEN
			SET TILE (7,6) = 20
			#GATE
		END
		
		IF $CASTLE_GATE = 1
		THEN
			SET TILE (7,6) = 0
		END
	
		IF $SWITCH_10 = 0
		THEN
			SET TILE (13, 1) = 36
			SET TILE (7, 0) = 20
		END	
		
		IF $SWITCH_10 = 1
		THEN
			SET TILE (13, 1) = 37
			SET TILE (7, 0) = 0
		END
		
		IF $SWITCH_11 = 0
		THEN
			SET TILE (13, 6) = 36
			SET TILE (0,4) = 20
			SET TILE (0,5) = 20
		END	
		
		IF $SWITCH_11 = 1
		THEN
			SET TILE (13, 6) = 37
			SET TILE (0,4) = 0
			SET TILE (0,5) = 0
		END
		
		IF $SWITCH_12 = 0
		THEN
			SET TILE (3, 1) = 36
			SET TILE (13,3) = 20
		END	
		
		IF $SWITCH_12 = 1
		THEN
			SET TILE (3, 1) = 37
			SET TILE (13,3) = 0
		END
		
		IF $SWITCH_7 = 0
		THEN			
			SET TILE (1, 3) = 6
			SET TILE (2, 3) = 6
		END	
		
		IF $SWITCH_7 = 1
		THEN			
			SET TILE (1, 3) = 0
			SET TILE (2, 3) = 0
		END
	
		IF $MOVED_TILE_FLAG = 0
		THEN
			SET TILE (13,3) = 20
		END
		
		#remove 2 barriers
		IF $SWITCH_4 = 0
		THEN
			SET TILE (11, 1) = 20
			SET TILE (13, 3) = 20
		END	
		
		IF $SWITCH_4 = 1
		THEN
			SET TILE (11, 1) = 0
			#barrier near switch
			SET TILE (13, 3) = 0
			#barrier blocking passage
		END
		
		#check to see if you talked to wizard to unblock passage
		IF $CASTLE_LOCKED_ROOM2 = 1
		THEN
			SET $SWITCH_4 = 1
		END	
		
		#should be the last clause.  
		#if you have been thru the castle 
		#before no need to go thru it again
		IF $DUNGEON_FOUR_CONQUERED = 1
		THEN
			SET TILE (7, 0) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 13

	#MEAN TILE, CLOSES GATE
	IF PLAYER_IN_X 161, 191
    IF PLAYER_IN_Y 49, 79
	IF $MOVED_TILE_FLAG = 0
    THEN
		#SET TILE (13,3) = 4
		SET $SWITCH_12 = 0
    END	
	
	#BLOCK PUZZLE
	#if a pushable tile is in 1,6 unlock gate
	IF $MOVED_X_FLAG = 1
	IF $MOVED_Y_FLAG = 6
	THEN
		SET $SWITCH_12 = 1
		SET TILE (13,3) = 0
		SET $MOVED_TILE_FLAG = 1
	END
	
	IF PLAYER_TOUCHES 6, 7
	IF $HAVE_CASTLE_KEY = 1
	THEN
		SET TILE (7, 6) = 1
		SET $CASTLE_GATE = 1
		SET $HAVE_CASTLE_KEY = 2
		#key already used
		EXTERN 28
		#the gate is now open
		PRINT_TILE_AT (27, 22) = 47
		REDRAW
	END
	
	IF PLAYER_TOUCHES 13,1
	IF $SWITCH_10 = 0
	THEN
		# FLIPFLOP $SWITCH_10
		SET $SWITCH_10 = 1
		SET TILE (13, 1) = 37
		SET TILE (7, 0) = 0
		REENTER
	END
	
	IF PLAYER_TOUCHES 13,6
	IF $SWITCH_11 = 0
	THEN
		#FLIPFLOP $SWITCH_11
		SET $SWITCH_11 = 1
		SET TILE (13, 6) = 37
		SET TILE (0,4) = 0
		SET TILE (0,5) = 0	
	END
	
	IF PLAYER_TOUCHES 3,1
	THEN
		FLIPFLOP $SWITCH_12
		#LEAVE THIS FLIPFLOP ALONE
	END
	
	#should be the last clause.  
	#if you have been thru the castle before 
	#no need to go thru it again
	IF $DUNGEON_FOUR_CONQUERED = 1
	THEN
		SET TILE (7, 0) = 0
	END

	
	IF $SWITCH_12 = 0
	THEN
		SET TILE (3, 1) = 36
		SET TILE (13,3) = 20
	END	
	IF $SWITCH_12 = 1
	THEN
		SET TILE (3, 1) = 37
		SET TILE (13,3) = 0
	END
END


ENTERING SCREEN 14
	IF TRUE
	THEN
		SET_FIRE_ZONE 9, 89, 23, 103		
		# BEGIN SPIKES
		
		# i could not get the timer to work in the way
		# that i wanted to so it is disabled
		#SET_TIMER 3, 20 #ABOUT 4 SECONDS
		#TIMER_START
	END
END

PRESS_FIRE AT SCREEN 14

	# i could not get the timer to work in the way
	# that i wanted to so it is disabled
	#SET_TIMER 3, 20 #ABOUT 4 SECONDS
	#TIMER_START
	
	IF PLAYER_TOUCHES 1,6
	THEN
		#TEMP TURNED OFF, UNCOMMENT FOR REAL PLAY
		EXTERN 247 #LIGHTS OFF
	END
	
	IF $SWITCH_SPIKES = 0
	THEN
		# i could not get the timer to work in the way
		# that i wanted to so it is disabled
		#SET_TIMER 3, 20
	END
	
	IF $SWITCH_SPIKES = 1
	THEN
		# i could not get the timer to work in the way
		# that i wanted to so it is disabled
		#SET_TIMER 3, 20
	END
	
END

ENTERING SCREEN 15
	IF TRUE
	THEN	
		IF $SWITCH_9 = 0
		THEN
			SET TILE (4, 2) = 6
		END
		IF $SWITCH_9 = 1
		THEN
			SET TILE (4, 2) = 0
		END
		
		IF $SWITCH_13 = 0
		THEN
			SET TILE (4, 6) = 20
		END	
		IF $SWITCH_13 = 1
		THEN
			SET TILE (4, 6) = 0
		END		
	END
END




END_OF_LEVEL

##end level 4




##################################
# Level 5
##################################
INC_DECORATIONS decorations5.spt

ENTERING GAME
	IF TRUE	
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		SET $SWITCH_10 = 0
		SET $SWITCH_11 = 0
		SET $SWITCH_12 = 0
		SET $SWITCH_13 = 0
		SET $SWITCH_14 = 0
		SET $SWITCH_15 = 0
		SET $SWITCH_16 = 0
		SET $SWITCH_17 = 0
		SET $SWITCH_18 = 0
		SET $SWITCH_19 = 0
		SET $SWITCH_20 = 0
		SET $SWITCH_21 = 0
		SET $SWITCH_22 = 0
		SET $SWITCH_23 = 0
		SET $SWITCH_24 = 0
		SET $SWITCH_25 = 0
		SET $SWITCH_26 = 0
		SET $SWITCH_27 = 0
		EXTERN 244 
		#NO WALKING THRU WALLS
	
		
		#from level 4
		IF $WARPED_TO_HERE = 9
		THEN
			SET $WARPED_TO_HERE = 0
			
			SET $SWITCH_1 = 0
			SET $SWITCH_2 = 0
			SET $SWITCH_3 = 0
			SET $SWITCH_4 = 0
			SET $SWITCH_5 = 0
			SET $SWITCH_6 = 0
			SET $SWITCH_7 = 0
			SET $SWITCH_8 = 0
			SET $SWITCH_9 = 0
			SET $SWITCH_10 = 0
			SET $SWITCH_11 = 0
			SET $SWITCH_12 = 0
			SET $SWITCH_13 = 0
			SET $SWITCH_14 = 0
			SET $SWITCH_15 = 0
			SET $SWITCH_16 = 0
			SET $SWITCH_17 = 0
			SET $SWITCH_18 = 0
			SET $SWITCH_19 = 0
			SET $SWITCH_20 = 0
			SET $SWITCH_21 = 0
			SET $SWITCH_22 = 0
			SET $SWITCH_23 = 0
			SET $SWITCH_24 = 0
			SET $SWITCH_25 = 0
			SET $SWITCH_26 = 0
			SET $SWITCH_27 = 0
			EXTERN 244 
			#NO WALKING THRU WALLS
		
			WARP_TO 4, 1, 6
			BREAK
		END
		
		IF $WARPED_TO_HERE = 11#from level 2
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 13, 13, 8
			BREAK
		END	
		
		IF $WARPED_TO_HERE = 19#from level 7
		THEN
			SET $WARPED_TO_HERE = 0
			
			SET $SWITCH_1 = 0
			SET $SWITCH_2 = 0
			SET $SWITCH_3 = 0
			SET $SWITCH_4 = 0
			SET $SWITCH_5 = 0
			SET $SWITCH_6 = 0
			SET $SWITCH_7 = 0
			SET $SWITCH_8 = 0
			SET $SWITCH_9 = 0
			SET $SWITCH_10 = 0
			SET $SWITCH_11 = 0
			SET $SWITCH_12 = 0
			SET $SWITCH_13 = 0
			SET $SWITCH_14 = 0
			SET $SWITCH_15 = 0
			SET $SWITCH_16 = 0
			SET $SWITCH_17 = 0
			SET $SWITCH_18 = 0
			SET $SWITCH_19 = 0
			SET $SWITCH_20 = 0
			SET $SWITCH_21 = 0
			SET $SWITCH_22 = 0
			SET $SWITCH_23 = 0
			SET $SWITCH_24 = 0
			SET $SWITCH_25 = 0
			SET $SWITCH_26 = 0
			SET $SWITCH_27 = 0
			EXTERN 244 
			#NO WALKING THRU WALLS
			
			WARP_TO 3, 10, 1
			BREAK
		END	
		
		IF $WARPED_TO_HERE = 90#from level 9
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 7, 7, 5
			BREAK
		END
		
		IF $WARPED_TO_HERE = 91#from level 9
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 7, 7, 6
			BREAK
		END	
		
		IF $WARPED_TO_HERE = 98#temp
		THEN
			SET $WARPED_TO_HERE = 0
			#WARP_TO 13, 13, 8
			#WARP_TO 11, 1, 4
			#WARP_TO 15, 10, 1
			#WARP_TO 7, 7, 8
			#WARP_TO 3, 5, 2
			BREAK
		END
		
	END
END

ENTERING SCREEN 0
	IF TRUE
	THEN
	
		SET_FIRE_ZONE 89, 57, 103, 71
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $MOVED_TILE_FLAG = 0
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		
		IF $CAN_COLLECT_ORBS = 0
		THEN
			SET TILE (14,5) = 2
			#CLOSED WALL
		END
		
		#OPEN WALL SO YOU CAN GET ORB
		IF $CAN_COLLECT_ORBS = 1
		THEN
			SET TILE (14,5) = 0
		END
		
		IF $HAVE_CYAN_ORB = 0
		THEN
			SET TILE (8, 4) = 17
		END
		
		IF $HAVE_CYAN_ORB = 1
		THEN
			SET TILE (8, 4) = 0
		END
	
	END
END

PRESS_FIRE AT SCREEN 0

	#RESET SWITCH 1
	#touching the reset switch will return the orb
	IF $SWITCH_8 = 1
	IF $HAVE_CYAN_ORB = 1
	
	IF PLAYER_TOUCHES 6,4
    THEN
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		
		SET TILE (8, 4) = 17
		#PRINT ORB
		SET $HAVE_CYAN_ORB = 0
		
		PRINT_TILE_AT (14, 22) = 47
		DEC $NUMBER_OF_ORBS , 1
		
		REENTER
    END

	#ORB
	IF PLAYER_TOUCHES 8,4
	IF $HAVE_CYAN_ORB = 0
	THEN
		EXTERN 46
		#YOU FOUND A ORB
		SET TILE (8, 4) = 0
		SET $HAVE_CYAN_ORB = 1
		INC $NUMBER_OF_ORBS , 1
		SET $SWITCH_8 = 1
		PRINT_TILE_AT (14, 22) = 17
		#shows ORB in bottom
		REDRAW
	END
	
	
	#BLOCK PUZZLE
	#solve the puzzle to exit
	
	IF $MOVED_X_FLAG = 1
	IF $MOVED_Y_FLAG = 1
	THEN
		SET $SWITCH_6 = 1
		SET $SWITCH_8 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 13
	IF $MOVED_Y_FLAG = 4
	THEN
		SET $SWITCH_7 = 1
		SET $SWITCH_8 = 1
	END
	
	#OPENS DOOR
	IF $SWITCH_6 = 1
	THEN
		SET TILE(14,5) = 0
	END
	
	IF $SWITCH_7 = 1
	THEN
		SET TILE(9,4) = 0
	END	
END


ENTERING SCREEN 1
	IF TRUE
	THEN
	
		IF $CAN_COLLECT_ORBS = 0
		THEN
			SET TILE (0,5) = 2
			#CLOSED WALL
		END
		
		#OPEN WALL SO YOU CAN GET ORB
		IF $CAN_COLLECT_ORBS = 1
		THEN
			SET TILE (0,5) = 0
		END		
	END
END

PRESS_FIRE AT SCREEN 1
END

#GATEWAY TO LEVEL 8
ENTERING SCREEN 3
	IF TRUE
	THEN
		SET_FIRE_ZONE 145, 0, 175, 15
		
		#temp, comment for real play
		#SET $TALK_WIZARD = 2
		
		IF $TALK_WIZARD < 2
		THEN
			SET TILE (10,1) = 20
		END
		
		IF $TALK_WIZARD = 2
		THEN
			SET TILE (10,1) = 0
		END
	
	END
END

PRESS_FIRE AT SCREEN 3	

	#gateway
	IF PLAYER_IN_X 145, 175
    IF PLAYER_IN_Y 0, 15
    THEN
		SET $WARPED_TO_HERE = 20
		WARP_TO_LEVEL 8, 15, 10, 8, 0
    END
	
END

#GATEWAY TO LEVEL 4
#OPEN ENTRY FROM RIGHT AFTER TALKING TO WIZARD INITIALLY
#OPEN ACTUAL GATEWAY AFTER WIZARD HAS HIS STAFF BACK
ENTERING SCREEN 4
	IF TRUE
	THEN
		#SET_FIRE_ZONE_TILES 0, 6, 0, 6
		SET_FIRE_ZONE 0, 81, 15, 111
		
		#you have not returned both halves to the staff
		IF $ALL_GATES_OPEN = 0
		THEN
			SET TILE (1,6) = 20
		END
		
		#you have returned both halves of the staff
		IF $ALL_GATES_OPEN = 1
		THEN
			SET TILE (1,6) = 0
		END
		
		#CLOSE GATE FOR STAFF
		#IF $TALK_WIZARD = 0
		#JUST REUSING THIS VARIABLE WHICH IS 
		#TRIGGERED WHEN YOU TALK TO THE WIZARD
		IF $CASTLE_LOCKED_ROOM2 = 0
		THEN
			SET TILE (10,9) = 13
		END

		IF $CASTLE_LOCKED_ROOM2 = 1
		THEN
			SET TILE (10,9) = 0
		END
		
		#LIFE RECHARGE HAS NOT BEEN USED
		IF $LIFE_06 = 0
		THEN
			SET TILE (1,8) = 16
		END
		
		#LIFE RECHARGE HAS BEEN USED
		IF $LIFE_06 = 1
		THEN
			SET TILE (1,8) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 4
	IF PLAYER_IN_X 0, 15
    IF PLAYER_IN_Y 81, 111
    THEN
		SET $WARPED_TO_HERE = 10
		WARP_TO_LEVEL 4, 11, 12, 6, 1
    END
	
	IF PLAYER_TOUCHES 1, 8
	IF $LIFE_06 = 0
	THEN
		EXTERN 2 
		#TEXT YOU HAVE RECHARGED YOUR LIFE
		
		RECHARGE 
		#RECHARGE YOUR LIFE
		
		SET $LIFE_06 = 1
		#SHOW THAT RECHARGE HAS ALREADY BEEN USED
		
		REDRAW 
		#CLEARS THE TEXT
		
		REHASH 
		#FORCE ENTERING SCREEN AND REPLACE SPIKES
	END	
END

#BOOK DEALER
ENTERING SCREEN 7
	IF TRUE
	THEN		
		IF $TALK_BOOK_DEALER < 2
		THEN
			SET_FIRE_ZONE 97, 49, 127, 79
		END
		
		#house turns into a pile of bricks after you
		#return the orbs back to the librarian
		#to prevent reentry
		IF $TALK_BOOK_DEALER = 2
		THEN
			SET_FIRE_ZONE 0,0,0,0
			SET TILE (6,3) = 2
			SET TILE (7,3) = 2
			SET TILE (8,3) = 2
			SET TILE (6,4) = 2
			SET TILE (7,4) = 2
			SET TILE (8,4) = 2
			SET TILE (6,5) = 2
			SET TILE (7,5) = 2
			SET TILE (8,5) = 2
 		END		
	END
END

PRESS_FIRE AT SCREEN 7
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 49, 79
    THEN
		SET $WARPED_TO_HERE = 91
		WARP_TO_LEVEL 9, 7, 7, 8, 1
    END
	
	IF PLAYER_TOUCHES 5, 4
	THEN
		EXTERN 45
		#Librarian sign
		
		REDRAW
	END	
END


ENTERING SCREEN 8	
	IF TRUE
	THEN
	
		SET_FIRE_ZONE 21, 124, 203, 139
		
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $MOVED_TILE_FLAG = 0
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		
		#do you have the staff part 1
		IF $HAVE_STAFF_ONE = 0		
		THEN
			SET TILE (10,6) = 30
		END
		
		IF $HAVE_STAFF_ONE = 1
		THEN
			SET TILE (10,6) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 8

	#RESET SWITCH 1
	#triggered when you touch the reset switch
	IF $SWITCH_1 = 1
	IF $HAVE_STAFF_ONE = 1
	IF PLAYER_IN_X 192, 203
    IF PLAYER_IN_Y 124, 139
    THEN
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $HAVE_STAFF_ONE = 0
		SET TILE (14,4) = 0
		PRINT_TILE_AT (2, 22) = 47
		DEC $NUMBER_STAFF_HALVES, 1
		REENTER
    END
	
	#RESET SWITCH 2
	#triggered when you touch the reset switch
	IF $SWITCH_1 = 1
	IF $HAVE_STAFF_ONE = 1
	IF PLAYER_IN_X 21, 43
    IF PLAYER_IN_Y 124, 139
    THEN
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $HAVE_STAFF_ONE = 0
		SET TILE (14,4) = 0
		PRINT_TILE_AT (2, 22) = 47
		DEC $NUMBER_STAFF_HALVES, 1
		REENTER
    END
	
	#RESET SWITCH 3
	#triggered when you touch the reset switch
	IF $SWITCH_1 = 1
	IF $HAVE_STAFF_ONE = 1
	IF PLAYER_IN_X 133, 155
    IF PLAYER_IN_Y 124, 139
    THEN
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $HAVE_STAFF_ONE = 0
		SET TILE (14,4) = 0
		PRINT_TILE_AT (2, 22) = 47
		DEC $NUMBER_STAFF_HALVES, 1
		REENTER
    END
	
	
	#COLLECT STAFF
	IF PLAYER_TOUCHES 10, 6
	IF $HAVE_STAFF_ONE = 0
	THEN
		EXTERN 56
		#you now have the STAFF HALF
		
		SET TILE (10, 6) = 0
		SET $HAVE_STAFF_ONE = 1
		INC $NUMBER_STAFF_HALVES, 1
		SET $SWITCH_1 = 1
		PRINT_TILE_AT (2, 22) = 30
		#SHOWS STAFF 2 IN BOTTOM
		
		SET $STAFF_ONE_GATE = 1
		SET TILE (10,0) = 13 
		#BLOCKS GATE
		
		SET TILE (10,5) = 0 #BREAKABLE
		
		SET TILE (2,8) = 27 
		#RESET
		SET TILE (9,8) = 27 
		#RESET
		SET TILE (12,8) = 27 
		#RESET
		REDRAW
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 1
	IF $MOVED_Y_FLAG = 1
	THEN
		SET $SWITCH_2 = 1
		#SET TILE(14,4) = 0
	END
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 13
	IF $MOVED_Y_FLAG = 1
	THEN
		SET $SWITCH_3 = 1
	END
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 1
	IF $MOVED_Y_FLAG = 8
	THEN
		SET $SWITCH_4 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 13
	IF $MOVED_Y_FLAG = 8
	THEN
		SET $SWITCH_5 = 1
	END
	
	#OPENS DOOR
	# when all the switches are set to 1
	IF $SWITCH_2 = 1
	IF $SWITCH_3 = 1
	IF $SWITCH_4 = 1
	IF $SWITCH_5 = 1
	THEN
		SET TILE(10,0) = 0
	END
	
END




ENTERING SCREEN 10
	IF TRUE
	THEN
	
		#TEMP COMMENT FOR REAL PLAY
		#SET $HAVE_MAGENTA_ORB = 1
		
		#WILL ONLY OPEN IF YOU HAVE MAGENTA ORB
		#otherwise hidden from you
		IF $HAVE_MAGENTA_ORB = 0
		THEN
			SET TILE (14,5) = 2
		END
		IF $HAVE_MAGENTA_ORB = 1
		THEN
			SET TILE (14,5) = 0
		END
		
		#HAVENT TALKED TO BOOM BETTY SO NO DYNOMITE SHOWN
		IF $TALK_BOOM_BETTY < 2
		THEN
			SET TILE (1, 1) = 0
		END
		
		#TALKED TO BOOM BETTY AND HAVE NOT COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_3 = 0
		THEN
			SET TILE (1, 1) = 26
		END
		
		#TALKED TO BOOM BETTY AND HAVE COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_3 = 1
		THEN
			SET TILE (1, 1) = 0
		END
		
		
	END
END

PRESS_FIRE AT SCREEN 10

	#DYNOMITE OK
	IF $TALK_BOOM_BETTY = 2
	IF PLAYER_TOUCHES 1,1
	IF $DYNOMITE_3 = 0
	THEN
		EXTERN 70
		#text YOU FOUND DYNOMITE
		
		SET TILE (1, 1) = 0
		#remove DYNOMITE from screen
		
		SET $DYNOMITE_3 = 1
		#set flag showing you have DYNOMITE
		
		INC $NEED_DYNAMITE , 1
		#increase the number of orbs
		
		PRINT_TILE_AT (6, 22) = 26
		#shows DYNOMITE in bottom
		
		REDRAW 
		# refresh the screen
	END
END




ENTERING SCREEN 11
	IF TRUE
	THEN	
	END
END

PRESS_FIRE AT SCREEN 11
#sign
	IF PLAYER_TOUCHES 1, 3
	THEN
		EXTERN 61
		#SIGN INVISIBLE MAZE
		REDRAW
	END
END


ENTERING SCREEN 12
	IF TRUE
	THEN
		IF $HAVE_RED_ORB = 0
		THEN
			SET TILE (6, 4) = 18
		END
		
		IF $HAVE_RED_ORB = 1
		THEN
			SET TILE (6, 4) = 0
		END		
	END
END

PRESS_FIRE AT SCREEN 12	
	#ORB
	IF PLAYER_TOUCHES 6,4
	IF $HAVE_RED_ORB = 0
	THEN
		EXTERN 46
		#YOU FOUND A ORB
		
		SET TILE (6, 4) = 0
		SET $HAVE_RED_ORB = 1
		INC $NUMBER_OF_ORBS , 1
		
		PRINT_TILE_AT (10, 22) = 18
		#shows ORB in bottom
		
		REDRAW
		WARP_TO 1, 8, 1		
	END	
END

ENTERING SCREEN 13
	IF TRUE
	THEN
		SET_FIRE_ZONE 193, 130, 223, 159
	END
END

PRESS_FIRE AT SCREEN 13
	#13,9
	IF PLAYER_IN_X 192, 223
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 12	
		WARP_TO_LEVEL 2, 2, 4, 2, 1
    END	
END


#INVISIBLE MAZE
ENTERING SCREEN 15
	IF TRUE
	THEN
	
		SET_FIRE_ZONE 9, 9, 71, 23 
		#reset switch
		
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		SET $SWITCH_10 = 0
		#reset switch
			
		SET $MOVED_TILE_FLAG = 0
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		
	
	END
END

PRESS_FIRE AT SCREEN 15

	#sign
	IF PLAYER_TOUCHES 13, 1
	THEN
		EXTERN 62#TEXT ZX
		REDRAW
	END
	
	#RESET SWITCH
	#triggered when you touch the reset switch
	IF PLAYER_IN_X 9, 71
    IF PLAYER_IN_Y 9, 23
	IF $SWITCH_10 = 1
    THEN
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		
		SET $SWITCH_10 = 0
		#reset switch
		
		REENTER
    END

	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 5
	IF $MOVED_Y_FLAG = 3
	THEN
		SET $SWITCH_1 = 1
		SET $SWITCH_10 = 1
	END
	
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 4
	IF $MOVED_Y_FLAG = 4
	THEN
		SET $SWITCH_2 = 1
		SET $SWITCH_10 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 3
	IF $MOVED_Y_FLAG = 5
	THEN
		SET $SWITCH_3 = 1
		SET $SWITCH_10 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 2
	IF $MOVED_Y_FLAG = 6
	THEN
		SET $SWITCH_4 = 1
		SET $SWITCH_10 = 1
	END
	#completes Z
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 8
	IF $MOVED_Y_FLAG = 7
	THEN
		SET $SWITCH_5 = 1
		SET $SWITCH_10 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 10
	IF $MOVED_Y_FLAG = 4
	THEN
		SET $SWITCH_6 = 1
		SET $SWITCH_10 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 10
	IF $MOVED_Y_FLAG = 5
	THEN
		SET $SWITCH_7 = 1
		SET $SWITCH_10 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 11
	IF $MOVED_Y_FLAG = 4
	THEN
		SET $SWITCH_8 = 1
		SET $SWITCH_10 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 11
	IF $MOVED_Y_FLAG = 5
	THEN
		SET $SWITCH_9 = 1
		SET $SWITCH_10 = 1
	END
	
	#if you form the letters ZX
	IF $SWITCH_1 = 1
	IF $SWITCH_2 = 1
	IF $SWITCH_3 = 1
	IF $SWITCH_4 = 1
	IF $SWITCH_5 = 1
	IF $SWITCH_6 = 1
	IF $SWITCH_7 = 1
	IF $SWITCH_8 = 1
	IF $SWITCH_9 = 1
	THEN
		WARP_TO 12,12,8
	END	
END


END_OF_LEVEL

#end level 5
######


##################################
# Level 6
##################################
INC_DECORATIONS decorations6.spt



#  a rock fall prevents you from moving onwards
#	need 7 STICKS of dynomite to blow 
#	up the rocks, another search and find and another character


ENTERING GAME
	IF TRUE
		IF $WARPED_TO_HERE = 98
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 14, 5, 8
			BREAK
		END
		
		#from level 3
		IF $WARPED_TO_HERE = 5
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 14, 3, 8
			BREAK
		END
		
		#from level 6
		IF $WARPED_TO_HERE = 8
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 15, 13, 3
			BREAK			
		END
		
		#from level 7
		IF $WARPED_TO_HERE = 16
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 15, 13, 2
			BREAK			
		END		
		
		#from level 7 UPPER
		IF $WARPED_TO_HERE = 27
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 3, 13, 7
			BREAK			
		END
		
		#from dungeon 3
		IF $WARPED_TO_HERE = 165
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 10, 8, 3
			BREAK			
		END		
	END
END

ENTERING ANY
	IF TRUE
	THEN
		EXTERN 244 
		#NO WALKING THRU WALLS
	END
END

ENTERING SCREEN 3
	IF TRUE
	THEN
		SET_FIRE_ZONE 209, 97, 239, 127
	END
END

PRESS_FIRE AT SCREEN 3
	IF PLAYER_IN_X 209, 239
    IF PLAYER_IN_Y 97, 127
    THEN
		SET $WARPED_TO_HERE = 26
		WARP_TO_LEVEL 7, 0, 1, 7, 1
    END	
END

ENTERING SCREEN 7
	IF TRUE
	THEN
		#LIFE RECHARGE HAS NOT BEEN USED
		IF $LIFE_08 = 0
		THEN
			SET TILE (13,1) = 16
		END
		#LIFE RECHARGE HAS BEEN USED
		IF $LIFE_08 = 1
		THEN
			SET TILE (13,1) = 0
		END
	END
END

PRESS_FIRE AT SCREEN 7

	IF PLAYER_TOUCHES 13, 1
	IF $LIFE_08 = 0
	THEN
		EXTERN 2 
		#TEXT YOU HAVE RECHARGED YOUR LIFE
		RECHARGE 
		#RECHARGE YOUR LIFE
		SET $LIFE_08 = 1
		#SHOW THAT RECHARGE HAS ALREADY BEEN USED
		REDRAW 
		#CLEARS THE TEXT
		REHASH 
		#FORCE ENTERING SCREEN AND REPLACE SPIKES
	END	
END

ENTERING SCREEN 10
	IF TRUE
	THEN
		# conditional
		#SET TILE (7,3) = 20 
		#SET_FIRE_ZONE 113, 17, 143, 47
	END
END

PRESS_FIRE AT SCREEN 10
	IF PLAYER_IN_X 113, 143
    IF PLAYER_IN_Y 17, 47
    THEN
		#SET $WARPED_TO_HERE = 170
		#WARP_TO_LEVEL 12, 1, 7, 7, 1
    END	
END

ENTERING SCREEN 12
	IF TRUE
	THEN
		
		#HAVENT TALKED TO BOOM BETTY SO NO DYNOMITE SHOWN
		IF $TALK_BOOM_BETTY < 2
		THEN
			SET TILE (4, 7) = 0
		END
		
		#TALKED TO BOOM BETTY AND HAVE NOT COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_2 = 0
		THEN
			SET TILE (4, 7) = 38
		END
		
		#TALKED TO BOOM BETTY AND HAVE COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_2 = 1
		THEN
			SET TILE (4, 7) = 0
		END		
	END
END

PRESS_FIRE AT SCREEN 12

	#DYNOMITE
	IF $TALK_BOOM_BETTY = 2
	IF PLAYER_TOUCHES 4,7
	IF $DYNOMITE_2 = 0
	THEN
		EXTERN 70
		#text YOU FOUND DYNOMITE
		SET TILE (4, 7) = 0
		#remove DYNOMITE from screen
		SET $DYNOMITE_2 = 1
		#set flag showing you have DYNOMITE
		INC $NEED_DYNAMITE , 1
		#increase the number of orbs
		PRINT_TILE_AT (4, 22) = 38
		#shows DYNOMITE in bottom
		REDRAW 
		# refresh the screen
	END	
END


ENTERING SCREEN 14
	IF TRUE
	THEN
		SET_FIRE_ZONE 33, 129, 63, 159		
	END
END

PRESS_FIRE AT SCREEN 14
	
	IF PLAYER_IN_X 33, 63
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 13
		WARP_TO_LEVEL 3, 2, 3, 1, 1
    END	
END

ENTERING SCREEN 15
	IF TRUE
	THEN
		SET_FIRE_ZONE 209, 17, 239, 47
	END
END

PRESS_FIRE AT SCREEN 15

	#gateway
	IF PLAYER_IN_X 209, 239
    IF PLAYER_IN_Y 17, 47
    THEN
		SET $WARPED_TO_HERE = 14
		
		#jump to level 7		
		WARP_TO_LEVEL 7, 12, 1, 2, 1
    END
END

END_OF_LEVEL
end level 6

##################################
# Level 7
##################################
INC_DECORATIONS decorations7.spt

ENTERING GAME
	IF TRUE
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		SET $SWITCH_10 = 0
		SET $SWITCH_11 = 0
		SET $SWITCH_12 = 0
		SET $SWITCH_13 = 0
		SET $SWITCH_14 = 0
		SET $SWITCH_15 = 0
		SET $SWITCH_16 = 0
		SET $SWITCH_17 = 0
		SET $SWITCH_18 = 0
		SET $SWITCH_19 = 0
		SET $SWITCH_20 = 0
		SET $SWITCH_21 = 0
		SET $SWITCH_22 = 0
		SET $SWITCH_23 = 0
		SET $SWITCH_24 = 0
		SET $SWITCH_25 = 0
		SET $SWITCH_26 = 0
		SET $SWITCH_27 = 0
		
		#from level 6
		IF $WARPED_TO_HERE = 14
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 12, 1, 2
			BREAK
		END
		
		#from level 4
		IF $WARPED_TO_HERE = 15
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 15, 5, 8
			BREAK			
		END

		#from level 6 UPPER
		IF $WARPED_TO_HERE = 26
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 0, 1, 7
			BREAK
		END
		
		#from level 8 UPPER
		IF $WARPED_TO_HERE = 29
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 3, 13, 4
			BREAK
		END
		
		#from BOOM BOOM BETTY
		IF $WARPED_TO_HERE = 84
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 7, 6, 3
			BREAK
		END
		
		#TEMP
		IF $WARPED_TO_HERE = 98
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 11, 8, 3
			#WARP_TO 15, 8, 3
			BREAK			
		END
		
	END
END

ENTERING ANY
	IF TRUE
	THEN
		EXTERN 245 
		#WALK THRU WALLS ON
	END
END


ENTERING SCREEN 0
	IF TRUE
	THEN
		SET_FIRE_ZONE 0, 97, 15, 127		
	END
END

PRESS_FIRE AT SCREEN 0
	IF PLAYER_IN_X 0, 15
    IF PLAYER_IN_Y 97, 127
    THEN
		SET $WARPED_TO_HERE = 27
		WARP_TO_LEVEL 6, 3, 13, 7, 1
    END	
END

ENTERING SCREEN 1
	IF TRUE
	THEN
		
	END
END

ENTERING SCREEN 2
	IF TRUE
	THEN
		
	END
END

ENTERING SCREEN 3
	IF TRUE
	THEN
		SET_FIRE_ZONE 209, 49, 239, 79
	END
END

PRESS_FIRE AT SCREEN 3
	IF PLAYER_IN_X 209, 239
    IF PLAYER_IN_Y 49, 79
    THEN
		SET $WARPED_TO_HERE = 28
		WARP_TO_LEVEL 8, 0, 1, 7, 4
    END	
END

ENTERING SCREEN 4
	IF TRUE
	THEN
		#LIFE RECHARGE HAS NOT BEEN USED
		IF $LIFE_08 = 0
		THEN
			SET TILE (1,2) = 16
		END
		
		#LIFE RECHARGE HAS BEEN USED
		IF $LIFE_08 = 1
		THEN
			SET TILE (1,2) = 0
		END		
	END
END

PRESS_FIRE AT SCREEN 4

	IF PLAYER_TOUCHES 1, 2
	IF $LIFE_08 = 0
	THEN
		EXTERN 2 
		#TEXT YOU HAVE RECHARGED YOUR LIFE
		
		RECHARGE 
		#RECHARGE YOUR LIFE
		
		SET $LIFE_08 = 1
		#SHOW THAT RECHARGE HAS ALREADY BEEN USED
		
		REDRAW 
		#CLEARS THE TEXT
		
		REHASH 
		#FORCE ENTERING SCREEN AND REPLACE SPIKES
	END
END


ENTERING SCREEN 7
	IF TRUE
	THEN
		#DOOR AT 6,2
		#SIGN AT 4,2
		SET_FIRE_ZONE 89, 25, 103, 39
	END
END


PRESS_FIRE AT SCREEN 7

	IF PLAYER_IN_X 89, 103
    IF PLAYER_IN_Y 25, 39
    THEN
		SET $WARPED_TO_HERE = 95
		WARP_TO_LEVEL 9, 10, 5, 9, 4
    END	

	IF PLAYER_TOUCHES 4,2
	THEN
		EXTERN 64
		REDRAW
	END
END

#this is where the other haf of the staff is located
#find and return to the wizard
ENTERING SCREEN 8	
IF TRUE
	THEN	
		SET_FIRE_ZONE 37, 45, 59, 74
		
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $MOVED_TILE_FLAG = 0
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		
		IF $HAVE_STAFF_TWO = 0
		THEN
			SET TILE (1,3) = 38
		END
		IF $HAVE_STAFF_TWO = 1
		THEN
			SET TILE (1,3) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 8

	#RESET SWITCH
	#touching the reset switch
	IF $SWITCH_1 = 1
	IF $HAVE_STAFF_TWO = 1
	IF PLAYER_IN_X 37, 59
    IF PLAYER_IN_Y 45, 74
    THEN
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $HAVE_STAFF_TWO = 0
		SET TILE (14,4) = 5
		PRINT_TILE_AT (0, 22) = 47
		DEC $NUMBER_STAFF_HALVES, 1
		REENTER
    END
	
	#COLLECT STAFF
	IF PLAYER_TOUCHES 1, 3
	IF $HAVE_STAFF_TWO = 0
	THEN
		EXTERN 56
		#you now have the STAFF HALF
		SET TILE (1, 3) = 0
		SET $HAVE_STAFF_TWO = 1
		#SET $TALK_WIZARD = 1
		INC $NUMBER_STAFF_HALVES, 1
		SET $SWITCH_1 = 1
		PRINT_TILE_AT (0, 22) = 38
		#SHOWS STAFF 2 IN BOTTOM
		SET $STAFF_TWO_GATE = 1
		SET TILE (14,4) = 13
		REDRAW
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 1
	IF $MOVED_Y_FLAG = 1
	THEN
		SET $SWITCH_2 = 1
		#SET TILE(14,4) = 0
	END
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 13
	IF $MOVED_Y_FLAG = 1
	THEN
		SET $SWITCH_3 = 1
	END
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 1
	IF $MOVED_Y_FLAG = 8
	THEN
		SET $SWITCH_4 = 1
	END
	
	#BLOCK PUZZLE
	IF $MOVED_X_FLAG = 13
	IF $MOVED_Y_FLAG = 8
	THEN
		SET $SWITCH_5 = 1
	END
	
	#OPENS DOOR
	IF $SWITCH_2 = 1
	IF $SWITCH_3 = 1
	IF $SWITCH_4 = 1
	IF $SWITCH_5 = 1
	THEN
		SET TILE(14,4) = 0
	END		
END


ENTERING SCREEN 12
	IF TRUE
	THEN	
		SET_FIRE_ZONE 0, 17, 15, 47
		
		#TEMP, FOR REAL PLAY COMMENT LINE BELOW
		# SET $ALL_GATES_OPEN = 1
		
		IF $ALL_GATES_OPEN = 0
		THEN
			SET TILE (1,2) = 20
		END
		IF $ALL_GATES_OPEN = 1
		THEN
			SET TILE (1,2) = 0
		END
	END
END

PRESS_FIRE AT SCREEN 12
	IF PLAYER_IN_X 0, 15
    IF PLAYER_IN_Y 17, 47
    THEN
		SET $WARPED_TO_HERE = 16
		WARP_TO_LEVEL 6, 15, 13, 2, 1
    END	
END

ENTERING SCREEN 13
	IF TRUE
	THEN		
		#HAVENT TALKED TO BOOM BETTY SO NO DYNOMITE SHOWN
		IF $TALK_BOOM_BETTY < 2
		THEN
			SET TILE (1, 1) = 0
		END
		
		#TALKED TO BOOM BETTY AND HAVE NOT COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_1 = 0
		THEN
			SET TILE (1, 1) = 30
		END
		
		#TALKED TO BOOM BETTY AND HAVE COLLECTED DYNOMITE
		IF $TALK_BOOM_BETTY = 2
		IF $DYNOMITE_1 = 1
		THEN
			SET TILE (1, 1) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 13

	#DYNOMITE OK
	IF $TALK_BOOM_BETTY = 2
	IF PLAYER_TOUCHES 1,1
	IF $DYNOMITE_1 = 0
	THEN
		EXTERN 70
		#text YOU FOUND DYNOMITE
		SET TILE (1, 1) = 0
		#remove DYNOMITE from screen
		SET $DYNOMITE_1 = 1
		#set flag showing you have DYNOMITE
		INC $NEED_DYNAMITE , 1
		#increase the number of orbs
		PRINT_TILE_AT (2, 22) = 30
		#shows DYNOMITE in bottom
		REDRAW 
		# refresh the screen
	END	
	
END



ENTERING SCREEN 15
	IF TRUE
	THEN	
		#SET_FIRE_ZONE 169, 73, 215, 135
		SET_FIRE_ZONE 65, 73, 215, 159
		
		#TEMP, FOR REAL PLAY COMMENT LINE BELOW
		#SET $SWITCH_27 = 1

	END
END

PRESS_FIRE AT SCREEN 15

	IF PLAYER_TOUCHES 13,8
	THEN
		SET TILE (5,1) = 0
	END
	
	IF PLAYER_TOUCHES 12,8
	THEN
		SET TILE (5,1) = 5
	END

	#gateway LEVEL 4
	IF PLAYER_IN_X 65, 95
	IF PLAYER_IN_Y 129, 159
	THEN
		SET $WARPED_TO_HERE = 23
		WARP_TO_LEVEL 4, 3, 10, 1, 1
	END
END


END_OF_LEVEL
#end level 7

##################################
# Level 8
##################################
INC_DECORATIONS decorations8.spt

ENTERING GAME
	IF TRUE
		#from level 7 UPPER
		IF $WARPED_TO_HERE = 28
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 0, 1, 4
			BREAK
		END
		
		#from level 5
		IF $WARPED_TO_HERE = 20
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 15, 10, 8
			BREAK			
		END
		
		#from dungeon 3
		IF $WARPED_TO_HERE = 165
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 11, 6, 5
			BREAK			
		END	
		
		#TEMP
		IF $WARPED_TO_HERE = 98
		THEN
			SET $WARPED_TO_HERE = 0
			#WARP_TO 2, 6, 7
			WARP_TO 11, 6, 4
			BREAK			
		END	
		
	END
END

ENTERING ANY
	IF TRUE
	THEN
		EXTERN 244 #NO WALKING THRU WALLS
		
		#TEMP FOR TESTING COMMENT FOR REAL PLAY
		#SET $DUNGEON_THREE_CONQUERED = 1
	END
END

ENTERING SCREEN 0
	IF TRUE
	THEN
		# 0	7
		SET_FIRE_ZONE 0, 49, 15, 79
	END
END

PRESS_FIRE AT SCREEN 0
	IF PLAYER_IN_X 0, 15
    IF PLAYER_IN_Y 49, 79
    THEN
		SET $WARPED_TO_HERE = 29
		WARP_TO_LEVEL 7, 3, 13, 4, 1
    END	
END

ENTERING SCREEN 1
	IF TRUE
	THEN
	
		SET_FIRE_ZONE 0, 25, 7, 145
		#0-1 X
		#2-8 Y
		
		IF $ROCK_SLIDE = 0
		THEN
			SET TILE (14,2) = 18
		END
		
		IF $ROCK_SLIDE = 1
		THEN
			SET TILE (14,2) = 0
		END
		
		#NEED FIRE ZONE WHEN YOU COME INTO 
		#THE SCREEN THAT RECOGNIZES THERE IS A 
		#BOULDER IN THE WAY, THIS WILL 
		#SET TALK_BOOM_BETTY TO 1 
		#WHERE SHE WILL GIVE YOU A QUEST
		
		#$SEE_LANDSLIDE = 0
		
	END
END

PRESS_FIRE AT SCREEN 1

	IF PLAYER_TOUCHES 13, 3
	THEN
		EXTERN 65
		REDRAW		
	END	
	
	IF PLAYER_IN_X 0, 15
    IF PLAYER_IN_Y 7, 143
	IF $SEE_LANDSLIDE = 0
    THEN
		SET $SEE_LANDSLIDE = 1
		SET $TALK_BOOM_BETTY = 1
		EXTERN 65
		REDRAW		
    END	
END

ENTERING SCREEN 7
	IF TRUE
	THEN

		#LIFE RECHARGE HAS NOT BEEN USED
		IF $LIFE_09 = 0
		THEN
			SET TILE (2,1) = 16
		END
		
		#LIFE RECHARGE HAS BEEN USED
		IF $LIFE_09 = 1
		THEN
			SET TILE (2,1) = 0
		END

	END
END

PRESS_FIRE AT SCREEN 7

	IF PLAYER_TOUCHES 2, 1
	IF $LIFE_09 = 0
	THEN
		EXTERN 2 
		#TEXT YOU HAVE RECHARGED YOUR LIFE
		RECHARGE 
		#RECHARGE YOUR LIFE
		SET $LIFE_09 = 1
		#SHOW THAT RECHARGE HAS ALREADY BEEN USED
		REDRAW 
		#CLEARS THE TEXT
		REHASH 
		#FORCE ENTERING SCREEN AND REPLACE SPIKES
	END	

END

ENTERING SCREEN 8
	IF TRUE
	THEN	
		IF $DUNGEON_THREE_CONQUERED = 0
		THEN
			SET TILE(1,9) = 8
		END
		IF $DUNGEON_THREE_CONQUERED = 1
		THEN
			SET TILE(1,9) = 0
		END		
	END
END


ENTERING SCREEN 11	
	IF TRUE
	THEN
		EXTERN 246 #LIGHTS ON
		REDRAW
		
		# conditional
		#SET TILE (8,3) = 20 
		#end conditional
		SET_FIRE_ZONE 81, 41, 103, 60
		
		IF $DUNGEON_THREE_CONQUERED = 0
		THEN
			SET TILE(6,4) = 0
		END
		
		IF $DUNGEON_THREE_CONQUERED = 1
		THEN
			SET TILE(6,4) = 20
		END
	END
END

PRESS_FIRE AT SCREEN 11

	#gateway
	IF PLAYER_IN_X 89, 103
    IF PLAYER_IN_Y 41, 60
    THEN
		SET $WARPED_TO_HERE = 180
		
		WARP_TO_LEVEL 12, 15, 10, 8, 1
    END
	
END

ENTERING SCREEN 12
	IF TRUE
	THEN
	
		IF $DUNGEON_THREE_CONQUERED = 0
		THEN
			SET TILE(1,0) = 8
		END
		IF $DUNGEON_THREE_CONQUERED = 1
		THEN
			SET TILE(1,0) = 0
		END
		
	END
END

ENTERING SCREEN 15
	IF TRUE
	THEN
		SET_FIRE_ZONE 145, 129, 175, 159
	END
END

PRESS_FIRE AT SCREEN 15
	
	#gateway
	IF PLAYER_IN_X 145, 175
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 19
		WARP_TO_LEVEL 5, 3, 10, 1, 1
    END
	
END

END_OF_LEVEL
#end level 8

##################################
# Level 9	INSIDE HOUSES
# HERE you receive all of your quests
##################################
INC_DECORATIONS decorations9.spt

#actors
#	$TALK_ISLAND_KEEPER 2
#	$TALK_GATE_KEEPER 3
#	$TALK_DUNGEON_GATEMASTER 4
#	$TALK_WOODSMAN 5
#	$TALK_BLACKSMITH 6
#	$TALK_ISLAND_KEEPER_DAUGHTER 7
#	$TALK_MOTHER_DUNGEON_GATEMASTER 8
#	$TALK_GATEKEEPER 9
#	$TALK_HUNGRY_MAGICIAN 9
#	$TALK_MAGICIAN_COUSIN 10
#	$TALK_DESERT_GATEMASTER 11
#	$TALK_DEMOLITION_EXPERT 12

ENTERING GAME
	IF TRUE
		#from level 0 Island Keeper
		IF $WARPED_TO_HERE = 75
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 1, 7, 8
			BREAK
		END
		
		#from level 0 child gatekeeper
		IF $WARPED_TO_HERE = 77
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 0, 7, 8
			BREAK
		END
		
		#woodsman
		IF $WARPED_TO_HERE = 79
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 2, 7, 8
			BREAK
		END
		
		#caveman
		IF $WARPED_TO_HERE = 81
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 3, 7, 8
			BREAK
		END
		
		#BLACKSMITH
		IF $WARPED_TO_HERE = 83
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 4, 7, 8
			BREAK
		END
		
		#HUNGRY MAGICIAN
		IF $WARPED_TO_HERE = 85
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 5, 7, 8
			BREAK
		END
		
		#MAGICIAN BROTHER
		IF $WARPED_TO_HERE = 87
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 6, 7, 8
			BREAK
		END
		
		#DESERT GATEMASTER
		IF $WARPED_TO_HERE = 89
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 7, 7, 8
			BREAK
		END
		
		#DESERT GATEMASTER
		IF $WARPED_TO_HERE = 91
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 8, 7, 8
			BREAK
		END
		
		#WIZARD
		IF $WARPED_TO_HERE = 93
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 9, 7, 8
			BREAK
		END
		
		#$TALK_DEMOLITION_EXPERT
		IF $WARPED_TO_HERE = 95
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 10, 7, 8
			BREAK
		END
		
		IF $WARPED_TO_HERE = 99
		THEN
			SET $ENEMS_KILLED = 0
			SET $SWITCH_8 = 0
			SET $SWITCH_SPIKES = 0
			
			SET $WARPED_TO_HERE = 0			
			WARP_TO 12, 13, 8
			BREAK
		END	

END

#CHILD GATEKEEPER
ENTERING SCREEN 0
	IF TRUE
	THEN
	
		SET_FIRE_ZONE 97, 129, 127, 159
		
		#this is obsolete, leaving it in for now
		IF $TALK_WOODSMAN = 0
		THEN
			SET TILE (12,3) = 0
		END
		#this is obsolete, leaving it in for now
		IF $TALK_WOODSMAN = 3
		THEN
			SET TILE (12,3) = 0
		END
		#this is obsolete, leaving it in for now
		IF $HAVE_TEDDY_BEAR = 1
		THEN
			SET TILE (12,3) = 0
		END			
	END
END

PRESS_FIRE AT SCREEN 0

	IF $TALK_MOTHER_DUNGEON_GATEMASTER = 99
	IF PLAYER_TOUCHES 7, 6
	THEN
		EXTERN 10
		#TALK TO MY DAUGHTER
		REDRAW
	END
	
	#TALK TO MY DAUGHTER
	IF $TALK_MOTHER_DUNGEON_GATEMASTER = 0
	IF PLAYER_TOUCHES 7, 6
	THEN
		EXTERN 12
		#TALK TO MY DAUGHTER
		REDRAW
	END
	
	IF $TALK_DUNGEON_GATEMASTER = 99
	IF PLAYER_TOUCHES 10, 2
	THEN
		EXTERN 10
		#HOW CAN I HELP YOU
		REDRAW
	END	
	
	IF $TALK_DUNGEON_GATEMASTER = 0
	IF PLAYER_TOUCHES 10, 2
	IF $TALK_WOODSMAN = 1
	THEN
		EXTERN 13
		#BOOHOO
		REDRAW		
	END
	
	#FIND MY TEDDYBEAR
	IF $TALK_DUNGEON_GATEMASTER = 0
	IF PLAYER_TOUCHES 10, 2
	IF $TALK_WOODSMAN = 0
	THEN
		SET $TALK_WOODSMAN = 1
		EXTERN 13
		#BOOHOO
		REDRAW
	END
	
	#FOUND TEDDYBEAR WILL NOW OPEN DUNGEON
	IF $TALK_DUNGEON_GATEMASTER = 1
	IF PLAYER_TOUCHES 10, 2
	THEN
		EXTERN 20
		#THANK YOU FOR GETTING TEDDYBEAR
		SET $DUNGEON_ONE_OPEN = 1
		PRINT_TILE_AT (0, 22) = 47
		#CLEARS TEDDY BEAR
		
		REDRAW
		
		SET $TALK_DUNGEON_GATEMASTER = 99
		SET $TALK_MOTHER_DUNGEON_GATEMASTER = 99
		#now they both ask if they can help you
	END	
	
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 78
		WARP_TO_LEVEL 0, 4, 7, 7, 1
    END
END

#ISLAND KEEPER
ENTERING SCREEN 1
	IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159
	END
END

PRESS_FIRE AT SCREEN 1	
IF $TALK_ISLAND_KEEPER < 2
	IF PLAYER_TOUCHES 8, 5
	THEN
		EXTERN 11
		#TEXT please help us stranger
		SET $TALK_ISLAND_KEEPER = 1
		REDRAW
	END
		
	IF $TALK_ISLAND_KEEPER_DAUGHTER = 0
	IF PLAYER_TOUCHES 2, 2
	THEN
		EXTERN 11
		#TEXT please help us stranger
		SET $TALK_ISLAND_KEEPER = 1
		REDRAW
	END
		
	#WARP TO LEVEL 0 IN FRONT OF GATEKEEPER HOUSE
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 76
		WARP_TO_LEVEL 0, 10, 12, 7, 1
    END	
END

#woodsman
ENTERING SCREEN 2
IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159		
	END
END

PRESS_FIRE AT SCREEN 2
	#NOTHING TO SAY
 	IF $TALK_WOODSMAN = 0 
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 10 
		# HOW CAN I HELP YOU
		REDRAW
	END	
	
	#FIND THE AXE
	IF $TALK_WOODSMAN = 1
	IF PLAYER_TOUCHES 9, 5
	THEN
		SET $FOREST_GATE = 1
		EXTERN 15
		#I WILL HELP YOU WITH THE TEDDYBEAR
		REDRAW
	END
	
	#AXE IS FOUND BUT RUSTY
	IF $TALK_WOODSMAN = 2
	IF $FIREFLOWER_GATE = 0
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 16
		#my axe is rusty
		REDRAW
		SET $TALK_BLACKSMITH = 1
	END
	
	IF $TALK_WOODSMAN = 3
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 19
		# THANK YOU FOR FIXING MY AXE
		REDRAW
		SET $FIREFLOWER_GATE = 0
		PRINT_TILE_AT (0, 22) = 47
		#REMOVES AXE in bottom
		SET $TEDDYBEAR_GATE = 1
		SET $TALK_WOODSMAN = 0
	END
	
		
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 80
		WARP_TO_LEVEL 0, 6, 7, 7, 1
    END
END

#gatekeeper /caveman
ENTERING SCREEN 3
IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159
	END
END

#gatekeeper /caveman
PRESS_FIRE AT SCREEN 3

	IF $TALK_GATEKEEPER = 99
	IF PLAYER_TOUCHES 10, 5
	THEN
		EXTERN 10
		#YOU MUST CONQUER THE DUNGEON BEFORE YOU CAN GO NORTH.
		REDRAW
	END

	#YOU CANNOT PASS THE GATE
	IF $TALK_GATEKEEPER = 0
	IF PLAYER_TOUCHES 10, 5
	THEN
		EXTERN 14
		#YOU MUST CONQUER THE DUNGEON BEFORE YOU CAN GO NORTH.
		REDRAW
	END
	
	#you can now pass the gate
	IF $TALK_GATEKEEPER = 1
	IF PLAYER_TOUCHES 10, 5
	THEN
		EXTERN 21
		# YOU HAVE CONQURED THE DUNGEON
		
		PRINT_TILE_AT (0, 22) = 47
		#remove the sceptre from inventory
		
		REDRAW
		
		SET $SWAMP_GATE = 1
		SET $TALK_GATEKEEPER = 99
	END

	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 82
		WARP_TO_LEVEL 0, 1, 10, 1, 1
    END
END

#blacksmith
ENTERING SCREEN 4
IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159
	END
END

#blacksmith
PRESS_FIRE AT SCREEN 4
	#NOTHING TO SAY
 	IF $TALK_BLACKSMITH = 0 
	IF PLAYER_TOUCHES 7, 5
	THEN
		EXTERN 10 
		#30 HOW CAN I HELP YOU
		REDRAW
	END
	
	IF $TALK_BLACKSMITH = 1
	IF PLAYER_TOUCHES 7, 5
	THEN
		EXTERN 17
		#I WILL FIX THE AXE, BUT I WILL NEED TO USE MY FORGE
		REDRAW
		SET $FIREFLOWER_GATE = 1
	END
	
	#FLOWER IS FOUND FIXING AXE
	IF $TALK_BLACKSMITH = 2
	IF PLAYER_TOUCHES 7, 5
	THEN
		PRINT_TILE_AT (2, 22) = 47
		#REMOVES FLOWER in bottom
		
		EXTERN 18
		#THANK YOU FOR THE FIRE FLOWER.
		REDRAW
		SET $TALK_WOODSMAN = 3
		SET $TALK_BLACKSMITH = 0
	END
	
	
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 84
		WARP_TO_LEVEL 0, 8, 7, 4, 1
    END
END

#HUNGRY MAGICIAN
ENTERING SCREEN 5
IF TRUE
	THEN
		SET_FIRE_ZONE 109, 129, 115, 157
	END
END

#HUNGRY MAGICIAN
PRESS_FIRE AT SCREEN 5

	IF $HAVE_CRAB_CLAW = 1
	IF $HAVE_GIANT_CLAM = 1
	IF $HAVE_FROG = 1
	THEN
		SET $TALK_HUNGRY_MAGICIAN = 2
	END		
	
	IF $TALK_HUNGRY_MAGICIAN = 1
	IF PLAYER_TOUCHES 8, 6
	THEN
		EXTERN 23
		#YOU DO NOT HAVE ALL THREE ITEMS.
		
		REDRAW
	END
	
	IF $TALK_HUNGRY_MAGICIAN = 0
	IF PLAYER_TOUCHES 8, 6
	THEN
		SET $TALK_HUNGRY_MAGICIAN = 1
		EXTERN 22
		#MY NAME IS DOUG.
		REDRAW
	END
	
	
	
	IF $TALK_HUNGRY_MAGICIAN = 2
	IF PLAYER_TOUCHES 8, 6
	THEN
		EXTERN 24 
		# YUMM, DINNER!
		SET $MAP4_GATE = 1
		#OPENS GATE
		REDRAW
		
		#CLEAR INVENTORY
		PRINT_TILE_AT (0, 22) = 47
		#REMOVES FROG in bottom
		PRINT_TILE_AT (2, 22) = 47
		#REMOVES CRAB in bottom
		PRINT_TILE_AT (4, 22) = 47
		#REMOVES CLAM in bottom
		PRINT_TILE_AT (6, 22) = 47
		#REMOVES FROGSHIELD in bottom
		
		SET $TALK_HUNGRY_MAGICIAN = 3
		#TRANSPORTS TO START OF LEVEL 3
		SET $WARPED_TO_HERE = 24
		WARP_TO_LEVEL 3, 16, 3, 3, 1
	END
	
	IF $TALK_HUNGRY_MAGICIAN = 3
	IF PLAYER_TOUCHES 8, 6
	THEN
		EXTERN 27
		# I TOLD YOU TO PISS OFF!
		SET $MAP4_GATE = 1
		#OPENS GATE
		#SET $TALK_WIZARD = 0
		REDRAW
		
		#TRANSPORTS TO START OF LEVEL 3		
		SET $WARPED_TO_HERE = 30
		WARP_TO_LEVEL 3, 3, 1, 1, 1
		
	END
	
 	IF PLAYER_IN_X 109, 115
    IF PLAYER_IN_Y 129, 157
    THEN
		SET $WARPED_TO_HERE = 86
		WARP_TO_LEVEL 3, 11, 9, 5, 1
    END
END

#MAGICIAN COUSIN TAKES FROG
ENTERING SCREEN 6
IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159
	END
END

#MAGICIAN COUSIN that ASS
PRESS_FIRE AT SCREEN 6
	
	#NOTHING TO SAY
 	IF $TALK_MAGICIAN_COUSIN = 0
	IF PLAYER_TOUCHES 10, 6
	THEN
		EXTERN 29
		# MY NAME IS ANTHONY.
		REDRAW
	END
	
	#TAKING FROG FOR KEY
	IF $TALK_MAGICIAN_COUSIN = 1 
	IF PLAYER_TOUCHES 10, 6
	THEN
		PRINT_TILE_AT (0, 22) = 47
		#REMOVE FROG in bottom
		
		SET $HAVE_FROG = 0
		EXTERN 25
		# IF YOU WANT THAT KEY,
		
		REDRAW
		SET $SWAMP_KEY_GATE = 1
		#REMOVE BLOCKS TO KEY
		
		SET $TALK_MAGICIAN_COUSIN = 2
		#TRANSPORTS TO START OF LEVEL 3
		
		SET $WARPED_TO_HERE = 24
		WARP_TO_LEVEL 3, 16, 3, 3, 1
	END
	
	IF $TALK_MAGICIAN_COUSIN = 2 
	IF PLAYER_TOUCHES 10, 6
	THEN
		PRINT_TILE_AT (0, 22) = 47
		#REMOVE FROG in bottom
		
		SET $HAVE_FROG = 0
		
		EXTERN 27
		# I TOLD YOU TO PISS OFF!
		REDRAW
		
		#TRANSPORTS TO START OF LEVEL 3
		SET $WARPED_TO_HERE = 24
		WARP_TO_LEVEL 3, 12, 6, 8, 1
	END
	
	
	IF PLAYER_IN_X 109, 115
    IF PLAYER_IN_Y 129, 157
    THEN
		SET $WARPED_TO_HERE = 88
		WARP_TO_LEVEL 3, 1, 9, 5, 1
    END	
END

#DESERT GATEMASTER
ENTERING SCREEN 7
IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159
	END
END

PRESS_FIRE AT SCREEN 7

	IF $TALK_DESERT_GATEMASTER = 0
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 31
		#YOU ARE PROBALLY LOOKING FOR A WAY TO CAPTURE A FROG
		
		EXTERN 41
		#I NEED A BOOK
		
		REDRAW
		
		SET $PLAINS_GATE = 1
		SET $TALK_BOOK_DEALER = 0
	END
	
	#gateway
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 90
		WARP_TO_LEVEL 2, 5, 4, 5, 1
    END
	
	IF $TALK_DESERT_GATEMASTER = 1
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 49
		REDRAW
	END
	
	IF $TALK_DESERT_GATEMASTER = 2
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 50
		EXTERN 51
		PRINT_TILE_AT (10, 22) = 47
		#REMOVES BOOK in bottom
		
		#open dungeon
		SET $DUNGEON_TWO_OPEN = 1		
		REDRAW
	END

	IF $TALK_DESERT_GATEMASTER = 3
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 52
		#SET $TALK_WIZARD = 0
		REDRAW
	END	
END

#BOOK DEALER
ENTERING SCREEN 8
IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159
	END
END

PRESS_FIRE AT SCREEN 8

	IF $TALK_BOOK_DEALER = 0
	IF PLAYER_TOUCHES 4, 7
	THEN
		EXTERN 42
		#I WOULD BE HAPPY TO GET YOU THE BOOK BUT IT WILL COST YOU.
		
		EXTERN 43
		SET $TALK_BOOK_DEALER = 1
		SET $CAN_COLLECT_ORBS = 1
		SET $NUMBER_OF_ORBS = 0
		
		SET $TALK_DESERT_GATEMASTER = 1
		REDRAW		
	END
	
	#IF $NUMBER_OF_ORBS = 4
	IF $TALK_BOOK_DEALER = 1
	IF $HAVE_MAGENTA_ORB = 1
	IF $HAVE_BLUE_ORB = 1
	IF $HAVE_CYAN_ORB = 1
	IF $HAVE_RED_ORB = 1	
	IF PLAYER_TOUCHES 4, 7
	THEN
		EXTERN 47#YOU HAVE 4 ORBS
		
		PRINT_TILE_AT (10, 22) = 47
		#REMOVES ORB in bottom
		
		PRINT_TILE_AT (12, 22) = 47
		#REMOVES ORB in bottom
		
		PRINT_TILE_AT (14, 22) = 47
		#REMOVES ORB in bottom
		
		PRINT_TILE_AT (16, 22) = 47
		#REMOVES ORB in bottom
		
		EXTERN 48
		#evil plan revealed
		#baddies alway do this
		
		PRINT_TILE_AT (10, 22) = 41
		#shows BOOK in bottom
		
		REDRAW
		
		SET $TALK_BOOK_DEALER = 2
		#GIVE BOOK
		
		SET $TALK_DESERT_GATEMASTER = 2
		
		SET $WARPED_TO_HERE = 91
		WARP_TO_LEVEL 5, 11, 7, 5, 1		
	END
	
	
	IF PLAYER_TOUCHES 4, 7
	IF $TALK_BOOK_DEALER = 1
	IF $NUMBER_OF_ORBS <> 4	
	THEN
		EXTERN 44
		#YOU DO NOT HAVE THE 4 ORBS YET
		REDRAW
	END
	
 	#gateway
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $TALK_BOOK_DEALER = 1
		SET $WARPED_TO_HERE = 90
		WARP_TO_LEVEL 5, 7, 7, 5, 1
    END	
END

#ISLAND WIZARD
ENTERING SCREEN 9
IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159
		EXTERN 246 
		#LIGHTS ON
		
		SET $DUNGEON_FOUR_CONQUERED = 1
		
		IF $NUMBER_STAFF_HALVES = 0
		THEN
			SET $TALK_WIZARD = 0
		END
		
		IF $NUMBER_STAFF_HALVES = 1
		THEN
			SET $TALK_WIZARD = 1
		END
		
		IF $NUMBER_STAFF_HALVES = 2
		THEN
			SET $TALK_WIZARD = 2
		END
		
		#THERE ARE NOT 3 HALVES OF THE STAFF
		# WE ARE USING THIS FLAG TO SHOW NEXT DIALOG
		IF $NUMBER_STAFF_HALVES = 3
		THEN
			SET $TALK_WIZARD = 3
		END
		
	END
END

PRESS_FIRE AT SCREEN 9

	IF $TALK_WIZARD = 0
	IF PLAYER_TOUCHES 3, 5
	THEN
		EXTERN 53
		EXTERN 54
		EXTERN 55
		SET $ALL_GATES_OPEN = 0
		SET $CASTLE_LOCKED_ROOM2 = 1
		SET $SWITCH_4 = 1
		
		SET $DUNGEON_FOUR_CONQUERED = 1
		REDRAW
	END	

	IF $TALK_WIZARD = 1
	IF PLAYER_TOUCHES 3, 5
	THEN
		SET $SWITCH_4 = 1
		EXTERN 57
		REDRAW
	END

	IF $TALK_WIZARD = 2
	IF PLAYER_TOUCHES 3, 5
	THEN
		#NOW WE HAVE BOTH HALVES
		SET $SWITCH_4 = 1
		EXTERN 58
		SET $NUMBER_STAFF_HALVES = 3
		#USED TO PUSH THE DIALOG ALONG
		
		SET $ALL_GATES_OPEN = 1
		PRINT_TILE_AT (0, 22) = 47 
		#remove the staff from inventory
		PRINT_TILE_AT (2, 22) = 47
		#remove the staff from inventory
		REDRAW
	END


 	#gateway
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 25
		WARP_TO_LEVEL 4, 5, 13, 1, 1
    END	
END


#BOOM BOOM BETTY
ENTERING SCREEN 10
IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159		
	END
END

PRESS_FIRE AT SCREEN 10	
	
	IF $TALK_BOOM_BETTY = 0
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 10 
		# HOW CAN I HELP YOU
		REDRAW
	END
	
	IF $TALK_BOOM_BETTY = 1
	IF $NEED_DYNAMITE = 0
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 66
		#DYNAMITE QUEST
		EXTERN 67
		#DYNAMITE QUEST
		SET $NEED_DYNAMITE = 0
		#NOW WE ARE USING THIS VARIABLE TO COUNT STICKS OF DYNAMITE
		SET $TALK_BOOM_BETTY = 2
		REDRAW
	END
	
	
	IF $TALK_BOOM_BETTY = 2
	IF $NEED_DYNAMITE < 7
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 68
		#I NEED 7 STICKS
		REDRAW
	END
	
	IF $TALK_BOOM_BETTY = 2
	IF $NEED_DYNAMITE = 7
	IF PLAYER_TOUCHES 9, 5
	THEN
		EXTERN 69
		#I WILL CLEAR A PATH

		PRINT_TILE_AT (2, 22) = 47
		PRINT_TILE_AT (4, 22) = 47
		PRINT_TILE_AT (6, 22) = 47
		PRINT_TILE_AT (8, 22) = 47
		PRINT_TILE_AT (10, 22) = 47
		PRINT_TILE_AT (12, 22) = 47
		PRINT_TILE_AT (14, 22) = 47
		
		#NEED TO TRIGGER A FLAG TO CLEAR THE ROCKS
		SET $ROCK_SLIDE = 1
		REDRAW
	END
	
	
	#gateway
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 84
		WARP_TO_LEVEL 7, 7, 6, 3, 1
    END	
END

#final screen with librarian
ENTERING SCREEN 12
	IF TRUE
	THEN	
		MUSIC 12
		#fighting music
		
		SET_FIRE_ZONE 201, 121, 215, 135
		
		#DISPLAYS GOLDEN APPLE OR NOT
		IF $HAVE_GOLDEN_APPLE = 0
		THEN
			SET TILE (2,2) = 38
		END		
		IF $HAVE_GOLDEN_APPLE = 1
		THEN
			SET TILE (2,2) = 0
		END		
		
		#here is our last puzzle
		IF $SWITCH_10 = 0
		THEN
		#MOVE SWITCH
			SET TILE (1, 7) = 39
			#LOWER SPIKES
			SET TILE (5,5) = 2
			SET TILE (6,5) = 2
			SET TILE (7,5) = 2
			SET TILE (8,5) = 2
			SET TILE (9,5) = 2
		END
	
		IF $SWITCH_10 = 1
		THEN
			#MOVE SWITCH
			SET TILE (1, 7) = 40
			
			#RAISE SPIKES
			SET TILE (5,5) = 33
			SET TILE (6,5) = 33
			SET TILE (7,5) = 33
			SET TILE (8,5) = 33
			SET TILE (9,5) = 33
		END
		
		IF $SWITCH_11 = 0
		THEN
		#MOVE SWITCH
			SET TILE (6, 2) = 39
			
			#LOWER SPIKES
			SET TILE (10,1) = 2
			SET TILE (10,2) = 2
			SET TILE (10,3) = 2
			SET TILE (10,4) = 2
			SET TILE (10,5) = 2
		END
		
		IF $SWITCH_11 = 1
		THEN
			#MOVE SWITCH
			SET TILE (6, 2) = 40
			
			#RAISE SPIKES
			SET TILE (10,1) = 33
			SET TILE (10,2) = 33
			SET TILE (10,3) = 33
			SET TILE (10,4) = 33
			SET TILE (10,5) = 33
		END	
		
		IF $SWITCH_12 = 0
		THEN
			#MOVE SWITCH
			SET TILE (6, 7) = 39
			
			SET $SWITCH_1 = 0
			#SWITCH 1 WHICH IS PLACED LAST IS 
			#USED TO TURN LIGHTS ON AND OFF
		END
	
		IF $SWITCH_12 = 1
		THEN
			#MOVE SWITCH
			SET TILE (6, 7) = 40
			
			SET $SWITCH_1 = 1
			#SWITCH 1 WHICH IS PLACED LAST IS 
			#USED TO TURN LIGHTS ON AND OFF
		END	
		
		IF $SWITCH_13 = 0
		THEN
		#MOVE SWITCH
			SET TILE (13, 2) = 39
		END
		
		IF $SWITCH_13 = 1
		THEN
			#MOVE SWITCH
			SET TILE (13, 2) = 40
			ENEMY 0 ON
		END	
		
		IF $SWITCH_14 = 0
		THEN
		#MOVE SWITCH
			SET TILE (13, 5) = 39
		END
		
		IF $SWITCH_14 = 1
		THEN
			#MOVE SWITCH
			SET TILE (13, 5) = 40			
		END
		
		
		#USED TO TURN LIGHTS ON AND OFF
		IF $SWITCH_1 = 0
		THEN
			EXTERN 246 
			REDRAW
			#LIGHTS ON
		END
		
		IF $SWITCH_1 = 1
		THEN
			EXTERN 247 
			#LIGHTS OFF
		END
		
		#OPEN DOOR
		IF $SWITCH_10 = 1
		IF $SWITCH_11 = 1
		IF $SWITCH_12 = 1
		IF $SWITCH_13 = 1
		THEN
			SET TILE (1,4) = 2
		END
				
	END
END

PRESS_FIRE AT SCREEN 12	

	IF $SWITCH_8 = 0
	THEN
		SET $SWITCH_8 = 1
		SET_FIRE_ZONE 0,0,0,0 
		EXTERN 72
		REDRAW
	END
		
	
	###########
	#SWITCHES LOGIC
	###########
	# SWITCH_10
	###########
	# EVIL TRICK IS TO RAISE SPIKES
	IF PLAYER_TOUCHES 1,7
	THEN
		#base switch
		FLIPFLOP $SWITCH_10	

		#MESS WITH THE OTHER SWITCHES
		
		#EVIL TRICK IS TO TURN THE LIGHTS ON AND OFF
		FLIPFLOP $SWITCH_12
		
		REENTER		
	END	
	
	# SWITCH_11
	#EVIL TRICK IS TO RAISE SPIKES	
	IF PLAYER_TOUCHES 6,2
	THEN
		#base switch
		FLIPFLOP $SWITCH_11
		
		#MESS WITH THE OTHER SWITCHES
		#EVIL TRICK IS TO RAISE SPIKES
		FLIPFLOP $SWITCH_10	
		
		FLIPFLOP $SWITCH_12
		REENTER
	END	
	
	# SWITCH_12
	#EVIL TRICK IS TO TURN THE LIGHTS ON AND OFF
	IF PLAYER_TOUCHES 6,7
	THEN
		#base switch
		FLIPFLOP $SWITCH_12
		
		FLIPFLOP $SWITCH_11
		
	END
	
	# SWITCH_13
	#EVIL TRICK IS TO RESURRECT BOSS
	IF PLAYER_TOUCHES 13,2
	THEN
		#base switch
		FLIPFLOP $SWITCH_13
		
		#MESS WITH THE OTHER SWITCHES
		#EVIL TRICK IS TO RAISE SPIKES
		FLIPFLOP $SWITCH_10		
		ENEMY 0 ON			
		REENTER
	END
	
	# SWITCH_14
	#EVIL TRICK IS TO TELEPORT YOU TO ANOTHER PART OF THE SCREEN
	IF PLAYER_TOUCHES 13,5
	THEN
		#SO THAT WARNING WILL ONLY SHOW ONCE
		#YOU WILL NOT LEAVE HERE ALIVE
		SET $SWITCH_8 = 1
		FLIPFLOP $SWITCH_14
		#base switch
	END
		
	######################
	#DRAW SWITCH POSITIONS
	######################
	
	###########
	#SWITCH 10
	###########
	IF $SWITCH_10 = 0
	IF PLAYER_TOUCHES 1,7
	THEN
	#MOVE SWITCH
		SET TILE (1, 7) = 39
	END	
	
	IF $SWITCH_10 = 1
	IF PLAYER_TOUCHES 1,7
	THEN
		#MOVE SWITCH
		SET TILE (1, 7) = 40
	END
	
	###########
	#SWITCH 11
	###########
	IF $SWITCH_11 = 0
	IF PLAYER_TOUCHES 6,2
	THEN
	#MOVE SWITCH
		SET TILE (6, 2) = 39
	END	
	
	IF $SWITCH_11 = 1
	IF PLAYER_TOUCHES 6,2
	THEN
		#MOVE SWITCH
		SET TILE (6, 2) = 40
	END	

	
	###########
	#SWITCH 12
	###########	
	#HAVE TO PLACE IN AN EXTRA VARIABLE CHECK BECAUSE OTHERWISE CONSTANT REDRAW WILL SLOW DOWN GAME
	IF $SWITCH_12 = 0
	IF PLAYER_TOUCHES 6,7
	THEN
	#MOVE SWITCH
		SET TILE (6, 7) = 39
#		EXTERN 246 #LIGHTS ON
#		REDRAW
#		#THIS WILL CAUSE DELAY ISSUES WHEN CONSTANTLY CALLED
		REENTER
	END
	
	IF $SWITCH_12 = 1
	IF PLAYER_TOUCHES 6,7
	THEN
		#MOVE SWITCH
		SET TILE (6, 7) = 40
		EXTERN 247 #LIGHTS OFF
		REDRAW
		REENTER
	END	
	

	###########
	#SWITCH 13
	###########	
	IF $SWITCH_13 = 0
	THEN
		#MOVE SWITCH
		SET TILE (13, 2) = 39
	END
	
	IF $SWITCH_13 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 2) = 40
		ENEMY 0 ON
	END	
	

	###########
	#SWITCH 14
	###########	
	#HAVE TO PLACE IN AN EXTRA VARIABLE CHECK BECAUSE OTHERWISE CONSTANT REDRAW WILL SLOW DOWN GAME
	IF $SWITCH_14 = 0
	THEN
	#MOVE SWITCH
		SET TILE (13, 5) = 39
	END
	
	#HAVE TO PLACE IN AN EXTRA VARIABLE CHECK BECAUSE OTHERWISE CONSTANT REDRAW WILL SLOW DOWN GAME
	IF $SWITCH_14 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 5) = 40
		SET $SWITCH_8 = 1
		# REPOSTN 13, 8
	END	
	
	###########
	#DRAW SWITCH POSITIONS
	###########
	
	
	IF $SWITCH_10 = 1
	IF $SWITCH_11 = 1
	IF $SWITCH_12 = 1
	IF $SWITCH_13 = 1
	THEN
		SET TILE (1,4) = 2
		ENEMY 0 ON
	END
	
	#SOLUTION 1 2 3 4 1 2
	#GET GOLDEN APPLE

	IF PLAYER_TOUCHES 2, 2
	IF $HAVE_GOLDEN_APPLE = 0
	THEN
				
		#TURN ON THE LIGHTS TO COLLECT APPLE AND DISPLAY TEST
		EXTERN 246 
		REDRAW				
				
		EXTERN 73 #TEXT YOU HAVE FOUND THE APPLE
		RECHARGE #RECHARGE YOUR LIFE
		SET TILE (2,2) = 0
		PRINT_TILE_AT (2, 22) = 38
		SET $HAVE_GOLDEN_APPLE = 1
		#CLEARS THE TEXT
		REDRAW
		
		
		SET $RAISE_LANDBRIDGE = 1
		
		SET $WARPED_TO_HERE = 99
		WARP_TO_LEVEL 2, 3, 1, 8, 1
	END	
END


END_OF_LEVEL
#end level 9

# puzzle ideas
# http://www.rpgmakercentral.com/topic/34542-puzzles/
##################################
# Level 10  DUNGEON 1
##################################

INC_DECORATIONS decorations10.spt

ENTERING GAME
	IF TRUE
	
		SET $SWITCH_1 = 0
		SET $SWITCH_2 = 0
		SET $SWITCH_3 = 0
		SET $SWITCH_4 = 0
		SET $SWITCH_5 = 0
		SET $SWITCH_6 = 0
		SET $SWITCH_7 = 0
		SET $SWITCH_8 = 0
		SET $SWITCH_9 = 0
		SET $SWITCH_10 = 0
		SET $SWITCH_11 = 0
#		SET $SWITCH_12 = 0
		SET $SWITCH_13 = 0
				
		#temp from level 0 mushroom warp
		IF $WARPED_TO_HERE = 98
		THEN
			SET $WARPED_TO_HERE = 0
			#WARP_TO 12, 7, 7
			#WARP_TO 7, 11, 4
			#WARP_TO 14, 12, 4
			#WARP_TO 15, 3, 5
			#WARP_TO 2, 2, 8
			BREAK
		END
		
		#from level 0
		IF $WARPED_TO_HERE = 150
		THEN
			SET $WARPED_TO_HERE = 0
			WARP_TO 12, 7, 7
			BREAK
		END		
	END
END


ENTERING SCREEN 0
	IF TRUE
	THEN
		IF $SWITCH_1 = 0
		THEN
		#MOVE SWITCH
			SET TILE (3, 1) = 38
		END	
	
		IF $SWITCH_1 = 1
		THEN
			#MOVE SWITCH
			SET TILE (3, 1) = 39
		END		
	END
END

PRESS_FIRE AT SCREEN 0
	IF PLAYER_TOUCHES 3,1
	THEN
		SET $SWITCH_1 = 1
	END

	###########
	#DRAW SWITCH POSITIONS
	###########
	IF $SWITCH_1 = 1
	THEN
		#MOVE SWITCH
		SET TILE (3, 1) = 39
		#SET TILE (2, 1) = 24
	END
END


ENTERING SCREEN 2
	IF TRUE
	THEN
		SET_FIRE_ZONE 25, 9, 103, 103

		#####
		#pressure switch 5 1
		#####
		#INITALIZES AS 0
		IF $SWITCH_2 = 0
		THEN
			SET TILE (5,1) = 7
			#PRESSURE SWITCH
			
			SET TILE (7,1) = 0
			SET TILE (8,7) = 15
		END	
		
		IF $SWITCH_2 = 1
		THEN
			SET TILE (5,1) = 6
			#PRESSURE SWITCH
			
			SET TILE (7,1) = 15
			SET TILE (8,7) = 0
		END

		#####
		#pressure switch
		#####
		
		IF $SWITCH_1 = 0
		THEN
			SET TILE (9,9) = 15
			SET TILE (10,9) = 15
		END
		
		IF $SWITCH_1 = 1
		THEN
			SET TILE (9,9) = 0
			SET TILE (10,9) = 0
		END
		
		IF $SWITCH_7 = 0
		THEN
			SET TILE (14, 4) = 15
		END	
		IF $SWITCH_7 = 1
		THEN
			SET TILE (14, 4) = 0
		END
	END
END

PRESS_FIRE AT SCREEN 2
	#PRESSURE TILE LOGIC
	#switch 2
	#STEPPED ON TILE
	IF PLAYER_TOUCHES 5, 1
	THEN
		SET $SWITCH_2 = 3
	END	
	
	#STEPPED TO LEFT
	IF $SWITCH_2 = 3
	IF PLAYER_TOUCHES 4, 1
	THEN		
		SET TILE (5,1) = 7#PRESSURE SWITCH
		SET TILE (7,1) = 0
		SET TILE (8,7) = 15
		SET $SWITCH_2 = 0
	END
	
	#STEPPED TO RIGHT
	IF $SWITCH_2 = 3
	IF PLAYER_TOUCHES 6, 1
	THEN
		SET TILE (5,1) = 6#PRESSURE SWITCH
		SET TILE (7,1) = 15
		SET TILE (8,7) = 0
		SET $SWITCH_2 = 1
	END

END

ENTERING SCREEN 3
	IF TRUE
	THEN	
		IF $SWITCH_3 = 0
		THEN
			SET TILE (13, 3) = 38
		END	
		IF $SWITCH_3 = 1
		THEN
			SET TILE (13, 3) = 39
		END
		
		IF $SWITCH_4 = 0
		THEN
			SET TILE (13, 7) = 38
		END	
		IF $SWITCH_4 = 1
		THEN
			SET TILE (13, 7) = 39
		END	
		
		IF $SWITCH_7 = 0
		THEN
			SET TILE (0, 4) = 15
		END	
		IF $SWITCH_7 = 1
		THEN
			SET TILE (0, 4) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 3
	IF PLAYER_TOUCHES 13,3
	THEN
		#FLIPFLOP $SWITCH_3
		SET $SWITCH_3 = 1
	END
	
	IF PLAYER_TOUCHES 13,7
	THEN
		FLIPFLOP $SWITCH_4
	END
	
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_3 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 3) = 39
		#SET TILE (12, 3) = 22
	END
	
	IF $SWITCH_4 = 0
	THEN
		#MOVE SWITCH
		SET TILE (13, 7) = 38
	END	
	IF $SWITCH_4 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 7) = 39
	END
END


ENTERING SCREEN 6
	IF TRUE
	THEN	
		IF $SWITCH_1 = 0
		THEN
			SET TILE (9,0) = 15
			SET TILE (10,0) = 15
		END
		
		IF $SWITCH_1 = 1
		THEN
			SET TILE (9,0) = 0
			SET TILE (10,0) = 0
		END
		
		IF $SWITCH_3 = 0
		THEN
			SET TILE (14,1) = 15
			SET TILE (14,2) = 15
		END
		
		IF $SWITCH_3 = 1
		THEN
			SET TILE (14,1) = 0
			SET TILE (14,2) = 0
		END
		
		IF $SWITCH_6 = 0
		THEN
			SET TILE (14,7) = 15
			SET TILE (14,8) = 15
		END	
		IF $SWITCH_6 = 1
		THEN
			SET TILE (14,7) = 0
			SET TILE (14,8) = 0
		END
	END
END

ENTERING SCREEN 7
	IF TRUE
	THEN	
		IF $SWITCH_5 = 0
		THEN
			SET TILE (13, 3) = 38
		END	
		IF $SWITCH_5 = 1
		THEN
			SET TILE (13, 3) = 39
		END
		
		IF $SWITCH_6 = 0
		THEN
			SET TILE (13, 6) = 38
			SET TILE (0,7) = 15
			SET TILE (0,8) = 15
			#SET TILE (12, 6) = 0
		END	
		IF $SWITCH_6 = 1
		THEN
			SET TILE (13, 6) = 39
			SET TILE (0,7) = 0
			SET TILE (0,8) = 0
			#SET TILE (12, 6) = 21
		END
		
		IF $SWITCH_3 = 0
		THEN
			SET TILE (0, 1) = 15
			SET TILE (0, 2) = 15
		END	
		IF $SWITCH_3 = 1
		THEN
			SET TILE (0, 1) = 0
			SET TILE (0, 2) = 0
		END
	END
END

PRESS_FIRE AT SCREEN 7

	IF PLAYER_TOUCHES 13,3
	THEN
		FLIPFLOP $SWITCH_5
	END
	
	IF PLAYER_TOUCHES 13,6
	THEN
		#FLIPFLOP $SWITCH_6
		SET $SWITCH_6 = 1
	END
	
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_6 = 1
	THEN
		SET TILE (13, 6) = 39#up
		SET TILE (0,7) = 0
		SET TILE (0,8) = 0
		#SET TILE (12, 6) = 21#arrow
	END
	
	IF $SWITCH_5 = 0
	THEN
		#MOVE SWITCH
		SET TILE (13, 3) = 38
	END	
	IF $SWITCH_5 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 3) = 39
	END
	
END


ENTERING SCREEN 10
	IF TRUE
	THEN
	
		IF $SWITCH_7 = 0
		THEN
			SET TILE (3, 7) = 38
			SET TILE (3, 8) = 0
		END	
		IF $SWITCH_7 = 1
		THEN
			SET TILE (3, 7) = 39
		END
		
		IF $SWITCH_8 = 0
		THEN
			SET TILE (13, 5) = 38
			SET TILE (14, 1) = 15
			SET TILE (14, 2) = 15
			SET TILE (13, 4) = 0
		END	
		IF $SWITCH_8 = 1
		THEN
			SET TILE (13, 5) = 39
			SET TILE (14, 1) = 0
			SET TILE (14, 2) = 0
			#SET TILE (13, 4) = 19
		END
		
		IF $SWITCH_9 = 0
		THEN
			SET TILE (11,9) = 15
		END	
		IF $SWITCH_9 = 1
		THEN
			SET TILE (11,9) = 0
		END
		
		#CLOSES THE GATE AGAIN IF YOU TRY TO REENTER ONCE YOU CAPTURE THE SCEPTRE
		IF $HAVE_SCEPTRE = 1
		THEN
			SET TILE (11,9) = 15
		END
		
	END
END

PRESS_FIRE AT SCREEN 10

	IF PLAYER_TOUCHES 3,7
	THEN
		#FLIPFLOP $SWITCH_7
		SET $SWITCH_7 = 1
	END
	
	IF PLAYER_TOUCHES 13,5
	THEN
		#FLIPFLOP $SWITCH_8
		SET $SWITCH_8 = 1
	END
	
	###########
	#DRAW SWITCH POSITIONS
	###########	

	IF $SWITCH_7 = 1
	THEN
		#MOVE SWITCH
		SET TILE (3, 7) = 39
	END

	IF $SWITCH_8 = 1
	THEN
		SET TILE (13, 5) = 39
		SET TILE (14, 1) = 0
		SET TILE (14, 2) = 0
		#SET TILE (13, 4) = 19
	END		
END

ENTERING SCREEN 11
	IF TRUE
	THEN
	
		IF $SWITCH_9 = 0
		THEN
			SET TILE (13, 5) = 38
		END	
		IF $SWITCH_9 = 1
		THEN
			SET TILE (13, 5) = 39
		END
		
		IF $SWITCH_8 = 0
		THEN
			SET TILE (0, 1) = 15
			SET TILE (0, 2) = 15		
		END	
		IF $SWITCH_8 = 1
		THEN
			SET TILE (0, 1) = 0
			SET TILE (0, 2) = 0
		END

	END
END

PRESS_FIRE AT SCREEN 11

	IF PLAYER_TOUCHES 13,5
	THEN
		SET $SWITCH_9 = 1
	END
	
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_9 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 5) = 39
		#SET TILE (13, 6) = 21
	END
END


ENTERING SCREEN 12
	IF TRUE
	THEN
		SET_FIRE_ZONE 9, 23, 127, 159
		
		SET $MOVED_X_FLAG = 0
		SET $MOVED_Y_FLAG = 0
		
		#TEMP / COMMENT FOR REAL PLAY
		#SET $HAVE_TORCH = 1
		
		IF $HAVE_TORCH = 1
		THEN
			#temp, uncomment for real play
			EXTERN 247 
			#LIGHTS OFF
		END
		
		#DO YOU HAVE THE TORCH
		IF $HAVE_TORCH = 0
		THEN
			SET $WARPED_TO_HERE = 120
			WARP_TO_LEVEL 0, 2, 6, 4, 1
		END
		
		#block gate until you have sceptre
		IF $HAVE_SCEPTRE = 0
		THEN
			SET TILE (7,8) = 15
		END
		IF $HAVE_SCEPTRE = 1
		THEN
			SET TILE (7,8) = 0
		END
	END
END

PRESS_FIRE AT SCREEN 12
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 120
		WARP_TO_LEVEL 0, 2, 6, 4, 1
    END	
	
	#reset button logic
	IF PLAYER_IN_X 1, 31
    IF PLAYER_IN_Y 1, 31
    THEN
		WARP_TO 12, 7, 7
		REENTER		
    END
	
	#if a pushable tile is in 4,9 reenter screen
	IF $MOVED_X_FLAG = 7
	IF $MOVED_Y_FLAG = 0
	THEN
		REENTER
	END
	IF $MOVED_X_FLAG = 7
	IF $MOVED_Y_FLAG = 1
	THEN
		REENTER
	END
	
	#if you push a block onto the reset button
	IF $MOVED_X_FLAG = 1
	IF $MOVED_Y_FLAG = 1
	THEN
		REENTER
	END
	
END

#WORKING ON
ENTERING SCREEN 13
	IF TRUE
	THEN
	
		IF $SWITCH_10 = 0
		THEN
			SET TILE (13, 1) = 38
			SET TILE (7, 0) = 15
		END	
		IF $SWITCH_10 = 1
		THEN
			SET TILE (13, 1) = 39
			SET TILE (7, 0) = 0
		END

	END
END

PRESS_FIRE AT SCREEN 13

	IF PLAYER_TOUCHES 13,1
	THEN
		SET $SWITCH_10 = 1
	END

	
	###########
	#DRAW SWITCH POSITIONS
	###########
	IF $SWITCH_10 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 1) = 39
		SET TILE (7, 0) = 0
		#SET TILE (12, 1) = 21
	END
END


ENTERING SCREEN 14
	IF TRUE
	THEN	
		EXTERN 247 #LIGHTS OFF
		
		IF $SWITCH_9 = 0
		THEN
			SET TILE (11,0) = 15
		END	
		IF $SWITCH_9 = 1
		THEN
			SET TILE (11,0) = 0
		END
		
		IF $SWITCH_11 = 0
		THEN
			SET TILE (13, 4) = 38
			SET TILE (11, 4) = 19
			SET TILE (11, 0) = 0
			SET TILE (14, 8) = 1
		END	
		IF $SWITCH_11 = 1
		THEN
			SET TILE (13, 4) = 39
			SET TILE (11, 4) = 23
			SET TILE (11, 0) = 1
			SET TILE (14, 8) = 0
		END
	END
END

PRESS_FIRE AT SCREEN 14

	IF PLAYER_TOUCHES 13,4
	THEN
		FLIPFLOP $SWITCH_11
	END	
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_11 = 0
	THEN
		#MOVE SWITCH
		SET TILE (13, 4) = 38
		#SET TILE (13, 3) = 19
		SET TILE (11, 4) = 19
		SET TILE (11, 0) = 0
		SET TILE (14, 8) = 1
	END	
	IF $SWITCH_11 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 4) = 39
		
		SET TILE (11, 4) = 23
		SET TILE (11, 0) = 1
		SET TILE (14, 8) = 0
	END
END

#BOSS SCREEN
ENTERING SCREEN 15
	IF TRUE
	THEN
		SET_FIRE_ZONE 9, 121, 23, 135

		SET $SWITCH_0 = 0#BLOCK DOOR
		SET $ENEMS_KILLED = 0
		
		IF $HAVE_SCEPTRE = 0
		THEN
			SET TILE (13,1) = 40
		END
		IF $HAVE_SCEPTRE = 1
		THEN
			SET TILE (13,1) = 0
		END

	END
END

PRESS_FIRE AT SCREEN 15
	
	IF PLAYER_TOUCHES 1, 8
	IF $SWITCH_0 = 0
	THEN
		SET TILE (0,8) = 15
	END
	
	#GRAB THE SCEPTRE
	IF PLAYER_TOUCHES 13, 1
	IF $HAVE_SCEPTRE = 0
	THEN
		SET $HAVE_SCEPTRE = 1
		PRINT_TILE_AT (0, 22) = 40
		SET TILE (13,1) = 0
		EXTERN 246
		# LIGHTS ON
		
		EXTERN 63
		#YOU FOUND THE SCEPTRE
		REDRAW
		EXTERN 247
		# LIGHTS OFF
		
		SET $TALK_GATEKEEPER = 1
		
		SET $DUNGEON_ONE_OPEN = 0
		#SO THE DUNGEON CLOSES BACK UP WHEN YOU ARE DONE		
	END
	
	#OPEN THE ENTRANCE IF YOU HAVE KILLED ALL AND HAVE THE SCEPTRE
	IF $ENEMS_KILLED = 3
	IF $HAVE_SCEPTRE = 1
	THEN
		SET $SWITCH_0 = 1
		SET TILE (0,8) = 0
		WARP_TO 10,11,8
	END
END


END_OF_LEVEL 
#end level 10
##################################
# Level 11 DUNGEON 2
##################################


INC_DECORATIONS decorations11.spt

ENTERING GAME
	IF TRUE

		SET $ENEMS_KILLED = 0
		
		SET $DUNGEON_FLAG_1 = 0
		SET $DUNGEON_FLAG_2 = 0
		SET $DUNGEON_FLAG_3 = 0
		
		SET $FINISH_DUNGEON = 0
		
		IF $WARPED_TO_HERE = 160#from level 2
		THEN
			SET $SWITCH_1 = 1#used to be pressure switch
			
			#used on screen 1
			SET $SWITCH_2 = 0 
			#flip switch opens passage room 8 and 9
			
			SET $SWITCH_3 = 1 
			# used to be pressure switch
			
			#used on screen 2
			SET $SWITCH_4 = 0 
			#defunt switch was used on screen 2
			
			#used nowhere
			SET $SWITCH_5 = 0
			#defunt switch was used as pressure switch	
			
			SET $SWITCH_6 = 0 
			#defunt switch was used as pressure switch	
			
			SET $SWITCH_7 = 0 
			#defunt switch was used as pressure switch
			
			
			#used on screen 7
			SET $SWITCH_8 = 0 
			#defunt switch was used to teleport on screen 11
			
			SET $SWITCH_9 = 0 
			#defunt switch was used to teleport on screen 15
			
			
			SET $SWITCH_10 = 0 
			#defunt switch
			
			#used on screen 8
			SET $SWITCH_11 = 0 
			#opens passage screen 2 FINAL screen
			#to grab the ring
			
			#used on screen 9
			SET $SWITCH_12 = 0 
			#changes passage same screen
			
			#used in screen 10
			SET $SWITCH_13 = 0 
			#non functional just moves
			
			#used in room 11
			SET $SWITCH_14 = 0 
			#non functional just moves
			
			
			SET $SWITCH_15 = 0 
			#defunt switch was used to teleport on screen 11
			
			SET $SWITCH_16 = 0
			#defunt switch
			
			#used in room 12
			SET $SWITCH_17 = 0
			
			#used in room 14
			SET $SWITCH_18 = 0 
			#pressure switch			
			
			SET $SWITCH_19 = 0 
			#pressure switch now defunt
			
			SET $SWITCH_20 = 0 
			#pressure switch now defunt
			
			SET $SWITCH_21 = 0 
			#opens door to screen 13
			
			#used in screen 15
			SET $SWITCH_22 = 0 
			#opens passage to room 14
			
			SET $SWITCH_23 = 0 
			#teleport you now defunt	
			
			SET $SWITCH_24 = 0 
			#does nothing but flipflop
		
			SET $DUNGEON_FLAG_1 = 0
			SET $DUNGEON_FLAG_2 = 0
			SET $DUNGEON_FLAG_3 = 0
				
			SET $FINISH_DUNGEON = 0
		
			SET $WARPED_TO_HERE = 0
			WARP_TO 15, 7, 7
			BREAK
		END
		
		IF $WARPED_TO_HERE = 98#testing entry
		THEN
			SET $WARPED_TO_HERE = 0
			
			#WARP_TO 0, 4, 3
			#WARP_TO 1, 6, 3
			#WARP_TO 15, 7, 7#END PRODUCT
			#WARP_TO 3, 0, 1
			BREAK
		END
		#########
	END
END


ENTERING SCREEN 0
	IF TRUE
	THEN
		SET_FIRE_ZONE 105,89,151,103
	END
END


ENTERING SCREEN 1
	IF TRUE
	THEN
		SET_FIRE_ZONE 25, 89, 215, 135
		
		#####
		#pressure switch
		#####	
		#INITALIZES AS 0
		IF $SWITCH_3 = 1
		THEN
			SET TILE (1,8) = 2
		END
		IF $SWITCH_3 = 0
		THEN
			SET TILE (1,8) = 0
		END
		
		IF $SWITCH_4 = 1
		THEN
			SET TILE (4,4) = 2
		END
		IF $SWITCH_4 = 0
		THEN
			SET TILE (4,4) = 0
		END	
		#####
		#pressure switch
		#####
		
		#FLIP SWITCH
		IF $SWITCH_2 = 0
		THEN
			#MOVE SWITCH
			SET TILE (3, 2) = 27
		END	
		IF $SWITCH_2 = 1
		THEN
			#MOVE SWITCH
			SET TILE (3, 2) = 28
		END
		
	END
END

PRESS_FIRE AT SCREEN 1
	#TOGGLE SWITCH LOGIC
	IF PLAYER_TOUCHES 3,2
	THEN
		#FLIPFLOP $SWITCH_2
		SET $SWITCH_2 = 1
		EXTERN 247 #lights off
	END	
	
	###########
	#DRAW SWITCH POSITIONS
	###########
	IF $SWITCH_2 = 1
	THEN
		#MOVE SWITCH
		SET TILE (3, 2) = 28
	END	
END


ENTERING SCREEN 2
	IF TRUE
	THEN
	
		EXTERN 244 
		#WALLS STOP PURSERS
		
		#temp, comment for real play
		#SET $SWITCH_11 = 1
	
		IF $SWITCH_4 = 1
		THEN
			SET TILE (1,1) = 0#LEFT CLOSE
		END
		IF $SWITCH_4 = 0
		THEN
			SET TILE (1,1) = 2#LEFT OPEN
		END

		IF $SWITCH_11 = 1
		THEN	
			SET TILE (14,1) = 0#GATE OPEN
		END
		IF $SWITCH_11 = 0
		THEN		
			SET TILE (14,1) = 20#GATE CLOSED
		END
		
		#LAST CLAUSE TO KEEP YOU FROM GETTING LOCKED IN
		IF $HAVE_MAGIC_RING = 1
		THEN
			SET TILE (14,1) = 20#GATE CLOSED
		END
		
	END
END



#boss screen
ENTERING SCREEN 3
	IF TRUE
	THEN		
		EXTERN 246 #lights on
		SET_FIRE_ZONE 9, 9, 23, 23
		
		SET $TALK_DESERT_GATEMASTER = 3
		
		SET $SWITCH_1 = 0
		
		IF $HAVE_MAGIC_RING = 0
		THEN
			SET TILE (13,1) = 30
		END		
		IF $HAVE_MAGIC_RING = 1
		THEN
			SET TILE (13,1) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 3

	IF PLAYER_TOUCHES 1,1
	THEN
		SET TILE (0, 1) = 2
	END

	IF PLAYER_TOUCHES 13, 1
	IF $HAVE_MAGIC_RING = 0
	THEN
		EXTERN 39
		#YOU FOUND THE MAGIC RING
		
		SET TILE (13, 1) = 0
		SET $HAVE_MAGIC_RING = 1
		SET $DUNGEON_TWO_CONQUERED = 1
		
		PRINT_TILE_AT (6, 22) = 30
		#PLACES RING in bottom
		
		REDRAW
		EXTERN 247 
		#lights off
		
		WARP_TO 11,12,2
	END
	
	#SET $SWITCH_1 = 0

	
	IF $ENEMS_KILLED = 3
	IF $HAVE_MAGIC_RING = 1
	THEN
		#open door
		#SET TILE (0,1) = 0
		WARP_TO 11,12,2
	END
END

ENTERING SCREEN 4
	IF TRUE
	THEN	
		SET_FIRE_ZONE 9, 41, 23, 87		
	END
END

PRESS_FIRE AT SCREEN 4
END

ENTERING SCREEN 5
	IF TRUE
	THEN		
		IF $SWITCH_3 = 1
		THEN
			SET TILE (12,3) = 0#LEFT CLOSE
		END
		IF $SWITCH_3 = 0
		THEN
			SET TILE (12,3) = 2#LEFT OPEN
		END		
	END
END


ENTERING SCREEN 6
	IF TRUE
	THEN	
		SET_FIRE_ZONE 57, 121, 103, 135
	END
END

PRESS_FIRE AT SCREEN 6
	
END

ENTERING SCREEN 7
	IF TRUE
	THEN
		#BEGIN SWITCHES
		IF $SWITCH_8 = 0
		THEN
			#MOVE SWITCH
			SET TILE (13, 2) = 27		
		END		
		IF $SWITCH_8 = 1
		THEN
			#MOVE SWITCH
			SET TILE (13, 2) = 28
		END
		
		IF $SWITCH_9 = 0
		THEN
			#MOVE SWITCH
			SET TILE (13, 6) = 27
		END	
		IF $SWITCH_9 = 1
		THEN
			#MOVE SWITCH
			SET TILE (13, 6) = 28
		END
		#END SWITCHES
	END
END

PRESS_FIRE AT SCREEN 7

	#SWITCH 8
	IF PLAYER_TOUCHES 13,2
	THEN
		WARP_TO 11,12,2
	END
	#SWITCH_9
	IF PLAYER_TOUCHES 13,6
	THEN
		WARP_TO 15,12,6
	END	
END


ENTERING SCREEN 8
	IF TRUE
	THEN	
		SET_FIRE_ZONE 137, 41, 183, 55
		#10,3
		#FROM ROOM 2
		IF $SWITCH_2 = 0
		THEN
			SET TILE (14, 1) = 2
		END		
		IF $SWITCH_2 = 1
		THEN
			SET TILE (14, 1) = 0
		END
		
		#DISPLAY TOGGLE SWITCH
		IF $SWITCH_11 = 0
		THEN			
			SET TILE (13, 6) = 27
		END		
		IF $SWITCH_11 = 1
		THEN
			SET TILE (13, 6) = 28
		END		
	END
END

PRESS_FIRE AT SCREEN 8
	#TOGGLE SWITCH LOGIC
	IF PLAYER_TOUCHES 13,6
	THEN
		SET $SWITCH_11 = 1
	END	
	
	###########
	#DRAW SWITCH POSITIONS
	###########
	IF $SWITCH_11 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 6) = 28
	END	
END

ENTERING SCREEN 9
	IF TRUE
	THEN
	
		IF $SWITCH_2 = 0
		THEN
			SET TILE (0, 1) = 2
		END		
		IF $SWITCH_2 = 1
		THEN
			SET TILE (0, 1) = 0
		END
		
		#DISPLAY TOGGLE SWITCH
		IF $SWITCH_12 = 0
		THEN			
			SET TILE (13, 2) = 27
			SET TILE (5, 2) = 2
			SET TILE (7, 2) = 0
		END		
		IF $SWITCH_12 = 1
		THEN
			SET TILE (13, 2) = 28
			SET TILE (5, 2) = 0
			SET TILE (7, 2) = 2
		END	
	END
END

PRESS_FIRE AT SCREEN 9

	#TOGGLE SWITCH LOGIC
	IF PLAYER_TOUCHES 13,2
	THEN
		#FLIPFLOP $SWITCH_12
		SET $SWITCH_12 = 1
	END	
	
	###########
	#DRAW SWITCH POSITIONS
	###########
	IF $SWITCH_12 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 2) = 28
		SET TILE (5, 2) = 0
		SET TILE (7, 2) = 2
	END
END

ENTERING SCREEN 10
	IF TRUE
	THEN
			
		#MOVE TOGGLE SWITCH
		IF $SWITCH_13 = 0
		THEN			
			SET TILE (13, 4) = 27
		END		
		IF $SWITCH_13 = 1
		THEN
			SET TILE (13, 4) = 28
		END
		
		#PRESSURE SWITCH FROM ROOM 14
		IF $SWITCH_19 = 0
		THEN
			SET TILE (1,8) = 2
		END
		IF $SWITCH_19 = 1
		THEN
			SET TILE (1,8) = 0
		END	
	END
END

PRESS_FIRE AT SCREEN 10
	#TOGGLE SWITCH LOGIC
	IF PLAYER_TOUCHES 13,4
	THEN
		FLIPFLOP $SWITCH_13
	END	
	
	###########
	#DRAW SWITCH POSITIONS
	###########
	IF $SWITCH_13 = 0
	THEN
		#MOVE SWITCH
		SET TILE (13, 4) = 27
	END	
	IF $SWITCH_13 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 4) = 28
	END
END

ENTERING SCREEN 11
	IF TRUE
	THEN
		#BEGIN SWITCHES
		IF $SWITCH_14 = 0
		THEN
		#MOVE SWITCH
			SET TILE (13, 2) = 27		
		END		
		IF $SWITCH_14 = 1
		THEN
			#MOVE SWITCH
			SET TILE (13, 2) = 28
		END
		

	END
END

PRESS_FIRE AT SCREEN 11

	#SWITCH_14
	IF PLAYER_TOUCHES 13,2
	THEN
		FLIPFLOP $SWITCH_14
	END
	
	IF PLAYER_TOUCHES 13,6
	THEN
		WARP_TO 7,12,2		
	END	
	
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_14 = 0
	THEN
		#MOVE SWITCH
		SET TILE (13, 2) = 27
	END	
	IF $SWITCH_14 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 2) = 28
	END	
END

ENTERING SCREEN 12
	IF TRUE
	THEN
		#MOVE TOGGLE SWITCH
		IF $SWITCH_17 = 0
		THEN			
			SET TILE (13, 7) = 27
		END		
		IF $SWITCH_17 = 1
		THEN
			SET TILE (13, 7) = 28
		END
		
	END
END

PRESS_FIRE AT SCREEN 12	
	
	#TOGGLE SWITCH LOGIC
	IF PLAYER_TOUCHES 13,7
	THEN
		SET $SWITCH_17 = 1
	END	
	
	###########
	#DRAW SWITCH POSITIONS
	###########
	IF $SWITCH_17 = 0
	THEN
		#MOVE SWITCH
		SET TILE (13, 7) = 27
	END	
	IF $SWITCH_17 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 7) = 28
	END
END

ENTERING SCREEN 13
	IF TRUE
	THEN
		#to room 12, initally blocked
		#switch in room 14
		IF $SWITCH_21 = 1
		THEN
			SET TILE (0,8) = 12
		END
		IF $SWITCH_21 = 0
		THEN
			SET TILE (0,8) = 20
		END
		
		#switch in room 12
		IF $SWITCH_17 = 1
		THEN
			SET TILE (8,1) = 0
		END
		IF $SWITCH_17 = 0
		THEN
			SET TILE (8,1) = 2
		END
	
	END
END

ENTERING SCREEN 14
	IF TRUE
	THEN
		SET_FIRE_ZONE 9,9,151,135
		#PRESSURE TILE

		IF $SWITCH_18 = 0
		THEN
			SET TILE (3,8) = 10
			SET TILE (5,8) = 0
		END
		IF $SWITCH_18 = 1
		THEN
			SET TILE (3,8) = 17
			SET TILE (5,8) = 2
		END	

		IF $SWITCH_21 = 0
		THEN
			#MOVE SWITCH
			#CLOSES DOOR SCREEN 13
			SET TILE (13, 6) = 27
		END	
		IF $SWITCH_21 = 1
		THEN
			#OPENS DOOR SCREEN 13
			SET TILE (13, 6) = 28
		END
		
		IF $SWITCH_22 = 0
		THEN
			SET TILE (14,8) = 2
			SET TILE (12,3) = 2
		END
		IF $SWITCH_22 = 1
		THEN
			SET TILE (14,8) = 0
			SET TILE (12,3) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 14
	
	#OK
	#switch 18
	#PRESSURE TILE
	IF PLAYER_TOUCHES 3, 8
	THEN
		SET $SWITCH_18 = 3
		#STEPPED ON TILE
	END	
	IF $SWITCH_18 = 3
	IF PLAYER_TOUCHES 4, 8
	THEN
		SET $SWITCH_18 = 1
		#STEPPED TO RIGHT
		
		SET TILE (3,8) = 17
		SET TILE (5,8) = 2
		#BLOCK PASSAGE		
	END	
	#PRESSURE TILE LOGIC
	
	IF PLAYER_TOUCHES 13,6
	THEN
		#OPENS DOOR SCREEN 13
		SET $SWITCH_21 = 1
	END
	
	IF $SWITCH_21 = 1
	THEN
		#MOVE SWITCH
		#OPENS DOOR SCREEN 13
		SET TILE (13, 6) = 28
	END
END

ENTERING SCREEN 15
	IF TRUE
	THEN
		SET_FIRE_ZONE 97, 129, 127, 159		
		
		EXTERN 247
		#TURN OFF LIGHTS
		
		#TEMP COMMENT FOR REAL PLAY
		#SET HAVE_MAGIC_RING = 1
		
		IF $HAVE_MAGIC_RING = 0
		THEN
			SET TILE (7,8) = 20
		END
		IF $HAVE_MAGIC_RING = 1
		THEN
			SET TILE (7,8) = 0
		END
			
		#BEGIN SWITCHES
		IF $SWITCH_22 = 0
		THEN
		#MOVE SWITCH
			SET TILE (2, 3) = 27
			SET TILE (0, 8) = 2
		END	
		
		IF $SWITCH_22 = 1
		THEN
			#MOVE SWITCH
			SET TILE (2, 3) = 28
			SET TILE (0, 8) = 0
		END
		
		IF $SWITCH_23 = 0
		THEN
		#MOVE SWITCH
			SET TILE (13, 3) = 27		
		END		
		IF $SWITCH_23 = 1
		THEN
			#MOVE SWITCH
			SET TILE (13, 3) = 28
		END

	END
END

PRESS_FIRE AT SCREEN 15

	IF PLAYER_TOUCHES 2,3
	THEN
		SET $SWITCH_22 = 1
	END
	
	IF PLAYER_TOUCHES 13,3
	THEN
		FLIPFLOP $SWITCH_23
	END
	
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_22 = 0
	THEN
		#MOVE SWITCH
		SET TILE (2, 3) = 27
		SET TILE (0, 8) = 2
	END	
	IF $SWITCH_22 = 1
	THEN
		#MOVE SWITCH
		SET TILE (2, 3) = 28
		SET TILE (0, 8) = 0
	END
	
	IF $SWITCH_23 = 0
	THEN
		#MOVE SWITCH
		SET TILE (13, 3) = 27
	END	
	IF $SWITCH_23 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 3) = 28
	END

	#gateway
	IF PLAYER_IN_X 97, 127
    IF PLAYER_IN_Y 129, 159
    THEN
		SET $WARPED_TO_HERE = 165
		WARP_TO_LEVEL 2, 10, 9, 3, 1
    END	
END


END_OF_LEVEL 
#end level 11

##################################
# Level 12 DUNGEON 3
##################################
INC_DECORATIONS decorations12.spt

ENTERING GAME
	IF TRUE		
			
		#from level 8
		IF $WARPED_TO_HERE = 180
		THEN
			SET $WARPED_TO_HERE = 0
			
			SET $ENEMS_KILLED = 0
			SET $DUNGEON_THREE_CONQUERED = 0
			
			SET $SWITCH_1 = 0
			SET $SWITCH_2 = 0
			SET $SWITCH_3 = 0
			SET $SWITCH_4 = 0
			SET $SWITCH_5 = 0
			SET $SWITCH_6 = 0
			SET $SWITCH_7 = 0
			SET $SWITCH_8 = 0
			SET $SWITCH_9 = 0
			SET $SWITCH_10 = 0
			
			SET $SWITCH_11 = 0
			SET $SWITCH_12 = 0
			SET $SWITCH_13 = 0
			SET $SWITCH_14 = 0
			
			SET $SWITCH_15 = 0
			SET $SWITCH_16 = 0
			
			WARP_TO 15, 10, 8
			BREAK
		END
		
	END
END

# boss screen
ENTERING SCREEN 0	
	IF TRUE
	THEN
	
		SET $ENEMS_KILLED = 0
		#EXTERN 244 #WALLS STOP PURSERS
		#EXTERN 245 #WALK THRU WALLS / FLY
		
		#TILE 10,1
		SET_FIRE_ZONE 137,9,151,23

		SET $RAISE_LANDBRIDGE = 1
		#JUST BY ENTERING THIS SCREEN YOU CAN NOW RETRIEVE THE GOLDEN APPLE
		
		#top right
		IF $SWITCH_11 = 0
		THEN
			SET TILE (13, 3) = 38
			SET TILE (3,8) = 2#wall up the enemy
		END	
		IF $SWITCH_11 = 1
		THEN
			SET TILE (13, 3) = 39
			SET TILE (3,8) = 0#release the enemy on bottom
		END
		
		#bottom  left
		IF $SWITCH_12 = 0
		THEN
			SET TILE (1, 8) = 41
			SET TILE (3,1) = 2#wall up enemy
		END	
		IF $SWITCH_12 = 1
		THEN
			SET TILE (1, 8) = 40
			SET TILE (3,1) = 0#remove the wall
			EXTERN 245#now the bastard flies
		END
		
		#top left
		IF $SWITCH_13 = 0
		THEN
			SET TILE (1, 1) = 41
			#SET TILE (12,8) = 2
		END	
		IF $SWITCH_13 = 1
		THEN
			SET TILE (1, 1) = 40
			#SET TILE (12,0) = 0
		END

		IF $SWITCH_16 = 0
		THEN
			#MOVE SWITCH
			SET TILE (13, 8) = 38
			SET TILE (3, 5) = 2
			SET TILE (3, 6) = 2
		END	
	
		IF $SWITCH_16 = 1
		THEN
			#MOVE SWITCH
			SET TILE (13, 8) = 39	
			SET TILE (3, 5) = 0 
			#REMOVE TILES TO FACE
			SET TILE (3, 6) = 0 
			#REMOVE TILES TO FACE			
		END	
	
		
	END
END

PRESS_FIRE AT SCREEN 0	
	
	IF $ENEMS_KILLED = 2
	THEN
		SET TILE (3, 5) = 0 
		#REMOVE TILES TO FACE
		SET TILE (3, 6) = 0 
		#REMOVE TILES TO FACE		
	END
	
	#lower the gate
	IF PLAYER_TOUCHES 9,1
	THEN
		SET TILE (10, 1) = 20	
		#block the player in the room	
	END
	
	#top right
	IF PLAYER_TOUCHES 13,3
	THEN
		SET $SWITCH_11 = 1
		EXTERN 247
	END
	
	#bottom left
	IF PLAYER_TOUCHES 1,8
	THEN
		SET $SWITCH_12 = 1
		EXTERN 247
	END
	
	#top left
	IF PLAYER_TOUCHES 1,1
	THEN
		SET $SWITCH_13 = 1
		EXTERN 247
	END
	
	#bottom right
	IF PLAYER_TOUCHES 13,8
	THEN		
		#ONLY FLIP ONCE
		SET $SWITCH_16 = 1
	
		EXTERN 246 
		#LIGHTS ON so you can read text
		REDRAW
		
		EXTERN 71 
		#you feel an earthquake
		REDRAW
		
		EXTERN 247
		#lights off again
		
		SET $DUNGEON_THREE_CONQUERED = 1
		WARP_TO 3,7,7		
	END

	###########
	#DRAW SWITCH POSITIONS
	###########
	IF $SWITCH_11 = 1
	THEN
		SET TILE (13, 3) = 39
		SET TILE (3,8) = 0
		#release the enemy on bottom
	END

	IF $SWITCH_12 = 1
	THEN
		SET TILE (1, 8) = 40
		SET TILE (3,1) = 0
		#remove the wall
		EXTERN 245
		#now the bastard flies
	END

	IF $SWITCH_13 = 1
	THEN
		SET TILE (1, 1) = 40
		SET TILE (12,8) = 0
		#remove the wall
		
		EXTERN 244
		#no flying
	END
	
	IF $SWITCH_16 = 0
	THEN
		#MOVE SWITCH
		SET TILE (13, 8) = 38
		SET TILE (3, 5) = 2
		SET TILE (3, 6) = 2
	END	

	IF $SWITCH_16 = 1
	THEN		
		#MOVE SWITCH
		SET TILE (13, 8) = 39
		#REMOVE TILES FROM FACE
		SET TILE (3, 5) = 0
		SET TILE (3, 6) = 0
		
		SET $RAISE_LANDBRIDGE = 1
		#exit, you dont have to kill the face
		SET TILE (11,2) = 0
	END
	
END


ENTERING SCREEN 1
	IF TRUE
	THEN
		#SWITCH 7
		#MOVES GATE ON SCREEN 2
		
		#temp
		EXTERN 246 #LIGHTS ON
		#EXTERN 247 #LIGHTS OFF
		
		IF $SWITCH_7 = 0
		THEN
			SET TILE (6, 7) = 38
			SET TILE (11,9) = 0
		END	
		IF $SWITCH_7 = 1
		THEN
			SET TILE (6, 7) = 39
			SET TILE (11,9) = 20
			EXTERN 247
		END

	END
END

PRESS_FIRE AT SCREEN 1

	IF PLAYER_TOUCHES 6,7
	THEN
		SET $SWITCH_7 = 1
		
		EXTERN 247 
		#LIGHTS OFF
	END	
	###########
	#DRAW SWITCH POSITIONS
	###########	

	IF $SWITCH_7 = 1
	THEN
		#MOVE SWITCH
		SET TILE (6, 7) = 39
		SET TILE (11,9) = 20
	END	
	
END

ENTERING SCREEN 2
	IF TRUE
	THEN
		#SWITCH 8
		#TRANSPORTS YOU TO SCREEN 13	
		IF $SWITCH_8 = 0
		THEN
			SET TILE (11, 5) = 38
		END	
		IF $SWITCH_8 = 1
		THEN
			SET TILE (11, 5) = 39
		END
		
		#LEFT GATE MOVES BY SWITCH 7
		IF $SWITCH_7 = 0
		THEN
			SET TILE (2,6) = 20
		END
		IF $SWITCH_7 = 1
		THEN
			SET TILE (2,6) = 0
		END
		
		#RIGHT GATE MOVED BY SWITCH 5
		IF $SWITCH_5 = 0
		THEN
			SET TILE (14,1) = 20
		END
		IF $SWITCH_5 = 1
		THEN
			SET TILE (14,1) = 0
		END
		
		IF $SWITCH_16 = 1
		THEN
			SET TILE (4,4) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 2

	IF PLAYER_TOUCHES 11,5
	THEN
		WARP_TO 13,12,7
	END
END

ENTERING SCREEN 3
	IF TRUE
	THEN
		#SWITCH 6		
		#MOVES GATE ON SCREEN 5
		IF $SWITCH_6 = 0
		THEN
			SET TILE (13, 1) = 38
		END	
		IF $SWITCH_6 = 1
		THEN
			SET TILE (13, 1) = 39
		END
	END
END

PRESS_FIRE AT SCREEN 3

	IF PLAYER_TOUCHES 13,1
	THEN
		#FLIPFLOP $SWITCH_6
		SET $SWITCH_6 = 1
	END
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_6 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 1) = 39
	END	
	
END

ENTERING SCREEN 4
	IF TRUE
	THEN
	#SWITCH 9
	#MOVES GATE ON SCREEN 13 AND 9
	IF $SWITCH_9 = 0
		THEN
			SET TILE (2, 1) = 38
			SET TILE (9,1) = 2
			SET TILE (14,1) = 2
		END	
		IF $SWITCH_9 = 1
		THEN
			SET TILE (2, 1) = 39
			#OPEN PASSAGES AND CLUE ON GROUND
			SET TILE (9,1) = 12
			SET TILE (14,1) = 12
		END

	END
END

PRESS_FIRE AT SCREEN 4

	IF PLAYER_TOUCHES 2,1
	THEN
		#FLIPFLOP $SWITCH_9
		SET $SWITCH_9 = 1
	END
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_9 = 0
	THEN
		#MOVE SWITCH
		SET TILE (9,1) = 2
		SET TILE (14,1) = 2
	END	
	IF $SWITCH_9 = 1
	THEN
		#MOVE SWITCH
		SET TILE (2, 1) = 39
		#OPEN PASSAGES AND CLUE ON GROUND
		
		SET TILE (9,1) = 12
		SET TILE (14,1) = 12
	END	
	
END

ENTERING SCREEN 5
	IF TRUE
	THEN
		#GATE MOVES BY SWITCH 6
		IF $SWITCH_6 = 0
		THEN
			SET TILE (11,0) = 20
		END
		
		IF $SWITCH_6 = 1
		THEN
			#OPEN GATE AND CLUE ON GROUND
			SET TILE (11,0) = 12
		END
		
		IF $SWITCH_9 = 0
		THEN
			SET TILE (0,1) = 2
		END	
		IF $SWITCH_9 = 1
		THEN
			SET TILE (0,1) = 12
		END
		
		IF $DUNGEON_THREE_CONQUERED = 1
		THEN
			#CLOSE PASSAGE SO YOU DONT GET TRAPPED
			SET TILE (11,0) = 20
		END
		
	END
END


ENTERING SCREEN 7
	IF TRUE
	THEN
		#GATE MOVES BY SWITCH 3
		IF $SWITCH_3 = 0
		THEN
			SET TILE (9,4) = 20
		END
		
		IF $SWITCH_3 = 1
		THEN
			SET TILE (9,4) = 0
		END
	END
END



ENTERING SCREEN 8
	IF TRUE
	THEN
		#SWITCH 1
		#MOVES GATE ON SCREEN 14
		IF $SWITCH_1 = 0
		THEN
			SET TILE (9, 8) = 38
		END	
		IF $SWITCH_1 = 1
		THEN
			SET TILE (9, 8) = 39
		END
		
		#SWITCH 4
		#MOVES GATE ON SCREEN 12 AND 13
		IF $SWITCH_4 = 0
		THEN
			SET TILE (11, 3) = 38
		END	
		IF $SWITCH_4 = 1
		THEN
			SET TILE (11, 3) = 39
		END
		
	END
END

PRESS_FIRE AT SCREEN 8
	
	IF PLAYER_TOUCHES 9,8
	THEN
		#FLIPFLOP $SWITCH_1
		SET $SWITCH_1 = 1
	END
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_1 = 1
	THEN
		#MOVE SWITCH
		SET TILE (9, 8) = 39
	END	
	
	IF PLAYER_TOUCHES 11,3
	THEN
		SET $SWITCH_4 = 1
	END
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_4 = 1
	THEN
		#MOVE SWITCH
		SET TILE (11, 3) = 39
	END	
END

ENTERING SCREEN 9
	IF TRUE
	THEN
		#SWITCH 3
		#MOVES GATE ON SCREEN 7
		IF $SWITCH_3 = 0
		THEN
			SET TILE (8, 2) = 38
		END	
		IF $SWITCH_3 = 1
		THEN
			SET TILE (8, 2) = 39
		END
		
		#GATE MOVES BY SWITCH 9
		IF $SWITCH_1 = 0
		THEN
			SET TILE (1,9) = 20
		END
		
		IF $SWITCH_1 = 1
		THEN
			SET TILE (1,9) = 12#OPEN GATE AND CLUE ON GROUND
		END
		
		IF $SWITCH_9 = 1
		THEN
			#OPEN PASSAGE AND CLUE ON GROUND
			SET TILE (5,5) = 12
			SET TILE (5,7) = 12
		END
		
		
	END
END

PRESS_FIRE AT SCREEN 9

	IF PLAYER_TOUCHES 8,2
	THEN
		#FLIPFLOP $SWITCH_3
		SET $SWITCH_3 = 1
	END
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_3 = 1
	THEN
		#MOVE SWITCH
		SET TILE (8, 2) = 39
	END	
	
END

ENTERING SCREEN 10
	IF TRUE
	THEN
		#GATE MOVED BY SWITCH 2
		IF $SWITCH_2 = 0
		THEN
			SET TILE (1,6) = 20 
			#gate
			
			SET TILE (3,9) = 2 
			#wall
			
			SET TILE (2,7) = 2 
			#wall
		END
		
		IF $SWITCH_2 = 1
		THEN
			#OPEN GATE AND PASSAGES AND CLUE ON GROUND
			SET TILE (1,6) = 0
			SET TILE (3,9) = 12 
			SET TILE (2,7) = 12 
		END
				
	END
END


ENTERING SCREEN 12
	IF TRUE
	THEN
		#SWITCH 5
		#MOVES GATE ON SCREEN 2 AND 3
		IF $SWITCH_5 = 0
		THEN
			SET TILE (13, 1) = 38
		END	
		IF $SWITCH_5 = 1
		THEN
			SET TILE (13, 1) = 39
		END		
	END
END

PRESS_FIRE AT SCREEN 12

	IF PLAYER_TOUCHES 13,1
	THEN
		#FLIPFLOP $SWITCH_5
		SET $SWITCH_5 = 1
	END
	###########
	#DRAW SWITCH POSITIONS
	###########	
	IF $SWITCH_5 = 1
	THEN
		#MOVE SWITCH
		SET TILE (13, 1) = 39
	END		
END

ENTERING SCREEN 13
	IF TRUE
	THEN
		#TOP GATE MOVES BY SWITCH 1
		IF $SWITCH_1 = 0
		THEN
			SET TILE (1,0) = 20
		END
		
		IF $SWITCH_1 = 1
		THEN
			SET TILE (1,0) = 0
		END
		
		#BOTTOM GATE MOVED BY SWITCH 4
		IF $SWITCH_4 = 0
		THEN
			SET TILE (0,8) = 20
		END
		
		IF $SWITCH_4 = 1
		THEN
			SET TILE (0,8) = 12
			#OPEN GATE AND CLUE ON GROUND
		END
	END
END


ENTERING SCREEN 14
	IF TRUE
	THEN
		#SWITCH 2
		#MOVES GATE ON SCREEN 10
		IF $SWITCH_2 = 0
		THEN
			SET TILE (8, 2) = 38
			SET TILE (3, 0) = 2
		END	
		IF $SWITCH_2 = 1
		THEN
			SET TILE (8, 2) = 39
			SET TILE (3, 0) = 12 
			#OPEN PASSAGE AND CLUE ON GROUND
		END
		
		#GATE MOVES BY SWITCH 1
		IF $SWITCH_1 = 0
		THEN
			SET TILE (2,1) = 20
		END
		
		IF $SWITCH_1 = 1
		THEN
			SET TILE (2,1) = 12 
			#OPEN PASSAGE AND CLUE ON GROUND
		END
	END
END

PRESS_FIRE AT SCREEN 14

	IF PLAYER_TOUCHES 8,2
	THEN
		#FLIPFLOP $SWITCH_2
		SET $SWITCH_2  = 1
	END
	
	IF $SWITCH_2 = 1
	THEN
		#MOVE SWITCH
		SET TILE (8, 2) = 39
		SET TILE (3, 0) = 12
		#OPEN PASSAGE AND CLUE ON GROUND
	END
END


ENTERING SCREEN 15
	IF TRUE
	THEN
		SET_FIRE_ZONE 121, 132, 135, 151
		
		EXTERN 247 #LIGHTS OFF
		
		IF $DUNGEON_THREE_CONQUERED = 0
		THEN
			SET TILE(8,8) = 20
		END
		IF $DUNGEON_THREE_CONQUERED = 1
		THEN
			SET TILE(8,8) = 0
		END
		
	END
END

PRESS_FIRE AT SCREEN 15
	IF PLAYER_IN_X 121, 135
    IF PLAYER_IN_Y 132, 151
    THEN
		SET $WARPED_TO_HERE = 165
		WARP_TO_LEVEL 8, 11, 6, 5, 1
    END	
END

END_OF_LEVEL 
##end level 12
